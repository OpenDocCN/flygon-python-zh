# 前言

计算行业的特点是寻求越来越高效的性能，从网络、电信、航空电子等领域的高端应用到台式计算机、笔记本电脑和视频游戏中的低功耗嵌入式系统。这种发展路径已经导致了多核系统的出现，其中双核、四核和八核处理器只是即将到来的计算核心数量不断增加的开始。

然而，这种扩展不仅在半导体行业中，也在可以通过并行计算执行的应用程序的开发中带来了挑战。

事实上，**并行计算**代表着同时利用多个计算资源来解决处理问题，以便可以在多个 CPU 上执行，将问题分解为可以同时处理的离散部分，每个部分进一步分解为可以在不同 CPU 上串行执行的一系列指令。

计算资源可以包括具有多个处理器的单台计算机，通过网络连接的任意数量的计算机，或者两种方法的组合。并行计算一直被认为是计算的极端顶点或未来，直到几年前，它是由复杂系统的数值模拟和涉及各个领域的情况所驱动：天气和气候预测、化学和核反应、人类基因组图谱、地震和地质活动、机械设备的行为（从假肢到航天飞机）、电子电路和制造过程。

然而，如今，越来越多的商业应用程序要求开发速度更快的计算机，以支持以复杂方式处理大量数据。这些应用包括数据挖掘和并行数据库、石油勘探、网络搜索引擎和服务、计算机辅助医学诊断、跨国公司管理、高级图形和虚拟现实（尤其是视频游戏行业）、多媒体和视频网络技术以及协作工作环境。

最后但同样重要的是，并行计算代表了最大化时间这一无限但同时越来越宝贵和稀缺的资源的尝试。这就是为什么并行计算正在从为少数人保留的非常昂贵的超级计算机的世界转向基于多处理器、**图形处理单元**（**GPU**）或几台相互连接的计算机的更经济和解决方案，这些解决方案可以克服串行计算的约束和单个 CPU 的限制。

为了介绍并行编程的概念，我们采用了最流行的编程语言之一——Python。Python 之所以如此受欢迎，部分原因在于其灵活性，因为它是网页和桌面开发人员、系统管理员和代码开发人员以及最近的数据科学家和机器学习工程师经常使用的语言。

从技术角度来看，在 Python 中，没有单独的编译阶段（例如在 C 中发生的情况），从源代码生成可执行文件。Python 是一种便携式语言的事实使其成为一种便携式语言。一旦源代码编写完成，它可以在当前使用的大多数平台上进行解释和执行，无论是来自苹果（macOS X）还是 PC（Microsoft Windows 和 GNU/Linux）。

Python 的另一个优点是*易学性*。任何人都可以在几天内学会使用它并编写他们的第一个应用程序。在这种情况下，语言的开放结构起着基础性作用，没有冗余的声明，因此非常类似于口语。最后，Python 是自由软件：不仅 Python 解释器和在我们的应用程序中使用 Python 是免费的，而且 Python 也可以自由修改和根据完全开源许可证的规则进行重新分发。

《Python 并行编程食谱，第二版》包含各种示例，为读者提供解决实际问题的机会。它审查了并行架构的软件设计原则，强调程序清晰度的重要性，并避免使用复杂术语，而是使用清晰直接的示例。

每个主题都作为完整的、可工作的 Python 程序的一部分呈现，总是跟随所讨论程序的输出。各章节的模块化组织提供了一个经过验证的路径，从最简单的论点到最高级的论点，但也适合那些只想学习一些特定问题的人。

# 本书适合对象

《Python 并行编程食谱，第二版》旨在面向希望利用并行编程技术编写强大高效代码的软件开发人员。阅读本书将使您能够掌握并行计算的基础知识和高级方面。

Python 编程语言易于使用，使非专家能够轻松处理和理解本书中概述的主题。

# 本书涵盖的内容

第一章，*开始并行计算和 Python*，概述了并行编程架构和编程模型。该章介绍了 Python 编程语言，讨论了语言的特性、易学易用性、可扩展性以及丰富的可用软件库和应用程序，这些都使 Python 成为任何应用程序的有价值工具，特别是当然是并行计算。

第二章，*基于线程的并行性*，讨论使用`threading`Python 模块的线程并行性。读者将通过完整的编程示例学习如何同步和操作线程，以实现多线程应用程序。

第三章，*基于进程的并行性*，引导读者通过基于进程的方法来并行化程序。一整套示例将向读者展示如何使用`multiprocessing` Python 模块。

第四章，*消息传递*，专注于消息传递交换通信系统。特别是，将介绍`mpi4py`库，并提供大量应用示例。

第五章，*异步编程*，解释了并发编程的异步模型。在某些方面，它比线程模型更简单，因为有一个单一的指令流，任务明确放弃控制，而不是任意挂起。该章向读者展示如何使用`asyncyio`模块以异步方式组织每个任务作为一系列必须以异步方式执行的较小步骤。

第六章，*分布式 Python*，介绍了分布式计算，即聚合多个计算单元以透明一致的方式协同运行单个计算任务的过程。特别是，该章提供的示例应用描述了使用`socket`和 Celery 模块管理分布式任务。

第七章，*云计算*，概述了与 Python 编程语言相关的主要云计算技术。**PythonAnywhere**平台非常适用于在云上部署 Python 应用程序，并将在本章中进行讨论。本章还包含演示使用**容器**和**无服务器**技术的示例应用程序。

第八章，*异构计算*，探讨了为数值计算提供突破性性能的现代 GPU，但代价是增加了编程复杂性。事实上，GPU 的编程模型要求编码人员手动管理 CPU 和 GPU 之间的数据传输。本章将通过编程示例和用例教读者如何利用**PyCUDA**、**Numba**和**PyOpenCL**等强大的 Python 模块来利用 GPU 卡提供的计算能力。

第九章，*Python 调试和测试*，是介绍软件工程中两个重要主题：调试和测试的最后一章。特别地，将描述以下 Python 框架：用于调试的`winpdb-reborn`，以及用于软件测试的`unittest`和`nose`。

# 为了充分利用本书

本书是*独立的*：在开始阅读之前，唯一的基本要求是对编程的热情和对书中涵盖的主题的好奇心。

# 下载示例代码文件

您可以从您的帐户在[www.packt.com](http://www.packt.com)下载本书的示例代码文件。如果您在其他地方购买了本书，您可以访问[www.packtpub.com/support](https://www.packtpub.com/support)注册，直接将文件发送到您的邮箱。

您可以按照以下步骤下载代码文件：

1.  登录或注册[www.packtpub.com](http://www.packtpub.com/support)。

1.  选择“支持”选项卡。

1.  点击“代码下载”。

1.  在搜索框中输入书名，然后按照屏幕上的说明操作。

下载文件后，请确保使用最新版本的解压缩或提取文件夹：

+   Windows 的 WinRAR/7-Zip

+   Mac 的 Zipeg/iZip/UnRarX

+   Linux 的 7-Zip/PeaZip

该书的代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Python-Parallel-Programming-Cookbook-Second-Edition`](https://github.com/PacktPublishing/Python-Parallel-Programming-Cookbook-Second-Edition)。我们还有其他代码包，来自我们丰富的书籍和视频目录，可在**[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)**找到。快去看看吧！

# 下载彩色图像

我们还提供了一个 PDF 文件，其中包含本书中使用的屏幕截图/图表的彩色图像。您可以在这里下载：[`static.packt-cdn.com/downloads/9781789533736_ColorImages.pdf`](https://static.packt-cdn.com/downloads/9781789533736_ColorImages.pdf)。

# 使用的约定

本书中使用了许多文本约定。

`CodeInText`：指示文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄。以下是一个例子："可以使用`terminate`方法立即终止进程。"

代码块设置如下：

```py
import socket
port=60000
s =socket.socket()
host=socket.gethostname()
```

当我们希望引起您对代码块的特定部分的注意时，相关行或项目将以粗体显示：

```py
 p = multiprocessing.Process(target=foo)
 print ('Process before execution:', p, p.is_alive())
 p.start()
```

任何命令行输入或输出都以以下方式编写：

```py
> python server.py
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词会以这种方式出现在文本中。以下是一个例子："转到系统属性|环境变量|用户或系统变量|新建。"

警告或重要说明会出现在这样的地方。提示和技巧会出现在这样的地方。

# 章节

在本书中，您会经常看到几个标题（*准备工作*、*如何做…*、*它是如何工作的…*、*还有更多…*和*另请参阅*）。

为了清晰地说明如何完成食谱，请使用以下各节：

# 准备工作

这一部分告诉您在食谱中可以期待什么，并描述如何设置任何软件或食谱所需的任何初步设置。

# 如何做…

这一部分包含了遵循食谱所需的步骤。

# 它是如何工作的…

这一部分通常包括对前一部分发生的事情的详细解释。

# 还有更多…

这一部分包括有关食谱的额外信息，以使您对食谱更加了解。

# 另请参阅

这一部分为食谱提供了其他有用信息的链接。
