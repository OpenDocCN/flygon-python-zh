- en: 8\. Foundational Probability Concepts and Their Applications
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8. 基础概率概念及其应用
- en: Overview
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 概述
- en: By the end of this chapter, you will be familiar with basic and foundational
    concepts in probability theory. You'll learn how to use NumPy and SciPy modules
    to perform simulations and solve problems by calculating probabilities using simulations.
    This chapter also covers how to calculate the probabilities of events using simulations
    and theoretical probability distributions. Along with this, we'll conceptually
    define and use random variables included in the scipy.stats module. We will also
    understand the main characteristics of the normal distribution and calculate probabilities
    by computing the area under the curve of the probability distribution.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章结束时，您将熟悉概率论中的基本和基础概念。您将学习如何使用NumPy和SciPy模块进行模拟，并通过计算概率来解决问题。本章还涵盖了如何使用模拟计算事件的概率和理论概率分布。除此之外，我们还将概念化地定义和使用包含在scipy.stats模块中的随机变量。我们还将了解正态分布的主要特征，并通过计算概率分布曲线下的面积来计算概率。
- en: Introduction
  id: totrans-3
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: 'In the previous chapter, we learned how to perform the first steps in any statistical
    analysis. Given a business or scientific problem and a related dataset, we learned
    how to load the dataset and prepare it for analysis. Then, we learned how to calculate
    and use descriptive statistics to make sense of the variables. Finally, we performed
    EDA to complement the information we gathered from the descriptive statistics
    and gained a better understanding of the variables and their possible relationships.
    After getting a basic understanding of an analytical problem, you may need to
    go one step further and use more sophisticated quantitative tools, some of which
    are used in the following fields:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们学习了如何进行任何统计分析的第一步。给定一个业务或科学问题和相关数据集，我们学习了如何加载数据集并准备进行分析。然后，我们学习了如何计算和使用描述性统计来理解变量。最后，我们进行了探索性数据分析，以补充我们从描述性统计中收集到的信息，并更好地理解变量及其可能的关系。在对分析问题有了基本了解之后，您可能需要再进一步使用更复杂的定量工具，其中一些工具在以下领域中使用：
- en: Inferential statistics
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 推断统计学
- en: Machine learning
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 机器学习
- en: Prescriptive analytics
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 规范分析
- en: Optimization
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 优化
- en: 'What do all of these domains have in common? Many things: for example, they
    have a mathematical nature, they make heavy use of computational tools, and in
    one way or another they use **probability theory**, which is one of the most useful
    branches of applied mathematics and provides the foundation and tools for other
    disciplines, such as the ones mentioned previously.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些领域有什么共同点？很多：例如，它们具有数学性质，它们大量使用计算工具，并且它们以某种方式使用**概率论**，这是应用数学中最有用的分支之一，为其他学科提供了基础和工具，比如前面提到的学科。
- en: In this chapter, we'll give a very brief introduction to probability theory.
    Unlike traditional statistical books, in this chapter, we'll make heavy use of
    simulations to put the theoretical concepts into practice and make them more concrete.
    For this, we will make extensive use of NumPy's and SciPy's random number generation
    capabilities and we will learn how to use simulations to solve problems. After
    introducing the mandatory foundational concepts, we'll show you how to produce
    random numbers using NumPy and use these capabilities to calculate probabilities.
    After doing that, we'll define the concept of random variables.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将对概率论进行非常简要的介绍。与传统的统计书籍不同，在本章中，我们将大量使用模拟来将理论概念付诸实践，并使其更具体化。为此，我们将广泛使用NumPy和SciPy的随机数生成能力，并学习如何使用模拟来解决问题。在介绍了必要的基础概念之后，我们将向您展示如何使用NumPy生成随机数，并利用这些能力来计算概率。在这样做之后，我们将定义随机变量的概念。
- en: 'Later in this chapter, we''ll delve deeper into the two types of random variables:
    discrete and continuous, and for each type, we will learn how to create random
    variables with SciPy, as well as how to calculate exact probabilities with these distributions.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章后期，我们将更深入地探讨两种随机变量：离散和连续，并且对于每种类型，我们将学习如何使用SciPy创建随机变量，以及如何使用这些分布计算确切的概率。
- en: Randomness, Probability, and Random Variables
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 随机性、概率和随机变量
- en: This is a dense section, with many theoretical concepts to learn. Although it
    is heavy, you will finish this section with a very good grasp of some of the most
    basic and foundational concepts in probability theory. We will also introduce
    very useful methods you can use to perform simulations using NumPy so that you
    get to play around with some code. By using simulations, we hope to show you how
    the theoretical concepts translate into actual numbers and problems that can be
    solved with these tools. Finally, we will define **random variables** and **probability
    distribution**, two of the most important concepts to know about when using statistics
    to solve problems in the real world.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个密集的部分，有许多理论概念需要学习。虽然很沉重，但你将以对概率论中一些最基本和基础概念非常好的掌握完成这一部分。我们还将介绍非常有用的方法，您可以使用NumPy进行模拟，以便您可以使用一些代码进行操作。通过使用模拟，我们希望向您展示理论概念如何转化为实际数字和可以用这些工具解决的问题。最后，我们将定义**随机变量**和**概率分布**，这是在使用统计学解决现实世界问题时需要了解的两个最重要的概念之一。
- en: Randomness and Probability
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 随机性和概率
- en: We all have an intuitive idea of the concept of randomness and use the term
    in everyday life. Randomness means that certain events happen unpredictably or
    without a pattern.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 我们都对随机性的概念有直观的了解，并在日常生活中使用这个术语。随机性意味着某些事件以不可预测或无规律的方式发生。
- en: One paradoxical fact about random events is that although individual random
    events are, by definition, unpredictable, when considering many such events, it
    is possible to predict certain results with very high confidence. For instance,
    when flipping a coin *once*, we cannot know which of the two possible outcomes
    we will see (heads or tails). On the other hand, when flipping a coin *1,000*
    times, we can be almost sure that we will get between 450 and 550 heads.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 关于随机事件的一个悖论事实是，尽管个别随机事件根据定义是不可预测的，但在考虑许多这样的事件时，可以以非常高的信心预测某些结果。例如，当*一次*抛硬币时，我们无法知道我们将看到两种可能结果中的哪一个（正面或反面）。另一方面，当抛硬币*1,000*次时，我们几乎可以肯定我们会得到450到550个正面。
- en: 'How do we go from individually unpredictable events to being able to predict
    something meaningful about a collection of them? The key is probability theory,
    the branch of mathematics that formalizes the study of randomness and the calculation
    of the likelihood of certain outcomes. Probability can be understood as a measure
    of uncertainty, and probability theory gives us the mathematical tools to understand
    and analyze uncertain events. That''s why probability theory is so useful as a
    decision-making tool: by rigorously and logically analyzing uncertain events,
    we can reach better decisions, despite the uncertainty.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 我们如何从个别不可预测的事件转变为能够预测一系列事件的有意义结果？关键在于概率论，这是数学的一个分支，形式化了对随机性的研究和对某些结果可能性的计算。概率可以被理解为不确定性的度量，概率论给了我们理解和分析不确定事件的数学工具。这就是为什么概率论作为决策工具如此有用：通过严谨和逻辑地分析不确定事件，我们可以做出更好的决策，尽管存在不确定性。
- en: Uncertainty can come from either ignorance or pure randomness, in such a way
    that flipping a coin is not a truly random process if you know the mass of the
    coin, the exact position of your fingers, the exact force applied when throwing
    it, the exact gravitational pull, and so on. With this information, you could,
    in principle, predict the outcome, but in practice, we don't know all these variables
    or the equations to actually make an exact prediction. Another example could be
    the outcome of a football (soccer) game, the results of a presidential election,
    or if it's going to rain one week from now.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 不确定性可能来自无知或纯粹的随机性，以至于抛硬币并不是一个真正的随机过程，如果你知道硬币的质量、手指的确切位置、投掷时施加的确切力量、确切的重力吸引力等等。有了这些信息，你原则上可以预测结果，但在实践中，我们不知道所有这些变量或者实际上做出确切预测的方程。另一个例子可能是足球比赛的结果、总统选举的结果，或者一周后是否会下雨。
- en: Given our ignorance about what will happen in the future, assigning a probability
    is what we can do to come up with a *best guess*.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于我们对未来发生的事情一无所知，分配概率是我们能够做出*最佳猜测*的方法。
- en: Probability theory is also a big business. Entire industries, such as lotteries,
    gambling, and insurance, have been built around the laws of probability and how
    to monetize the predictions we can make from them. The casino does not know if
    the person playing roulette will win in the next game, but because of probability
    laws, the casino owner is completely sure that roulette is a profitable game.
    The insurance company does not know if a customer will have a car crash tomorrow,
    but they're sure that having enough car insurance costumers paying their premiums
    is a profitable business.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 概率论也是一个大生意。整个行业，如彩票、赌博和保险，都是建立在概率法则和如何从中获利的基础上的。赌场不知道玩轮盘的人在下一局会赢，但由于概率法则，赌场老板完全确定轮盘是一款盈利的游戏。保险公司不知道客户明天是否会发生车祸，但他们确信有足够的汽车保险客户支付保费是一项盈利的业务。
- en: Although the following section will feel a bit theoretical, it is necessary
    to get to know the most important concepts before we can use them to solve analytical
    problems.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管下一节会感觉有点理论性，但在我们能够用它们解决分析问题之前，有必要了解最重要的概念。
- en: Foundational Probability Concepts
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 基础概率概念
- en: We will start with the basic terminology that you will find on most treatments
    of this subject. We must learn these concepts in order to be able to solve problems
    rigorously and to communicate our results in a technically correct fashion.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从大多数这一主题的处理中找到的基本术语开始。我们必须学习这些概念，以便能够严格解决问题，并以技术上正确的方式传达我们的结果。
- en: 'We will start with the notion of an **experiment**: a situation that happens
    under controlled conditions and from which we get an observation. The result we
    observe is called the **outcome** of the experiment. The following table presents
    some examples of experiments, along with some possible outcomes:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从**实验**的概念开始：在受控条件下发生的情况，我们从中得到一个观察。我们观察到的结果称为实验的**结果**。以下表格呈现了一些实验的示例，以及一些可能的结果：
- en: '![Figure 8.1: Example experiments and outcomes'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.1：示例实验和结果'
- en: '](image/B15968_08_01.jpg)'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_01.jpg)'
- en: 'Figure 8.1: Example experiments and outcomes'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.1：示例实验和结果
- en: 'The **sample space** of the experiment consists of the *mathematical set* of
    all possible outcomes. Finally, an **event** is any subset of the sample space.
    Each element of the sample space is called a **simple event** because it consists
    of a single element. We now have four terms that are related to each other and
    that are essential to probability theory: experiment, sample space, event, and
    outcome. To continue with our examples from the previous table, the following
    table presents the sample space and examples of events for the experiments:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 实验的**样本空间**包括所有可能结果的*数学集*。最后，**事件**是样本空间的任何子集。样本空间的每个元素称为**简单事件**，因为它由单个元素组成。现在我们有了四个相互关联且对概率论至关重要的术语：实验、样本空间、事件和结果。继续使用前表中的示例，以下表格呈现了实验的样本空间和事件的示例：
- en: '![Figure 8.2: Example experiments, sample spaces, and events'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.2：示例实验、样本空间和事件'
- en: '](image/B15968_08_02.jpg)'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_02.jpg)'
- en: 'Figure 8.2: Example experiments, sample spaces, and events'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.2：示例实验、样本空间和事件
- en: Note
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Please note that the details in the preceding table are assuming a maximum of
    1 transaction per minute is happening.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，上表中的细节假设每分钟最多进行1笔交易。
- en: It is worth noting that we defined the sample space as a *set* in the mathematical
    sense. Therefore, we can use all the mathematical operations we know from set
    theory, including getting subsets (which are events). As events are subsets of
    a larger set, they are sets themselves, and we can use unions, intersections,
    and so on. The conventional notation for events is to use uppercase letters such
    as A, B, and C.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 值得注意的是，我们将样本空间定义为数学意义上的*集合*。因此，我们可以使用从集合论中知道的所有数学运算，包括获取子集（即事件）。由于事件是较大集合的子集，它们本身也是集合，因此我们可以使用并集、交集等。事件的常规表示法是使用大写字母，如A、B和C。
- en: We say that an event has happened when the outcome of the experiment belongs
    to the event. For example, in the experiment *tossing a die*, if we are interested
    in the event *getting an odd number* and we observe any of the outcomes, that
    is, 1, 3, or 5, then we can say that the event has happened.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 当实验的结果属于事件时，我们说事件发生了。例如，在实验*掷骰子*中，如果我们对事件*得到奇数*感兴趣，并且观察到任何结果，即1、3或5，那么我们可以说事件发生了。
- en: When performing a random experiment, we don't know which outcome we are going
    to get. What we do in probability theory is assign a number to all the possible
    events related to an experiment. This number is what we know as the *probability*
    of an event.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行随机实验时，我们不知道会得到哪个结果。在概率理论中，我们为与实验相关的所有可能事件分配一个数字。这个数字就是我们所知道的事件的*概率*。
- en: 'How do we assign probabilities to events? There are a couple of alternatives.
    However, regardless of the method we use to assign probabilities to events, the
    theory of probability and its results hold if our way of assigning probabilities
    to events fulfills the following four conditions. Given events *A* and *B* and
    their probabilities, denoted as *P(A)* and *P(B)*:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 我们如何为事件分配概率？有几种选择。但是，无论我们使用哪种方法为事件分配概率，只要我们为事件分配概率的方式满足以下四个条件，概率理论及其结果就成立。给定事件*A*和*B*及其概率，表示为*P(A)*和*P(B)*：
- en: '![a](image/B15968_08_InlineEquation1.png): The probability of an event is always
    a number between 0 and 1\. The closer to 1, the more likely the event will occur.
    The extremes are 0 for an event that can''t occur and 1 for an event that will
    certainly occur.'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '![a](image/B15968_08_InlineEquation1.png)：事件的概率始终是0到1之间的数字。越接近1，事件发生的可能性就越大。极端情况下，事件无法发生为0，事件一定会发生为1。'
- en: '![b](image/B15968_08_InlineEquation2.png): If A is the empty set, then the
    probability must be 0\. For instance, for the experiment *tossing a die*, the
    event *getting a number greater than 10* does not exist, hence this is the empty
    set and its probability is 0.'
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '![b](image/B15968_08_InlineEquation2.png)：如果A是空集，则概率必须为0。例如，对于实验*掷骰子*，事件*得到大于10的数字*不存在，因此这是空集，其概率为0。'
- en: '![c](image/B15968_08_InlineEquation3.png): This basically says that when performing
    an experiment, some outcome must occur for sure.'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '![c](image/B15968_08_InlineEquation3.png)：这基本上表示进行实验时，一定会发生某种结果。'
- en: '![d](image/B15968_08_InlineEquation4.png) for disjoint events A and B: If we
    have a collection of non-overlapping events, A and B, then the probability the
    event (A U B), also known as *A or B*, can be obtained by adding the individual
    probabilities. These rules also apply for more than two events.'
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '![d](image/B15968_08_InlineEquation4.png)对于不相交的事件A和B：如果我们有一组不重叠的事件A和B，则事件(A
    U B)，也称为*A或B*，的概率可以通过添加各自的概率来获得。这些规则也适用于两个以上的事件。'
- en: This subsection has been heavy in terms of concepts and theory, but it is important
    to understand these now, in order to avoid mistakes later. Fortunately, we have
    Python and NumPy with their great numerical capabilities that will help us put
    this theory into practice.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 在概念和理论方面，本小节内容较多，但现在理解这些内容很重要，以避免以后出现错误。幸运的是，我们有Python和NumPy以及它们出色的数值能力，将帮助我们将这些理论付诸实践。
- en: Note
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: 'A quick note on all the exercises and related test scripts: If you are using
    a CLI (such as Windows'' Command Prompt or Mac''s Terminal) to run the test scripts,
    it will throw an error, such as `Implement enable_gui in a subclass`. This is
    something to do with some of the commands being used in the notebooks (such as
    `%matplotlib` inline). So, if you want to run the test scripts, please use the
    IPython shell. The code for the exercises in this book is best run on Jupyter
    Notebooks.'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 关于所有练习和相关测试脚本的快速说明：如果您正在使用CLI（如Windows的命令提示符或Mac的终端）运行测试脚本，它会抛出错误，比如`在子类中实现enable_gui`。这与笔记本中使用的一些命令有关（如`％matplotlib`
    inline）。因此，如果您想运行测试脚本，请使用IPython shell。本书中的练习代码最好在Jupyter笔记本上运行。
- en: Introduction to Simulations with NumPy
  id: totrans-45
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用NumPy进行模拟的介绍
- en: 'To start putting all this theory into practice, let''s begin by loading the
    libraries we will use in this chapter:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始将所有这些理论付诸实践，让我们从加载本章中将使用的库开始：
- en: '[PRE0]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: We will make extensive use of NumPy's random number generation capabilities.
    We will use the random module (`np.random`), which is able to generate random
    numbers that follow many of the most important probability distributions (more
    on probability distributions later).
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将广泛使用NumPy的随机数生成能力。我们将使用`np.random`模块，它能够生成遵循许多最重要的概率分布的随机数（稍后详细介绍概率分布）。
- en: 'Let''s begin by simulating a random experiment: *tossing a regular die*.'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始模拟一个随机实验：*掷一个普通骰子*。
- en: 'Let''s learn how to perform this experiment using NumPy. There are different
    ways to do this. We''ll use the function `randint` from the `random` module, which
    generates random integers between `low` (inclusive) and `high` (exclusive) arguments.
    Since we want to generate numbers between 1 and 6, our function will look like
    this:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们学习如何使用NumPy执行这个实验。有不同的方法可以做到这一点。我们将使用`random`模块中的`randint`函数，该函数生成`low`（包括）和`high`（不包括）参数之间的随机整数。由于我们想生成1到6之间的数字，我们的函数将如下所示：
- en: '[PRE1]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Let''s use our function ten times in a row to observe how it works:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们连续十次使用我们的函数来观察它的工作方式：
- en: '[PRE2]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The following is an example output:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个示例输出：
- en: '[PRE3]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Since these numbers are randomly generated, you will most likely get different values.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这些数字是随机生成的，你很可能会得到不同的值。
- en: For this function and almost every other function that produces random numbers
    (or some other random result), it is sometimes necessary to generate random numbers
    in such a way that anyone running the code at any moment obtains the same results.
    For that, we need to use a `seed`.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个函数和几乎每个产生随机数（或其他随机结果）的函数，有时需要以任何时刻运行代码的人都能获得相同结果的方式生成随机数。为此，我们需要使用“种子”。
- en: 'Let''s add a line that creates the seed and then use our function ten times
    in a row to observe how it works:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们添加一行代码来创建种子，然后连续十次使用我们的函数来观察它的工作方式：
- en: '[PRE4]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The result is as follows:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE5]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: As long as you run the first line containing the number 123 inside the seed
    function, anyone running this code (with the same NumPy version) will get the
    same output numbers.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 只要运行包含种子函数内部的数字123的第一行，任何运行此代码的人（使用相同的NumPy版本）都将获得相同的输出数字。
- en: 'Another useful function from the `numpy.random` module is `np.random.choice`,
    which can sample elements from a vector. Say we have a class of 30 students, and
    we would like to randomly chose four of them. First, we generate the fictional
    student list:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '`numpy.random`模块中另一个有用的函数是`np.random.choice`，它可以从向量中抽样元素。假设我们有一个由30名学生组成的班级，我们想随机选择其中的四个。首先，我们生成虚构的学生名单：'
- en: '[PRE6]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Now, can use `np.random.choice` to randomly select four of them:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，可以使用`np.random.choice`来随机选择其中四个：
- en: '[PRE7]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The following is the output:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出：
- en: '[PRE8]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: The `replace=False` argument ensures that once an element has been chosen, it
    can't be selected again. This is called **sampling without replacement**.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '`replace=False`参数确保一旦选择了一个元素，就不能再次选择它。这被称为**无重复抽样**。'
- en: 'In contrast, **sampling with replacement** means that all the elements of the
    vector are considered when producing each sample. Imagine that all the elements
    of the vector are in a bag. We randomly pick one element for each sample and then
    put the element we got in the bag before drawing the next sample. An application
    of this could be as follows: say that we will give a surprise quiz to one student
    of the group, every week for 12 weeks. All the students are subjects who may be
    given the quiz, even if that student was selected in a previous week. For this,
    we could use `replace=True`, like so:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，**带替换**抽样意味着在产生每个样本时考虑向量的所有元素。想象一下，向量的所有元素都在一个袋子里。我们每次随机抽取一个元素作为样本，然后在抽取下一个样本之前将我们得到的元素放回袋子里。这样的应用可能是：假设我们将在12周内每周给小组中的一个学生出一次突击测验。所有学生都是可能被给予测验的对象，即使该学生在之前的周被选中过。为此，我们可以使用`replace=True`，如下所示：
- en: '[PRE9]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'The result is as follows:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE10]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: As you can see, poor student 6 was chosen on weeks 1 and 10, and student 30
    on 6 and 8.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所看到的，可怜的学生6在第1周和第10周被选中，学生30在第6周和第8周被选中。
- en: Now that we know how to use NumPy to generate dice outcomes and get samples
    (with or without replacement), we can use it to practice probability.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们知道如何使用NumPy生成骰子结果和获取样本（带或不带替换），我们可以用它来练习概率。
- en: 'Exercise 8.01: Sampling with and without Replacement'
  id: totrans-76
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习8.01：带和不带替换的抽样
- en: 'In this exercise, we will use `random.choice` to produce random samples with
    and without replacement. Follow these steps to complete this exercise:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将使用`random.choice`来产生带和不带替换的随机样本。按照以下步骤完成这个练习：
- en: 'Import the NumPy library:'
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入NumPy库：
- en: '[PRE11]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Create two lists containing four different suits and 13 different ranks in
    the set of standard cards:'
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建两个包含四种不同花色和13种不同等级的标准牌组的列表：
- en: '[PRE12]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Create a list, named `cards`, containing the 52 cards of the standard deck:'
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`cards`的列表，其中包含标准牌组的52张牌：
- en: '[PRE13]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Use the `np.random.choice` function to draw a hand (five cards) from the deck.
    Use `replace=False` so that each card gets selected only once:'
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`np.random.choice`函数从牌组中抽取一手（五张牌）。使用`replace=False`，以便每张牌只被选择一次：
- en: '[PRE14]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'The result should look something like this (you might get different cards):'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 结果应该看起来像这样（你可能会得到不同的卡片）：
- en: '[PRE15]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Now, create a function named `deal_hands` that returns two lists, each with
    five cards drawn from the same deck. Use `replace=False` in the `np.random.choice`
    function. This function will perform sampling *without* replacement:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，创建一个名为`deal_hands`的函数，返回两个列表，每个列表中都有五张牌，从同一副牌中抽取。在`np.random.choice`函数中使用`replace=False`。这个函数将执行*无*替换的抽样：
- en: '[PRE16]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'To print the output, run the function like so:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 要打印输出，请这样运行函数：
- en: '[PRE17]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'You should get something like this:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该得到类似这样的结果：
- en: '[PRE18]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Create a second function called `deal_hands2` that''s identical to the last
    one, but with the `replace=True` argument in the `np.random.choice` function.
    This function will perform sampling *with* replacement:'
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`deal_hands2`的第二个函数，它与上一个函数相同，但在`np.random.choice`函数中使用了`replace=True`参数。这个函数将执行*带*替换的抽样：
- en: '[PRE19]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Finally, run the following code:'
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，运行以下代码：
- en: '[PRE20]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'The result is as follows:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE21]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: As you can see, by allowing sampling *with replacement*, the `Jack-hearts` card
    was drawn in both hands, meaning that when each card was sampled, all 52 were considered.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所看到的，通过允许*带替换*抽样，`Jack-hearts`牌在两手中都被抽中，这意味着在抽取每张牌时，考虑了所有52张牌。
- en: In this exercise, we practiced the concept of sampling with and without replacement
    and learned how to apply it using the `np.random.choice` function.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们练习了带和不带替换的抽样的概念，并学会了如何使用`np.random.choice`函数应用它。
- en: Note
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To access the source code for this specific section, please refer to [https://packt.live/2Zs7RuY](https://packt.live/2Zs7RuY).
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问此特定部分的源代码，请参考[https://packt.live/2Zs7RuY](https://packt.live/2Zs7RuY)。
- en: You can also run this example online at [https://packt.live/2Bm7A4Y](https://packt.live/2Bm7A4Y).
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以在[https://packt.live/2Bm7A4Y](https://packt.live/2Bm7A4Y)上在线运行这个示例。
- en: Probability as a Relative Frequency
  id: totrans-105
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 概率作为相对频率
- en: 'Let''s return to the question of the conceptual section: how do we assign probabilities
    to events? Under the *relative frequency* approach, what we do is repeat an experiment
    a large number of times and then define the probability of an event as the *relative
    frequency it has occurred*, that is, how many times we observed the event happening,
    divided by the number of times we performed the experiment:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回到概念部分的问题：我们如何为事件分配概率？在*相对频率*方法下，我们所做的是重复进行实验很多次，然后将事件的概率定义为*它发生的相对频率*，也就是我们观察到事件发生的次数除以我们进行实验的次数：
- en: '![Figure 8.3: Formula to calculate the probability'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.3：计算概率的公式'
- en: '](image/B15968_08_03.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_03.jpg)'
- en: 'Figure 8.3: Formula to calculate the probability'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.3：计算概率的公式
- en: 'Let''s look into this concept with a practical example. First, we will perform
    the experiment of tossing a die 1 million times:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们用一个实际的例子来了解这个概念。首先，我们将进行100万次掷骰子的实验：
- en: '[PRE22]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'We can get the first 10 values from the array:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以从数组中获取前10个值：
- en: '[PRE23]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'This look like this:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 看起来是这样的：
- en: '[PRE24]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Remember that the sample space of this experiment is S = {1, 2, 3, 4, 5, 6}.
    Let''s define some events and assign them probabilities using the relative frequency
    method. First, let''s use a couple of simple events:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 记住这个实验的样本空间是S = {1, 2, 3, 4, 5, 6}。让我们使用相对频率方法定义一些事件并为它们分配概率。首先，让我们使用一些简单的事件：
- en: '`A`: Observing the number 2'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`A`：观察到数字2'
- en: '`B`: Observing the number 6'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`B`：观察到数字6'
- en: 'We can use the vectorization capabilities of NumPy and count the number of
    *simple events* happening by summing the Boolean vector we get from performing
    the comparison operation:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以利用NumPy的向量化能力，通过对比操作得到的布尔向量求和来计算发生*简单事件*的次数：
- en: '[PRE25]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'The result is as follows:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE26]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'Following the exact same procedure, we can calculate the probability for event
    `B`:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 按照完全相同的程序，我们可以计算事件`B`的概率：
- en: '[PRE27]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'The result is as follows:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE28]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'Now, we will try with a couple of compounded events (they have more than one
    possible outcome):'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将尝试一些复合事件（它们有多个可能的结果）：
- en: '`C`: Observing an odd number (or {1, 3, 5})'
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`C`：观察到奇数（或{1, 3, 5}）'
- en: '`D`: Observing a number less than 5 (or {1, 2, 3, 4})'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`D`：观察到小于5的数字（或{1, 2, 3, 4}）'
- en: 'Because the event *observing an odd number* will occur if we get a 1 *or* 3
    *or* 5, we can translate the *or* that we use in our spoken language into the
    mathematical `OR` operator. In Python, this is the `|` operator:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 因为事件*观察到奇数*将在我们得到1 *或* 3 *或* 5时发生，我们可以将我们在口语中使用的*或*翻译成数学中的`OR`运算符。在Python中，这是`|`运算符：
- en: '[PRE29]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'The result is as follows:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE30]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Finally, let''s calculate the probability of `D`:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，让我们计算`D`的概率：
- en: '[PRE31]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'We get the following value:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下值：
- en: '[PRE32]'
  id: totrans-137
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'Here, we have used the relative frequency approach to calculate the probability
    of the following events:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们使用了相对频率方法来计算以下事件的概率：
- en: '`A`: Observing the number 2: 0.16595'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`A`：观察到数字2：0.16595'
- en: '`B`: Observing the number 6: 0.166809'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`B`：观察到数字6：0.166809'
- en: '`C`: Observing an odd number: 0.501162'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`C`：观察到奇数：0.501162'
- en: '`D`: Observing a number less than 5: 0.666004'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`D`：观察到小于5的数字：0.666004'
- en: In summary, under the relative frequency approach, when we have a set of outcomes
    from repeated experiments, what we do to calculate the probability of an event
    is count how many times the event has happened and divide that count by the total
    number of experiments. As simple as that.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 总之，在相对频率方法下，当我们有一组来自重复实验的结果时，我们用来计算事件概率的方法是计算事件发生的次数，然后将该次数除以总实验次数。就是这么简单。
- en: In other cases, the assignments of probabilities can arise based on a definition.
    This is what we may call **theoretical probability**. For instance, a *fair* coin,
    *by definition*, has an equal probability of showing either of the two outcomes,
    say, heads or tails. Since there are only two outcomes for this experiment {heads,
    tails} and the probabilities must add up to 1, each simple event must have a 0.5
    probability of occurring.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 在其他情况下，概率的分配可能基于定义而产生。这就是我们可能称之为**理论概率**的东西。例如，*按定义*，一个*公平*硬币有相等的概率显示两种结果中的任何一种，比如正面或反面。由于这个实验只有两种结果{正面，反面}，并且概率必须加起来等于1，每个简单事件必须有0.5的发生概率。
- en: 'Another example is as follows: a *fair* die is one where the six numbers have
    the same probability of occurring, so the probability of tossing any number must
    be equal to *1/6 = 0.1666666*. In fact, the default behavior of the `numpy.randint`
    function is to simulate the chosen integer numbers, each with the same probability
    of coming out.'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个例子如下：*公平*骰子是指六个数字具有相同的发生概率，因此投掷任何数字的概率必须等于*1/6 = 0.1666666*。事实上，`numpy.randint`函数的默认行为是模拟选择的整数数字，每个数字出现的概率相同。
- en: 'Using the theoretical definition, and knowing that we have simulated a *fair*
    die with NumPy, we can arrive at the probabilities for the events we presented
    previously:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 使用理论定义，并知道我们用NumPy模拟了一个*公平*骰子，我们可以得出我们之前提到的事件的概率：
- en: '`A`: Observing the number 2, P(A) = 1/6 = 0.1666666'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`A`：观察到数字2，P(A) = 1/6 = 0.1666666'
- en: '`B`: Observing the number 6, P(B) = 1/6 = 0.1666666'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`B`：观察到数字6，P(B) = 1/6 = 0.1666666'
- en: '`C`: Observing an odd number: P(observing 1 *or* observing 3 *or* observing
    5) = P(observing 1) + or P(observing 3) + P(observing 5) = 1/6 + 1/6 + 1/6 = 3/6
    = 0.5'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`C`：观察到奇数：P(观察到1 *或* 观察到3 *或* 观察到5) = P(观察到1) + 或 P(观察到3) + P(观察到5) = 1/6 +
    1/6 + 1/6 = 3/6 = 0.5'
- en: '`D`: Observing a number less than 5: P(observing 1 *or* observing 2 *or* observing
    3 *or* observing 4) = P(observing 1) + or P(observing 2) + P(observing 3) + P(observing
    4) = 1/6 + 1/6 + 1/6 + 1/6 = 4/6 = 0.666666'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`D`：观察到小于5的数字：P(观察到1 *或* 观察到2 *或* 观察到3 *或* 观察到4) = P(观察到1) + 或 P(观察到2) + P(观察到3)
    + P(观察到4) = 1/6 + 1/6 + 1/6 + 1/6 = 4/6 = 0.666666'
- en: 'Notice two things here:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 注意这里有两件事：
- en: These numbers are surprisingly (or unsurprisingly, if you already knew this)
    close to the results we obtained by using the relative frequency approach.
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这些数字令人惊讶（或者如果你已经知道这个结果，那就不足为奇了）地接近我们用相对频率方法得到的结果。
- en: We could decompose the sum of `C` and `D` because of rule 4 of the *Foundational
    Probability Concepts* section.
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以根据*基本概率概念*部分的规则4来分解`C`和`D`的和。
- en: Defining Random Variables
  id: totrans-154
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 定义随机变量
- en: 'Often, you will find quantities whose values are (or seem to be) the result
    of a random process. Here are some examples:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，您会发现其值是（或似乎是）随机过程的结果的数量。以下是一些例子：
- en: The sum of the outcome of two dice
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两个骰子的结果的和
- en: The number of heads when throwing ten coins
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 掷十枚硬币时出现的正面数
- en: The price of the stock of IBM one week from now
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IBM股票一周后的价格
- en: The number of visitors to a website
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个网站的访问者数量
- en: The number of calories ingested in a day by a person
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个人一天摄入的卡路里数量
- en: 'All of these are examples of quantities that can vary, which means they are
    *variables*. In addition, since the value they take depends partially or entirely
    on randomness, we call them *random variables*: quantities whose values are determined
    by a random process. The typical notation for random variables is uppercase letters
    at the end of the alphabet, such as *X*, *Y*, and *Z*. The corresponding lowercase
    letter is used to refer to the values they take. For instance, if *X* is *the
    sum of the outcomes of two dice*, here are some examples of how to read the notation:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些都是可以变化的数量的例子，这意味着它们是*变量*。此外，由于它们的值部分或完全取决于随机性，我们称它们为*随机变量*：其值由随机过程确定的数量。随机变量的典型表示法是大写字母，如*X*、*Y*和*Z*。相应的小写字母用于指代它们的值。例如，如果*X*是*两个骰子的结果的和*，以下是一些如何阅读符号的示例：
- en: '*P(X = 10)*: Probability of *X* taking the number 10'
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*P(X = 10)*：*X*取值为10的概率'
- en: '*P(X > 5)*: Probability of *X* taking a value greater than 5'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*P(X > 5)*：*X*取大于5的值的概率'
- en: '*P(X = x)*: Probability of *X* taking the value *x* (when we are making a general statement)'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*P(X = x)*：*X*取值为*x*的概率（当我们在做一般性陈述时）'
- en: 'Since *X* is the sum of two numbers from two dice, *X* can take the following
    values: {2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12}. Using what we learned in the previous
    section, we can simulate a large number of values for our random variable, *X*,
    like this:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 由于*X*是两个骰子的和，*X*可以取以下值：{2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12}。根据我们在上一节学到的知识，我们可以这样模拟我们的随机变量*X*的大量值：
- en: '[PRE33]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'We have simulated 100,000 die tosses for two dice and got the respective values
    for *X*. These are the first values for our vectors:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经模拟了两个骰子投掷了100,000次，并得到了*X*的相应值。这些是我们向量的第一个值：
- en: '[PRE34]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'The result is as follows:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE35]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: So, in the first simulated roll, we got `6` on the first die and `1` on the
    second, so the first value of *X* is `7`.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，在第一次模拟的投掷中，我们在第一个骰子上得到了`6`，在第二个骰子上得到了`1`，所以*X*的第一个值是`7`。
- en: 'Just as with experiments, we can define events over random variables and calculate
    the respective probabilities of those events. For instance, we can use the relative
    frequency definition to calculate the probability of the following events:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 就像实验一样，我们可以定义随机变量上的事件，并计算这些事件的相应概率。例如，我们可以使用相对频率定义来计算以下事件的概率：
- en: '*X = 10*: Probability of *X* taking the number 10'
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*X = 10*：*X*取值为10的概率'
- en: '*X > 5*: Probability of *X* taking a value greater than 5'
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*X > 5*：*X*取大于5的值的概率'
- en: 'The calculations to get the probabilities of those events are essentially the
    same as the ones we did previously:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 计算这些事件的概率的计算基本上与我们之前所做的相同：
- en: '[PRE36]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'The result is as follows:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE37]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'And for the second event, we have the following:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 对于第二个事件，我们有以下内容：
- en: '[PRE38]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'The result is as follows:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE39]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'We can use a bar plot to visualize the number of times each of the possible
    values has appeared in our simulation. This will allow us to get to know our random
    variable better:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用条形图来可视化我们的模拟中每个可能值出现的次数。这将帮助我们更好地了解我们的随机变量：
- en: '[PRE40]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'The plot that''s generated is as follows:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 生成的图表如下：
- en: '![Figure 8.4: Frequencies of the values of X'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.4：X的值的频率'
- en: '](image/B15968_08_04.jpg)'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_04.jpg)'
- en: 'Figure 8.4: Frequencies of the values of X'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.4：X的值的频率
- en: We can see out of the 100,000 of *X*, it took the value 3 around 5,800 times
    and the value 6 a little less than 14,000 times, which is also very close to the
    number of times the value 8 appeared. We can also observe that the most common
    outcome was the number 7\.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到，在100,000次*X*中，它大约5800次取到了值3，大约14000次取到了值6，这也非常接近值8出现的次数。我们还可以观察到最常见的结果是数字7。
- en: 'Following the relative frequency definition of probability, if we divide the
    frequencies by the number of values of *X*, we can get the probability of observing
    each of the values of *X*:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 根据概率的相对频率定义，如果我们将频率除以*X*的值的数量，我们可以得到观察到*X*的每个值的概率：
- en: '[PRE41]'
  id: totrans-191
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: 'This gives us the following plot:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 这给我们带来了以下的图表：
- en: '![Figure 8.5: Probability distribution of the values of X'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.5：X的值的概率分布'
- en: '](image/B15968_08_05.jpg)'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_05.jpg)'
- en: 'Figure 8.5: Probability distribution of the values of X'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.5：X的值的概率分布
- en: 'The plot looks almost exactly like the last one, but in this case, we can see
    the probabilities of observing all the possible values of *X*. This is what we
    call the *probability distribution* (or simply the distribution) of a random variable:
    the probabilities of observing each of the values the random variable can take.'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 这个图看起来几乎和上一个一样，但在这种情况下，我们可以看到观察到*X*的所有可能值的概率。这就是我们所说的随机变量的*概率分布*（或简称分布）：观察到随机变量可以取的每个值的概率。
- en: 'Let''s illustrate both concepts, random variables and probability distribution,
    with another example. First, we''ll define the random variable:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们用另一个例子来说明随机变量和概率分布这两个概念。首先，我们来定义随机变量：
- en: '*Y: Number of heads when tossing 10 fair coins.*'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: '*Y: 投掷10枚公平硬币时出现的正面数。*'
- en: 'Now, our task is to estimate the probability distribution. We know that this
    random variable can take 11 possible values: {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10}.
    For each of these values, there is a corresponding probability that the *Y* variable
    will take that value. Intuitively, we know that it is very unlikely to observe
    extreme values of the variable: getting 10 heads (*Y=10*) or 10 tails (*Y=0*)
    is very unlikely. We also expect the *Y* variable to take values such as 4, 5,
    and 6 most of the time. We can calculate the probability distribution to validate
    our intuition.'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们的任务是估计概率分布。我们知道这个随机变量可以取11个可能的值：{0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10}。对于这些值中的每一个，都有一个相应的概率，使得*Y*变量取得该值。直觉上，我们知道观察到变量的极端值是非常不可能的：得到10个正面（*Y=10*）或10个反面（*Y=0*）是非常不可能的。我们也期望*Y*变量大部分时间取得4、5和6这样的值。我们可以计算概率分布来验证我们的直觉。
- en: 'Once again, let''s simulate the experiment of tossing 10 coins. From there,
    we can observe the values of this random variable. Let''s begin by simulating
    tossing 10 fair coins 1 million times:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，让我们模拟抛10枚硬币的实验。然后，我们可以观察这个随机变量的值。让我们开始模拟1百万次抛10枚公平硬币：
- en: '[PRE42]'
  id: totrans-201
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'The preceding code will produce a matrix of 1,000,000 x 10, with each row representing
    the experiment of tossing 10 coins. We can consider 0s as tails and 1s as heads.
    Here, we have the first 12 rows:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的代码将产生一个1,000,000 x 10的矩阵，每一行代表抛10枚硬币的实验。我们可以将0视为反面，1视为正面。这里是前12行：
- en: '[PRE43]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'The result is as follows:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE44]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'To produce the different values of *Y*, we need to add every row, like so:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 为了产生不同的*Y*值，我们需要将每一行相加，如下所示：
- en: '[PRE45]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'Now, we can use the former calculated object (`Y`) to calculate probabilities
    of certain events, for instance, the probability of obtaining zero heads:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们可以使用之前计算的对象（`Y`）来计算某些事件的概率，例如获得零个正面的概率：
- en: '[PRE46]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'The output is as follows:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '[PRE47]'
  id: totrans-211
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'This is a very small number and is consistent with our intuition: it is very
    unlikely to get 10 tails. In fact, that only happened 986 times in 1 million experiments.'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个非常小的数字，与我们的直觉一致：得到10个反面的可能性非常小。实际上，在100万次实验中只发生了986次。
- en: 'Just as we did previously, we can plot the probability distribution of *Y*:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 就像之前一样，我们可以绘制*Y*的概率分布：
- en: '[PRE48]'
  id: totrans-214
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'This is the output:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 这是输出：
- en: '![Figure 8.6: Probability distribution of Y'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.6：Y的概率分布'
- en: '](image/B15968_08_06.jpg)'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_06.jpg)'
- en: 'Figure 8.6: Probability distribution of Y'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.6：Y的概率分布
- en: 'The probability of getting 5 heads is around 0.25, so around 25% of the time,
    we could expect to get 5 heads. The chance of getting 4 or 6 heads is also relatively
    high. What is the probability of getting 4, 5, or 6 heads? We can easily calculate
    this using `Prob_of_Y_values` by adding the respective probabilities of getting
    4, 5, or 6 heads:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 得到5个正面的概率约为0.25，所以大约25%的时间，我们可以期望得到5个正面。得到4或6个正面的机会也相对较高。得到4、5或6个正面的概率是多少？我们可以通过使用`Prob_of_Y_values`来轻松计算，通过添加得到4、5或6个正面的相应概率：
- en: '[PRE49]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'The result is as follows:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE50]'
  id: totrans-222
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: So, around 2/3 (~66%) of the time, we will observe 4, 5, or 6 heads when tossing
    10 fair coins. Going back to the definition of probability as a measure of uncertainty,
    we could say that we are 66% confident that, when tossing 10 fair coins, we will
    see between 4 and 6 heads.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，大约有2/3（约66%）的时间，当抛10枚公平硬币时，我们会观察到4、5或6个正面。回到概率作为不确定性度量的定义，我们可以说，我们有66%的信心，当抛10枚公平硬币时，我们会看到4到6个正面。
- en: 'Exercise 8.02: Calculating the Average Wins in Roulette'
  id: totrans-224
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习8.02：计算轮盘赌中的平均赢数
- en: In this exercise, we will learn how to use `np.random.choice` to simulate a
    real-world random process. Then, we will take this simulation and calculate how
    much money we will gain/lose on average if we play a large number of times.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将学习如何使用`np.random.choice`来模拟真实世界的随机过程。然后，我们将利用这个模拟，计算如果我们玩很多次，平均会赢得/失去多少钱。
- en: 'We will simulate going to a casino to play roulette. European roulette consists
    of a ball falling on any of the integer numbers from 0 to 36 randomly with an
    equal chance of falling on any number. Many modalities of betting are allowed,
    but we will play it in just one way (which is equivalent to the famous way of
    betting on red or black colors). The rules are as follows:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将模拟去赌场玩轮盘赌。欧洲轮盘赌包括一个球随机落在0到36之间的任何整数上，每个数字落球的机会均等。允许许多种投注方式，但我们将只以一种方式进行（相当于著名的押红色或黑色的方式）。规则如下：
- en: Bet *m* units (of your favorite currency) on the numbers from 19 to 36.
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在19到36的数字上押注*m*个单位（你喜欢的货币）。
- en: If the outcome of the roulette is any of the selected numbers, then you win
    *m* units.
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果轮盘赌的结果是所选数字中的任何一个，那么你赢得*m*个单位。
- en: If the outcome of the roulette is any number between 0 and 18 (inclusive), then
    you lose *m* units.
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果轮盘赌的结果是0到18之间的任何数字（包括18），那么你就输掉*m*个单位。
- en: 'To simplify this, let''s say the bets are of 1 unit. Let''s get started:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 为了简化，让我们假设赌注是1单位。让我们开始吧：
- en: 'Import the NumPy library:'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入NumPy库：
- en: '[PRE51]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'Use the `np.random.choice` function to write a function named `roulette` that
    simulates any number of games from European roulette:'
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`np.random.choice`函数编写一个名为`roulette`的函数，模拟欧洲轮盘赌的任意次数的游戏：
- en: '[PRE52]'
  id: totrans-234
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'Write a function named `payoff` that encodes the preceding payoff logic. It
    receives two arguments: `outcome`, a number from the roulette wheel (an integer
    from 0 to 36); and `units` to bet with a default value of 1:'
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个名为`payoff`的函数，它编码了前面的赔付逻辑。它接收两个参数：`outcome`，轮盘赌的数字（0到36之间的整数）；以及`units`，默认值为1的赌注单位：
- en: '[PRE53]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'Use `np.vectorize` to vectorize the function so it can also accept a vector
    of roulette outcomes. This will allow you to pass a vector of outcomes and get
    the respective payoffs:'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`np.vectorize`对函数进行矢量化，以便它也可以接受轮盘赌结果的矢量。这将允许你传递一个结果的矢量，并获得相应的赔付：
- en: '[PRE54]'
  id: totrans-238
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: 'Now, simulate playing roulette 20 times (betting one unit). Use the `payoff`
    function to get the vector of outcomes:'
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，模拟玩20次轮盘赌（押注一单位）。使用`payoff`函数获得结果向量：
- en: '[PRE55]'
  id: totrans-240
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'The output is as follows:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '[PRE56]'
  id: totrans-242
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: 'Simulate 1 million roulette games and use the outcomes to get the respective
    payoffs. Save the payoffs in a vector named `payoffs`:'
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模拟100万次轮盘赌游戏，并使用结果获得相应的赔偿。将赔偿保存在名为`payoffs`的向量中：
- en: '[PRE57]'
  id: totrans-244
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: 'Use the `np.mean` function to calculate the mean of the payoffs vector. The
    value you will get should be close to -0.027027:'
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`np.mean`函数计算赔偿向量的平均值。你得到的值应该接近-0.027027：
- en: '[PRE58]'
  id: totrans-246
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: The negative means that, on average, you lose -0.027027 for every unit you bet.
    Remember that your loss is the casino's profit. That is their business.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 负数意味着平均每下注一单位就会损失-0.027027。请记住，你的损失就是赌场的利润。这是他们的生意。
- en: In this exercise, we learned how to simulate a real-world process using the
    capabilities of NumPy for random number generation. We also simulated a large
    number of events to get a long-term average.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们学会了如何使用NumPy的随机数生成功能来模拟真实世界的过程。我们还模拟了大量事件以获得长期平均值。
- en: Note
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To access the source code for this specific section, please refer to [https://packt.live/2AoiyGp](https://packt.live/2AoiyGp).
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问本节的源代码，请参阅[https://packt.live/2AoiyGp](https://packt.live/2AoiyGp)。
- en: You can also run this example online at [https://packt.live/3irX6Si](https://packt.live/3irX6Si).
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以在[https://packt.live/3irX6Si](https://packt.live/3irX6Si)上在线运行这个例子。
- en: With that, we learned how we can make sense of random events by assigning probabilities
    to quantify uncertainty. Then, we defined some of the most important concepts
    in probability theory. We also learned how to assign probabilities to events using
    the relative frequency definition. In addition, we introduced the important concept
    of random variables. Computationally, we learned how to simulate values and samples
    with NumPy and how to use simulations to answer questions about the probabilities
    of certain events.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这样，我们学会了如何通过分配概率来量化不确定性来理解随机事件。然后，我们定义了概率论中一些最重要的概念。我们还学会了如何使用相对频率定义为事件分配概率。此外，我们介绍了随机变量的重要概念。在计算上，我们学会了如何使用NumPy模拟值和样本，以及如何使用模拟来回答关于某些事件概率的问题。
- en: 'Depending on the types of values random variables can take, we can have two
    types:'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 根据随机变量可以取的值的类型，我们可以有两种类型：
- en: Discrete random variables
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 离散随机变量
- en: Continuous random variables
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 连续随机变量
- en: We will provide some examples of both in the following two sections.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在接下来的两节中提供一些例子。
- en: Discrete Random Variables
  id: totrans-257
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 离散随机变量
- en: 'In this section, we''ll continue learning about and working with random variables.
    We will study a particular type of random variable: **discrete random variables**.
    These types of variables arise in every kind of applied domain, such as medicine,
    education, manufacturing, and so on, and therefore it is extremely useful to know
    how to work with them. We will learn about perhaps the most important, and certainly
    one of the most commonly occurring, discrete distributions: the binomial distribution.'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将继续学习和处理随机变量。我们将研究一种特定类型的随机变量：离散随机变量。这些类型的变量在各种应用领域中都会出现，如医学、教育、制造等，因此了解如何处理它们非常有用。我们将学习可能是最重要的，也是最常见的离散分布之一：二项分布。
- en: Defining Discrete Random Variables
  id: totrans-259
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 离散随机变量的定义
- en: Discrete random variables are those that can take only a specific number of
    values (technically, a *countable* number of values). Often, the values they can
    take are specific integer values, although this is not necessary. For instance,
    if a random variable can take the set of values {1.25, 3.75, 9.15}, it would also
    be considered a discrete random variable. The two random variables we introduced
    in the previous section are examples of discrete random variables.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 离散随机变量只能取特定数量的值（技术上来说是*可数*数量的值）。通常，它们可以取的值是特定的整数值，尽管这并非必要。例如，如果一个随机变量可以取{1.25,
    3.75, 9.15}这组值，它也被认为是离散随机变量。我们在上一节介绍的两个随机变量就是离散随机变量的例子。
- en: 'Consider an example in which you are the manager of a factory that produces
    auto parts. The machine producing the parts will produce, on average, defective
    parts 4% of the time. We can interpret this 4% as the probability of producing
    defective parts. These auto parts are packaged in boxes containing 12 units, so,
    in principle, every box can contain anywhere from 0 to 12 defective pieces. Suppose
    we don''t know which piece is defective (until it is used), nor do we know when
    a defective piece will be produced. Hence, we have a random variable. First, let''s
    formally define it:'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你是一家生产汽车零部件的工厂的经理。生产零件的机器平均会有4%的次品。我们可以将这4%解释为生产次品的概率。这些汽车零件被包装在包含12个单位的箱子中，因此，原则上每个箱子可以包含从0到12个次品。假设我们不知道哪个零件是次品（直到使用时），也不知道何时会生产次品。因此，我们有一个随机变量。首先，让我们正式定义它：
- en: '*Z: number of defective auto parts in a 12-box pack.*'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: '*Z：12箱装中次品的数量。*'
- en: 'As the manager of the plant, one of your largest clients asks you the following questions:'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 作为工厂经理，你最大的客户之一问了你以下问题：
- en: What percentage of boxes have 12 non-defective pieces (zero defective pieces)?
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有12个非次品零件（零次品）的箱子占百分之多少？
- en: What percentage of boxes have 3 or more defective pieces?
  id: totrans-265
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有3个或更多次次品的箱子占百分之多少？
- en: 'You can answer both questions if you know the probability distribution for
    your variable, so you ask yourself the following:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你知道变量的概率分布，你可以回答这两个问题，所以你问自己以下问题：
- en: '*What does the probability distribution of Z look like?*'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: '*Z的概率分布是什么样子？*'
- en: 'To answer this question, we can again use simulations. To simulate a single
    box, we can use `np.random.choice` and provide the probabilities via the `p` parameter:'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 为了回答这个问题，我们可以再次使用模拟。要模拟一个单独的箱子，我们可以使用`np.random.choice`并通过`p`参数提供概率：
- en: '[PRE59]'
  id: totrans-269
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'The result is as follows:'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE60]'
  id: totrans-271
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'We can see that this particular box contains one defective piece. Notice that
    the probability vector that was used in the function must add up to one: since
    the probability of observing a defective piece is 4% (0.04), the probability of
    observing a good piece is *100% – 4% = 96%* (0.96), which are the values that
    are passed to the p argument.'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到这个特定的盒子包含一个次品。请注意，在函数中使用的概率向量必须加起来为1：因为观察到次品的概率为4%（0.04），观察到好品的概率为*100%
    – 4% = 96%*（0.96），这些值被传递给p参数。
- en: 'Now that we know how to simulate a single box, to estimate the distribution
    of our random variable, let''s simulate a large number of boxes; 1 million is
    more than enough. To make our calculations easier and faster, let''s use 1s and
    0s to denote defective and good parts, respectively. To simulate 1 million boxes,
    it is enough to change the size parameter to a tuple that will be of size *12
    x 1,000,000*:'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们知道如何模拟单个盒子，为了估计我们的随机变量的分布，让我们模拟大量的盒子；100万个已经足够了。为了使我们的计算更简单更快，让我们使用1和0来表示次品和好品。要模拟100万个盒子，只需将大小参数更改为一个大小为*12
    x 1,000,000*的元组即可：
- en: '[PRE61]'
  id: totrans-274
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: 'The first five boxes can be found using the following formula:'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 前五个盒子可以使用以下公式找到：
- en: '[PRE62]'
  id: totrans-276
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: 'The output will be as follows:'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 输出将如下所示：
- en: '[PRE63]'
  id: totrans-278
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: 'Each of the zeros in the output represents a non-defective piece, and one represents
    a defective piece. Now, we count how many defective pieces we have per box, and
    then we can count how many times we observed 0, 1, 2, ..., 12 defective pieces,
    and with that, we can plot the probability distribution of Z:'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 输出中的每个零代表一个非次品，一个代表一个次品。现在，我们计算每个盒子中有多少次品，然后我们可以计算观察到0、1、2、...、12个次品的次数，然后我们可以绘制Z的概率分布：
- en: '[PRE64]'
  id: totrans-280
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: 'Finally, let''s visualize this:'
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，让我们将其可视化：
- en: '[PRE65]'
  id: totrans-282
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: 'The output will be as follows:'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 输出将如下所示：
- en: '[PRE66]'
  id: totrans-284
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: 'Here''s what the probability distribution will look like:'
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 概率分布将如下所示：
- en: '![Figure 8.7: Probability distribution of Z'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.7：Z的概率分布'
- en: '](image/B15968_08_07.jpg)'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_07.jpg)'
- en: 'Figure 8.7: Probability distribution of Z'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.7：Z的概率分布
- en: 'From this simulation, we can conclude that around 61% of boxes will be shipped
    with zero defective parts, and around 30% of the boxes will contain one defective
    part. We can also see that it is very, very unlikely to observe three or more
    defective parts in a box. Now, you can answer the questions your client had:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 从这个模拟中，我们可以得出结论，大约61%的盒子将被运送到零次品，大约30%的盒子将包含一个次品。我们还可以看到，在一个盒子中观察到三个或更多次品是非常非常不可能的。现在，你可以回答你的客户的问题了：
- en: 'What percentage of boxes have 12 non-defective parts? *Answer: 61% of the boxes
    will contain 12 non-defective parts.*'
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有多少百分比的盒子有12个非次品？ *答案：61%的盒子将包含12个非次品。*
- en: 'What percentage of boxes have 3 or more defective pieces? *Answer: Only about
    1% of the boxes will contain 3 or more defective parts.*'
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有多少百分比的盒子有3个或更多次品？ *答案：只有大约1%的盒子会包含3个或更多次品。*
- en: The Binomial Distribution
  id: totrans-292
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 二项分布
- en: 'It turns out that, under certain conditions, we can find out the exact probability
    distribution of certain discrete random variables. The *binomial distribution*
    is a theoretical distribution that applies to random variables and fulfills the
    following three characteristics:'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 事实证明，在某些条件下，我们可以找出某些离散随机变量的确切概率分布。*二项分布*是适用于随机变量并满足以下三个特征的理论分布：
- en: '**Condition 1**: For an individual observation, there are *only two possible
    outcomes*, usually denoted as *success* and *failure*. If the probability of success
    is *p*, then the probability of failure must be *1 – p*.'
  id: totrans-294
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**条件1**：对于单个观察，通常表示为*成功*和*失败*，只有*两种可能的结果*。如果成功的概率是*p*，那么失败的概率必须是*1 – p*。'
- en: '**Condition 2**: The experiment is performed a *fixed number of times*, usually
    denoted by *n*.'
  id: totrans-295
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**条件2**：实验被*固定次数*执行，通常用*n*表示。'
- en: '**Condition 3**: All the experiments are *independent*, meaning that knowing
    the outcome of an experiment does not change the probability of the next. Therefore,
    the probability of success (and failure) remains the same.'
  id: totrans-296
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**条件3**：所有实验都是*独立*的，这意味着知道一个实验的结果不会改变下一个实验的概率。因此，成功（和失败）的概率保持不变。'
- en: 'If these conditions are met, then we say that the random variable follows a
    binomial distribution, or that the random variable is a *binomial random variable*.
    We can get the exact probability distribution of a binomial random variable, *X*,
    using the following formula:'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 如果满足这些条件，那么我们说随机变量遵循二项分布，或者随机变量是*二项随机变量*。我们可以使用以下公式得到二项随机变量*X*的确切概率分布：
- en: '![Figure 8.8: Formula to calculate the probability distribution of X'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.8：计算X的概率分布的公式'
- en: '](image/B15968_08_08.jpg)'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_08.jpg)'
- en: 'Figure 8.8: Formula to calculate the probability distribution of X'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.8：计算X的概率分布的公式
- en: Technically, the *mathematical function* that takes a possible value of a discrete
    random variable (*x*) and returns the respective probability is called the **probability
    mass function**. Notice that once we know the values of *n* and *p* from the previous
    equation, the probability depends only on the *x* value, so the former equation
    defines the probability mass function for a binomial random variable.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 从技术上讲，*数学函数*，它接受离散随机变量（*x*）的可能值并返回相应的概率被称为**概率质量函数**。请注意，一旦我们从前一个方程中知道了*n*和*p*的值，概率就只取决于*x*的值，因此前一个方程为二项随机变量定义了概率质量函数。
- en: 'OK, this sounds and looks very theoretical and abstract (because it is). However,
    we have already introduced two random variables that follow the binomial distribution.
    Let''s verify the conditions for the following:'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 好的，这听起来和看起来非常理论化和抽象（因为它是）。然而，我们已经介绍了两个遵循二项分布的随机变量。让我们验证以下条件是否成立：
- en: '*Y: Number of heads when tossing 10 fair coins.*'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: '*Y: 抛掷10枚公平硬币时出现的正面数量。*'
- en: '**Condition 1**: For each individual coin, there are only two possible outcomes,
    *head* or *tails*, each with a fixed probability of 0.5\. Since we were interested
    in the *number of heads*, *heads* can be considered our *success* and *tails*
    our *failure*.'
  id: totrans-304
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**条件1**：对于每个单独的硬币，只有两种可能的结果，*正面*或*反面*，每种结果的固定概率为0.5。由于我们对*正面的数量*感兴趣，*正面*可以被认为是我们的*成功*，*反面*是我们的*失败*。'
- en: '**Condition 2**: The number of coins was fixed at 10 coins.'
  id: totrans-305
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**条件2**：硬币的数量固定为10枚。'
- en: '**Condition 3**: Each coin toss is independent: we implicitly (and logically)
    assumed that the outcome of one coin does not influence the outcome of any other
    coin.'
  id: totrans-306
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**条件3**：每次抛硬币都是独立的：我们隐含地（逻辑上）假设一枚硬币的结果不会影响任何其他硬币的结果。'
- en: 'So, we have the numbers we need to use in the preceding formula:'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，我们有了在前述公式中使用的数字：
- en: '*p = 0.5*'
  id: totrans-308
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*p = 0.5*'
- en: '*n = 10*'
  id: totrans-309
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*n = 10*'
- en: 'If we want to get the probability of getting five heads, then we only need
    to replace *x = 5* in the formula with the known *p* and *n*:'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们想要得到得到五个正面的概率，那么我们只需要在公式中用已知的*p*和*n*替换*x = 5*：
- en: '![Figure 8.9: Substituting the values of x, p and n in the probability distribution
    formula'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.9：在概率分布公式中替换x、p和n的值'
- en: '](image/B15968_08_09.jpg)'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_09.jpg)'
- en: 'Figure 8.9: Substituting the values of x, p and n in the probability distribution
    formula'
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.9：在概率分布公式中替换x、p和n的值
- en: 'Now, let''s do these theoretical calculations with Python. It is time to introduce
    another Python module that we will be using heavily in this and the following
    chapter. The `scipy.stats` module contains many statistical functions. Among those,
    there are many that can be used to create random variables that follow many of
    the most commonly used probability distributions. Let''s use this module to create
    a random variable that follows the theoretical binomial distribution. First, we
    instantiate the random variable with the appropriate parameters:'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们用Python进行这些理论计算。是时候介绍另一个Python模块了，我们将在本章和接下来的章节中大量使用。`scipy.stats`模块包含许多统计函数。其中有许多可以用来创建遵循许多常用概率分布的随机变量的函数。让我们使用这个模块来创建一个遵循理论二项分布的随机变量。首先，我们用适当的参数实例化随机变量：
- en: '[PRE67]'
  id: totrans-315
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'Once created, we can use the `pmf` method of this object to calculate the exact
    theoretical probabilities for each of the possible values *Y* can take. First,
    let''s create a vector containing all the values *Y* can take (integers from 0
    to 10):'
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 创建后，我们可以使用该对象的`pmf`方法来计算*Y*可以取的每个可能值的精确理论概率。首先，让我们创建一个包含*Y*可以取的所有值（从0到10的整数）的向量：
- en: '[PRE68]'
  id: totrans-317
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: 'Now, we can simply use the `pmf` (which stands for **probability mass function**)
    method to get the respective probabilities for each of the former values:'
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们可以简单地使用`pmf`（代表**概率质量函数**）方法来获得前述值的相应概率：
- en: '[PRE69]'
  id: totrans-319
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: 'We can visualize the `pmf` we got like so:'
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以像这样可视化我们得到的`pmf`：
- en: '[PRE70]'
  id: totrans-321
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: 'The output we get is as follows:'
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到的输出如下：
- en: '![Figure 8.10: pmf of Y'
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.10：Y的pmf'
- en: '](image/B15968_08_10.jpg)'
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_10.jpg)'
- en: 'Figure 8.10: pmf of Y'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.10：Y的pmf
- en: 'This looks very similar to what we got using the simulations. Now, let''s compare
    both plots. We will create a DataFrame to make the plotting process easier:'
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 这看起来与我们使用模拟得到的结果非常相似。现在，让我们比较两个图。我们将创建一个DataFrame来使绘图过程更容易：
- en: '[PRE71]'
  id: totrans-327
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: 'The output is as follows:'
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 8.11: pmf of Y versus simulated results'
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.11：Y的pmf与模拟结果'
- en: '](image/B15968_08_11.jpg)'
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_11.jpg)'
- en: 'Figure 8.11: pmf of Y versus simulated results'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.11：Y的pmf与模拟结果
- en: The two sets of bars are practically identical; the probabilities we got from
    our simulation are very close to the theoretical values. This shows the power
    of simulations.
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 这两组柱状图几乎是相同的；我们从模拟中得到的概率非常接近理论值。这显示了模拟的力量。
- en: 'Exercise 8.03: Checking If a Random Variable Follows a Binomial Distribution'
  id: totrans-333
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习8.03：检查随机变量是否符合二项分布
- en: In this exercise, we will practice how to verify if a random variable follows
    a binomial distribution. We will also create a random variable using `scipy.stats`
    and plot the distribution. This will be a mostly conceptual exercise.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将练习如何验证随机变量是否符合二项分布。我们还将使用`scipy.stats`创建一个随机变量并绘制分布。这将是一个大部分概念性的练习。
- en: 'Here, we will check if the random variable, *Z: number of defective auto parts
    in a 12-box pack*, follows a binomial distribution (remember that we consider
    4% of the auto parts are defective). Follow these steps to complete this exercise:'
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们将检查随机变量*Z：12盒装中有缺陷汽车零件的数量*是否符合二项分布（记住我们认为4%的汽车零件有缺陷）。按照以下步骤完成这个练习：
- en: 'Import NumPy, Matplotlib, and `scipy.stats` following the usual conventions:'
  id: totrans-336
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照通常的惯例导入NumPy、Matplotlib和`scipy.stats`：
- en: '[PRE72]'
  id: totrans-337
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: 'Just as we did in the *Defining Discrete Random Variables* section, try to
    conceptually check if *Z* fulfills the three characteristics given for a binomial
    random variable:'
  id: totrans-338
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 就像我们在*定义离散随机变量*部分所做的那样，尝试概念性地检查*Z*是否满足二项随机变量的三个特征：
- en: 'a. **Condition 1**: For each individual auto part, there are only two possible
    outcomes, *defective* or *good*. Since we were interested in the *defective* parts,
    then that outcome can be considered the *success*, with a fixed probability of
    0.04 (4%).'
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: a. **条件1**：对于每个单独的汽车零件，只有两种可能的结果，*有缺陷*或*好的*。由于我们对*有缺陷*零件感兴趣，那么这个结果可以被认为是*成功*，成功的固定概率为0.04（4%）。
- en: 'b. **Condition 2**: The number of parts per box was fixed at 12, so the experiment
    was performed a fixed number of times per box.'
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: b. **条件2**：每盒的零件数量固定为12，因此实验在每盒中进行了固定次数。
- en: 'c. **Condition 3**: We assumed that the defective parts had no relationship
    between one another because the machine randomly produces an average of 4% defective
    parts.'
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: c. **条件3**：我们假设有缺陷的零件之间没有关系，因为机器随机产生平均4%的有缺陷零件。
- en: Determine the *p* and *n* parameters for the distributions of this variable,
    that is, *p = 0.04* and *n = 12*.
  id: totrans-342
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确定该变量的分布的*p*和*n*参数，即*p = 0.04*和*n = 12*。
- en: 'Use the theoretical formula with the former parameters to get the exact theoretical
    probability of getting exactly one defective piece per box (using *x = 1*):![Figure
    8.12: Substituting the values of x, p and n in the probability distribution formula'
  id: totrans-343
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用前面的参数使用理论公式来获得每箱恰好有一个次品的精确理论概率（使用*x = 1*）：![图8.12：用概率分布公式替换x、p和n的值
- en: '](image/B15968_08_12.jpg)'
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_12.jpg)'
- en: 'Figure 8.12: Substituting the values of x, p and n in the probability distribution
    formula'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.12：用概率分布公式替换x、p和n的值
- en: 'Use the `scipy.stats` module to produce an instance of the *Z* random variable.
    Name it `Z_rv`:'
  id: totrans-346
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`scipy.stats`模块生成*Z*随机变量的实例。将其命名为`Z_rv`：
- en: '[PRE73]'
  id: totrans-347
  prefs: []
  type: TYPE_PRE
  zh: '[PRE73]'
- en: 'Plot the probability mass function of *Z*:'
  id: totrans-348
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 绘制*Z*的概率质量函数：
- en: '[PRE74]'
  id: totrans-349
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: 'The result looks like this:'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Figure 8.13: pmf of Z'
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.13：Z的pmf'
- en: '](image/B15968_08_13.jpg)'
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_13.jpg)'
- en: 'Figure 8.13: pmf of Z'
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.13：Z的pmf
- en: In this exercise, we learned how to check for the three conditions that are
    needed for a discrete random variable to have a binomial distribution. We concluded
    that the variable we analyzed indeed has a binomial distribution. We were also
    able to calculate its parameters and use them to create a binomial random variable
    using `scipy.stats` and plotted the distribution.
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们学习了如何检查离散随机变量具有二项分布所需的三个条件。我们得出结论，我们分析的变量确实具有二项分布。我们还能够计算其参数并使用它们创建一个二项随机变量，并绘制了分布。
- en: Note
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To access the source code for this specific section, please refer to [https://packt.live/3gbTm5k](https://packt.live/3gbTm5k).
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问此特定部分的源代码，请参阅[https://packt.live/3gbTm5k](https://packt.live/3gbTm5k)。
- en: You can also run this example online at [https://packt.live/2Anhx1k](https://packt.live/2Anhx1k).
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以在[https://packt.live/2Anhx1k](https://packt.live/2Anhx1k)上在线运行此示例。
- en: 'In this section, we focused on discrete random variables. Now, we know they
    are the kind of random variables that can take on a specific number of values.
    Typically, these are integer values. Often, these types of variables are related
    to counts: the number of students that will pass a test, the number of cars crossing
    a bridge, and so on. We also learned about the most important distribution of
    discrete random variables, known as the binomial distribution, and how we can
    get the exact theoretical probabilities of a binomial random variable using Python.'
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们专注于离散随机变量。现在，我们知道它们是可以取特定数值的随机变量的一种。通常，这些是整数值。通常，这些类型的变量与计数有关：将通过考试的学生人数，穿过桥的汽车数量等。我们还了解了离散随机变量的最重要的分布，称为二项分布，以及如何使用Python获得二项随机变量的精确理论概率。
- en: In the next section, we'll focus on continuous random variables.
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将专注于连续随机变量。
- en: Continuous Random Variables
  id: totrans-360
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 连续随机变量
- en: 'In this section, we''ll continue working with random variables. Here, we''ll
    discuss continuous random variables. We will learn the key distinction between
    continuous and discrete probability distributions. In addition, we will introduce
    the mother of all distributions: the famous **normal distribution**. We will learn
    how to work with this distribution using `scipy.stats` and review its most important
    characteristics.'
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将继续处理随机变量。在这里，我们将讨论连续随机变量。我们将学习连续和离散概率分布之间的关键区别。此外，我们将介绍所有分布的鼻祖：著名的**正态分布**。我们将学习如何使用`scipy.stats`处理这种分布，并回顾其最重要的特征。
- en: Defining Continuous Random Variables
  id: totrans-362
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 定义连续随机变量
- en: 'There are certain random quantities that, in principle, can take any real value
    in an interval. Some examples are as follows:'
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 在原则上，有些随机量可以在一个区间内取任意实数值。一些例子如下：
- en: The price of the IBM stocks one week from now
  id: totrans-364
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一周后IBM股票的价格
- en: The number of calories ingested by a person in a day
  id: totrans-365
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个人一天摄入的卡路里数量
- en: The closing exchange rate between the British pound and the Euro
  id: totrans-366
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 英镑和欧元之间的收盘汇率
- en: The height of a randomly chosen male from a specific group
  id: totrans-367
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 特定群体中随机选择的男性的身高
- en: Because of their nature, these variables are known as *continuous* random variables.
    As with discrete random variables, there are many theoretical distributions that
    can be used to model real-world phenomena.
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 由于它们的性质，这些变量被称为*连续*随机变量。与离散随机变量一样，有许多理论分布可以用来模拟现实世界的现象。
- en: 'To introduce this type of random variable, let''s look at an example we are
    already familiar with. Once again, let''s load the games dataset we introduced
    in *Chapter 7*, *Doing Basic Statistics with Python*:'
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 为了介绍这种类型的随机变量，让我们看一个我们已经熟悉的例子。再次加载我们在*第7章*《使用Python进行基本统计》中介绍的游戏数据集：
- en: '[PRE75]'
  id: totrans-370
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: 'One of the variables we have in the dataset is *size of the game* in bytes.
    Before visualizing the distribution of this variable, we will transform it into
    megabytes:'
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集中的一个变量是*游戏大小*（以字节为单位）。在可视化此变量的分布之前，我们将把它转换为兆字节：
- en: '[PRE76]'
  id: totrans-372
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: 'The output is as follows:'
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 8.14: Distribution of the size of the game'
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.14：游戏大小的分布'
- en: '](image/B15968_08_14.jpg)'
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_14.jpg)'
- en: 'Figure 8.14: Distribution of the size of the game'
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.14：游戏大小的分布
- en: 'Let''s define our random variable, *X*, as follows:'
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们定义我们的随机变量*X*如下：
- en: '*X: Size of a randomly chosen strategy game from the app store.*'
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: '*X：从应用商店随机选择的策略游戏的大小。*'
- en: 'Having defined this random variable, we can start asking questions about the
    probabilities of certain events:'
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: 定义了这个随机变量后，我们可以开始询问关于某些事件的概率的问题：
- en: '*P(X > 100)*: Probability that *X* is strictly greater than 100 MB'
  id: totrans-380
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*P(X > 100)*：*X*严格大于100MB的概率'
- en: '*P(100 ≤ X ≤ 400)*: Probability that *X* is between 100 and 400 MB'
  id: totrans-381
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*P(100 ≤ X ≤ 400)*：*X*在100和400MB之间的概率'
- en: '*P(X = 152.53)*: Probability of *X* being exactly 152.53 MB'
  id: totrans-382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*P(X = 152.53)*：*X*恰好为152.53MB的概率'
- en: 'By now, you know how you can estimate these probabilities by using the relative
    frequency definition of probability: count the number of times an event happens
    and divide this by the total number of events (games, in this case):'
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，您知道如何使用概率的相对频率定义来估计这些概率：计算事件发生的次数，然后除以总事件数（在这种情况下是游戏数）：
- en: '[PRE77]'
  id: totrans-384
  prefs: []
  type: TYPE_PRE
  zh: '[PRE77]'
- en: 'The results are as follows:'
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE78]'
  id: totrans-386
  prefs: []
  type: TYPE_PRE
  zh: '[PRE78]'
- en: Notice the last probability we calculated, *P(X = 152.53)*. The estimated probability
    that a random variable takes a *specific* value (such as 152.53) is zero. This
    is always the case for any continuous random variable. Since these types of variables
    can, in principle, take an infinite number of values, then the probability of
    taking *exactly* a specific value must be zero.
  id: totrans-387
  prefs: []
  type: TYPE_NORMAL
  zh: 注意我们计算的最后一个概率，*P(X = 152.53)*。随机变量取*特定*值（如152.53）的概率是零。对于任何连续随机变量，这总是如此。由于这些类型的变量原则上可以取无限多个值，因此取*确切*特定值的概率必须为零。
- en: 'The preceding example shows that when we have enough data points about a continuous
    random variable, we can use the data to estimate the probability of the random
    variable taking values within certain intervals. However, having lots of observations
    about one variable might not always be the case. Given this fact, let''s consider
    the following questions:'
  id: totrans-388
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的例子表明，当我们有足够多关于连续随机变量的数据点时，我们可以使用数据来估计随机变量在某些区间内取值的概率。然而，关于一个变量有大量观察结果的情况可能并非总是如此。鉴于这一事实，让我们考虑以下问题：
- en: What if we have no data at all?
  id: totrans-389
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果我们根本没有数据呢？
- en: What if we don't have enough data?
  id: totrans-390
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果我们没有足够的数据呢？
- en: Can we perform simulations to get an estimation of the probabilities of certain
    events (as we did with discrete random variables)?
  id: totrans-391
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们能否进行模拟来估计某些事件的概率（就像我们对离散随机变量所做的那样）？
- en: 'These are sensible questions, and we can answer them by knowing more about
    **theoretical continuous probability distributions**:'
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: 这些都是合理的问题，我们可以通过更多了解**理论连续概率分布**来回答它们：
- en: What if we have no data at all? *We can make some reasonable assumptions about
    the variable, and then model it using one of the many theoretical continuous probability
    distributions.*
  id: totrans-393
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果我们根本没有数据呢？*我们可以对变量做出一些合理的假设，然后使用众多理论连续概率分布之一对其进行建模。*
- en: What if we don't have enough data? *We can make some reasonable assumptions
    about the variable, support these assumptions with the data, and use estimation
    techniques (the subject of the next chapter) to estimate the parameters of the
    chosen theoretical continuous probability distribution.*
  id: totrans-394
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果我们没有足够的数据呢？*我们可以对变量做出一些合理的假设，用数据支持这些假设，并使用估计技术（下一章的主题）来估计所选择的理论连续概率分布的参数。*
- en: Can we perform simulations to get an estimation of the probabilities of certain
    events (as we did with discrete random variables)? *Yes. Once we have chosen the
    probability distribution, along with its parameters, we can use simulations to
    answer complicated questions.*
  id: totrans-395
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们能否进行模拟来估计某些事件的概率（就像我们对离散随机变量所做的那样）？*可以。一旦我们选择了概率分布以及其参数，我们可以使用模拟来回答复杂的问题。*
- en: 'To make the previous answers clear, in the following subsections, we''ll introduce
    the most important continuous probability distribution: the normal distribution.'
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: 为了澄清前面的答案，在接下来的小节中，我们将介绍最重要的连续概率分布：正态分布。
- en: It is worth noting that for continuous random variables, the probability distribution
    is also known as the **probability density function** or **pdf**.
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
  zh: 值得注意的是，对于连续随机变量，概率分布也被称为**概率密度函数**或**pdf**。
- en: The Normal Distribution
  id: totrans-398
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 正态分布
- en: 'Let''s introduce the most famous and important distribution in probability
    theory: the normal distribution. The pdf of the normal distribution is defined
    by the following equation:'
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们介绍概率论中最著名和重要的分布：正态分布。正态分布的概率密度函数由以下方程定义：
- en: '![Figure 8.15: The pdf of the normal distribution'
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.15：正态分布的概率密度函数'
- en: '](image/B15968_08_15.jpg)'
  id: totrans-401
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_15.jpg)'
- en: 'Figure 8.15: The pdf of the normal distribution'
  id: totrans-402
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.15：正态分布的概率密度函数
- en: 'Here, *π* and *e* are the well-known mathematical constants. Don''t try to
    understand the equation; all you need to know is two things: first, that the distribution
    is completely determined when we have two parameters:'
  id: totrans-403
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，*π*和*e*是众所周知的数学常数。不要试图理解方程；您需要知道的只有两件事：首先，当我们有两个参数时，分布就完全确定了：
- en: '*µ*: The mean of the distribution'
  id: totrans-404
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*µ*：分布的均值'
- en: '*σ*: The standard deviation of the distribution'
  id: totrans-405
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*σ*：分布的标准差'
- en: 'Second, if *X* is a random variable that follows a normal distribution, then
    for a possible value *x*, the preceding formula will give you a value that is
    *directly related* to the probability of the variable *taking values near x*.
    Unlike the formula of the binomial distribution, where we got the probability
    by directly plugging the value, *x*, into the formula, in the case of continuous
    random variables, it is different: there is no direct interpretation of the values
    given by the formula. The following example will clarify this.'
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: 其次，如果*X*是一个遵循正态分布的随机变量，那么对于可能的值*x*，前面的公式将给出一个与变量*接近x*的概率*直接相关*的值。与二项分布的公式不同，我们通过直接将值*x*代入公式来得到概率，在连续随机变量的情况下，情况不同：公式给出的值没有直接解释。下面的例子将澄清这一点。
- en: 'We will create a random variable that follows a normal distribution using the
    `scipy.stats` module. Let''s suppose that the heights of a certain population
    of males is described by a normal distribution with a mean of 170 cm and a standard
    deviation of 10 cm. To create this random variable using `scipy.stats`, we need
    to use the following code:'
  id: totrans-407
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用`scipy.stats`模块创建一个遵循正态分布的随机变量。假设某一男性人群的身高服从均值为170厘米，标准差为10厘米的正态分布。要使用`scipy.stats`创建这个随机变量，我们需要使用以下代码：
- en: '[PRE79]'
  id: totrans-408
  prefs: []
  type: TYPE_PRE
  zh: '[PRE79]'
- en: 'The preceding code creates the normally distributed random variable, whose
    pdf looks like this:'
  id: totrans-409
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的代码创建了正态分布的随机变量，其概率密度函数如下所示：
- en: '![Figure 8.16: The pdf of a normally distributed random variable'
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.16：正态分布随机变量的概率密度函数'
- en: '](image/B15968_08_16.jpg)'
  id: totrans-411
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_16.jpg)'
- en: 'Figure 8.16: The pdf of a normally distributed random variable'
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.16：正态分布随机变量的概率密度函数
- en: 'For every value, *x*, say, `175`, we can get the value of the pdf by using
    the `pdf` method, like so:'
  id: totrans-413
  prefs: []
  type: TYPE_NORMAL
  zh: 对于每个值*x*，比如`175`，我们可以使用`pdf`方法得到pdf的值，就像这样：
- en: '[PRE80]'
  id: totrans-414
  prefs: []
  type: TYPE_PRE
  zh: '[PRE80]'
- en: 'The result is as follows:'
  id: totrans-415
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE81]'
  id: totrans-416
  prefs: []
  type: TYPE_PRE
  zh: '[PRE81]'
- en: 'This number is what you would get if you replaced *x* with `175` in the preceding formula:'
  id: totrans-417
  prefs: []
  type: TYPE_NORMAL
  zh: 这个数字是如果你在前面的公式中用`175`替换*x*会得到的：
- en: '![Figure 8.17 Substituting the vale of x=175'
  id: totrans-418
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.17 替换x=175的值'
- en: '](image/B15968_08_17.jpg)'
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_17.jpg)'
- en: Figure 8.17 Substituting the vale of x=175
  id: totrans-420
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.17 替换x=175的值
- en: 'To be clear, this *is not* the probability of observing a male whose height
    is 175 cm (remember that the probability of this variable taking a specific value
    should be zero) as this number does not have a simple direct interpretation. However,
    if we plot the whole density curve, then we can start understanding the distribution
    of our random variable. To plot the whole probability density function, we must
    create a vector that contains a collection of possible values that this variable
    can take. According to the context of male heights, let''s say that we want to
    plot the pdf for values between 130 cm and 210 cm, which are the likely values
    for healthy male adults. First, we create the vector of values using `np.linspace`,
    which in this case will create 200 equally spaced numbers between 120 and 210
    (inclusive):'
  id: totrans-421
  prefs: []
  type: TYPE_NORMAL
  zh: 要明确，这*不是*观察到一个身高为175厘米的男性的概率（请记住，这个变量取特定值的概率应该是零），因为这个数字没有简单的直接解释。但是，如果我们绘制整个密度曲线，那么我们就可以开始理解我们的随机变量的分布。要绘制整个概率密度函数，我们必须创建一个包含该变量可能取的一系列可能值的向量。根据男性身高的背景，假设我们想要绘制介于130厘米和210厘米之间的值的pdf，这些是健康成年男性的可能值。首先，我们使用`np.linspace`创建值的向量，在这种情况下，它将在120和210之间（包括这两个值）创建200个等间距的数字：
- en: '[PRE82]'
  id: totrans-422
  prefs: []
  type: TYPE_PRE
  zh: '[PRE82]'
- en: 'Now, we can produce the pdf and plot against the created values:'
  id: totrans-423
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们可以生成pdf并将其与创建的值绘制在一起：
- en: '[PRE83]'
  id: totrans-424
  prefs: []
  type: TYPE_PRE
  zh: '[PRE83]'
- en: 'The curve looks like this:'
  id: totrans-425
  prefs: []
  type: TYPE_NORMAL
  zh: 曲线看起来是这样的：
- en: '![Figure 8.18: Example of a normal distribution with mean=170 and sd=10'
  id: totrans-426
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.18：均值=170，标准差=10的正态分布示例'
- en: '](image/B15968_08_18.jpg)'
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_18.jpg)'
- en: 'Figure 8.18: Example of a normal distribution with mean=170 and sd=10'
  id: totrans-428
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.18：均值=170，标准差=10的正态分布示例
- en: The higher the curve, the more likely it is to observe those values around the
    corresponding *x* axis value. For instance, we can see that we are more likely
    to observe male heights between 160 cm and 170 cm than those between 140 cm and
    150 cm.
  id: totrans-429
  prefs: []
  type: TYPE_NORMAL
  zh: 曲线越高，观察到与相应*x*轴数值周围的值的可能性就越大。例如，我们可以看到，我们更有可能观察到男性身高在160厘米到170厘米之间，而不是在140厘米到150厘米之间。
- en: 'Now that we have defined this normally distributed random variable, can we
    use simulations to answer certain questions about it? Absolutely. In fact, now,
    we will learn how to use the already defined random variable to simulate sample
    values. We can use the `rvs` method for this, which generates random samples from
    the probability distribution:'
  id: totrans-430
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经定义了这个正态分布的随机变量，我们可以使用模拟来回答关于它的某些问题吗？当然可以。事实上，现在，我们将学习如何使用已定义的随机变量来模拟样本值。我们可以使用`rvs`方法来生成这些值，该方法从概率分布中生成随机样本：
- en: '[PRE84]'
  id: totrans-431
  prefs: []
  type: TYPE_PRE
  zh: '[PRE84]'
- en: 'The result is as follows:'
  id: totrans-432
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE85]'
  id: totrans-433
  prefs: []
  type: TYPE_PRE
  zh: '[PRE85]'
- en: 'Here, we are simulating taking five random males from the population and measuring
    their heights. Notice that we used the `random_state` parameter, which plays a
    similar role to the `numpy.seed`: it ensures anyone running the same code will
    get the same random values.'
  id: totrans-434
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们正在模拟从人口中随机抽取五名男性并测量他们的身高。请注意，我们使用了`random_state`参数，它起到了与`numpy.seed`类似的作用：确保运行相同代码的人会得到相同的随机值。
- en: 'As we did previously, we can use the simulations to answer questions about
    the probability of events related to this random variable. For instance, what
    is the probability of finding a male taller than 190 cm? The following code calculates
    this simulation using our previously defined random variable:'
  id: totrans-435
  prefs: []
  type: TYPE_NORMAL
  zh: 与之前一样，我们可以使用模拟来回答与这个随机变量相关的事件的概率问题。例如，找到一个身高超过190厘米的男性的概率是多少？以下代码使用我们之前定义的随机变量计算了这个模拟：
- en: '[PRE86]'
  id: totrans-436
  prefs: []
  type: TYPE_PRE
  zh: '[PRE86]'
- en: 'The result is:'
  id: totrans-437
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是：
- en: '[PRE87]'
  id: totrans-438
  prefs: []
  type: TYPE_PRE
  zh: '[PRE87]'
- en: As we will see in the following section, there is a way to get the exact probabilities
    from the `density` function without the need to simulate values, which can sometimes
    be computationally expensive and unnecessary.
  id: totrans-439
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们将在下一节中看到的，有一种方法可以从`density`函数中获得精确的概率，而无需模拟值，这有时可能是计算昂贵且不必要的。
- en: Some Properties of the Normal Distribution
  id: totrans-440
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 正态分布的一些特性
- en: 'One impressive fact about the universe and mathematics is that many variables
    in the real world follow a normal distribution:'
  id: totrans-441
  prefs: []
  type: TYPE_NORMAL
  zh: 宇宙和数学的一个令人印象深刻的事实是，现实世界中许多变量都遵循正态分布：
- en: Human heights
  id: totrans-442
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 人类身高
- en: Weights of members of most species of mammals
  id: totrans-443
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大多数哺乳动物物种的体重
- en: Scores of standardized tests
  id: totrans-444
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标准化测试的分数
- en: Deviations from product specifications in manufacturing processes
  id: totrans-445
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 制造过程中与产品规格的偏差
- en: Medical measurements such as diastolic pressure, cholesterol, and sleep times
  id: totrans-446
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 诸如舒张压、胆固醇和睡眠时间等医学测量
- en: Financial variables such as the returns of some securities
  id: totrans-447
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 诸如某些证券的回报率等金融变量
- en: 'The normal distribution describes so many phenomena and is so extensively used
    in probability and statistics that it is worth knowing two key properties:'
  id: totrans-448
  prefs: []
  type: TYPE_NORMAL
  zh: 正态分布描述了许多现象，并且在概率和统计学中被广泛使用，因此了解两个关键属性是值得的：
- en: 'The normal distribution is completely determined by its two parameters: mean
    and standard deviation.'
  id: totrans-449
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 正态分布完全由其两个参数确定：均值和标准差。
- en: The *empirical rule* of a normally distributed random variable tells us what
    proportion of observations that we will find, depending on the number of standard
    deviations away from the mean.
  id: totrans-450
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 正态分布的*经验法则*告诉我们，根据标准偏差的数量，我们将找到多少比例的观察值。
- en: 'Let''s understand these two key properties. First, we will illustrate how the
    parameters of the distribution determine its shape:'
  id: totrans-451
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们了解这两个关键特性。首先，我们将说明分布的参数如何决定其形状：
- en: The mean determines the center of the distribution.
  id: totrans-452
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 平均值决定了分布的中心。
- en: The standard deviation determines how wide (or spread out) the distribution
    is.
  id: totrans-453
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标准差决定了分布的宽度（或扩散程度）。
- en: 'To illustrate this property, let''s say that we have the following three populations
    of male heights. Each population correspond to a different country:'
  id: totrans-454
  prefs: []
  type: TYPE_NORMAL
  zh: 为了说明这一特性，假设我们有以下三个男性身高的人口。每个人口对应一个不同的国家：
- en: '**Country A**: Mean = 170 cm, standard deviation = 10 cm'
  id: totrans-455
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**国家A**：平均值=170厘米，标准差=10厘米'
- en: '**Country B**: Mean = 170 cm, standard deviation = 5 cm'
  id: totrans-456
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**国家B**：平均值=170厘米，标准差=5厘米'
- en: '**Country C**: Mean = 175 cm, standard deviation = 10 cm'
  id: totrans-457
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**国家C**：平均值=175厘米，标准差=10厘米'
- en: 'With these parameters, we can visualize and contrast the distributions of the
    three different countries. Before visualizing, let''s create the random variables:'
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
  zh: 有了这些参数，我们可以可视化和对比三个不同国家的分布。在可视化之前，让我们创建随机变量：
- en: '[PRE88]'
  id: totrans-459
  prefs: []
  type: TYPE_PRE
  zh: '[PRE88]'
- en: 'With these objects created, we can proceed with the visualizations:'
  id: totrans-460
  prefs: []
  type: TYPE_NORMAL
  zh: 有了这些创建的对象，我们可以进行可视化：
- en: '[PRE89]'
  id: totrans-461
  prefs: []
  type: TYPE_PRE
  zh: '[PRE89]'
- en: 'The plot looks like this:'
  id: totrans-462
  prefs: []
  type: TYPE_NORMAL
  zh: 这个情节看起来是这样的：
- en: '![Figure 8.19: Comparison of normal distributions with different parameters'
  id: totrans-463
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.19：不同参数的正态分布比较'
- en: '](image/B15968_08_19.jpg)'
  id: totrans-464
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_19.jpg)'
- en: 'Figure 8.19: Comparison of normal distributions with different parameters'
  id: totrans-465
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.19：不同参数的正态分布比较
- en: Although the populations for **Country A** and **Country B** have the same mean
    (170 cm), the difference in standard deviations implies that the distribution
    for **Country B** is much more concentrated around 170 cm. We could say that the
    males in this country tend to have more homogenous heights. The curves for **Country
    A** and **Country C** are basically the same; the only difference is that the
    curve for **Country C** is *shifted* to the right by 5 cm, which implies that
    it would be more likely to find males around 190 cm in height and above in **Country
    C** than in **Country A** or **Country B** (the green curve has a greater *y*
    axis value than the other two at *x=190* and above).
  id: totrans-466
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管**国家A**和**国家B**的人口具有相同的平均值（170厘米），但标准差的差异意味着**国家B**的分布更集中在170厘米附近。我们可以说这个国家的男性身高更加均匀。**国家A**和**国家C**的曲线基本上是一样的；唯一的区别是**国家C**的曲线向右偏移了5厘米，这意味着在**国家C**比在**国家A**或**国家B**更有可能找到身高在190厘米及以上的男性（在*x=190*及以上，绿色曲线的*y*轴值大于其他两个曲线）。
- en: 'The second important characteristic of the normal distribution is known as
    the **empirical rule**. Let''s take our example of the population of male heights
    that are normally distributed with a mean of 170 cm and a standard deviation of
    10 cm:'
  id: totrans-467
  prefs: []
  type: TYPE_NORMAL
  zh: 正态分布的第二个重要特征被称为**经验法则**。让我们拿我们的例子来说明，男性身高的人口服从正态分布，平均身高为170厘米，标准差为10厘米：
- en: '*~68% of observations will lie in the interval: mean ± 1 sd*. For the height
    of males, we will find that around 68% of males are between 160 cm and 180 cm
    (170 ± 10) in height.'
  id: totrans-468
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*约68%的观察结果将落在区间内：平均值±1个标准差*。对于男性的身高，我们会发现大约68%的男性身高在160厘米和180厘米（170±10）之间。'
- en: '*~95% of observations will lie in the interval: mean ± 2 sd*. For the height
    of males, we will find that around 95% of males are between 150 cm and 190 cm
    (170 ± 20) in height.'
  id: totrans-469
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*约95%的观察结果将落在区间内：平均值±2个标准差*。对于男性的身高，我们会发现大约95%的男性身高在150厘米和190厘米（170±20）之间。'
- en: '*More than 99% of observations will lie in the interval: mean ± 3 sd*. Virtually
    all observations will be at a distance that is less than three standard deviations
    from the mean. For the height of males, we will find that around 99.7% of males
    will be between 150 cm and 200 cm (170 ± 30) in height.'
  id: totrans-470
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*超过99%的观察结果将落在区间内：平均值±3个标准差*。几乎所有的观察结果将在距离平均值不到三个标准差的距离内。对于男性的身高，我们会发现大约99.7%的男性身高在150厘米和200厘米（170±30）之间。'
- en: The empirical rule can be used to quickly give us a sense of the proportion
    of observations we expect to see when we consider some number of standard deviations
    from the mean.
  id: totrans-471
  prefs: []
  type: TYPE_NORMAL
  zh: 经验法则可以快速地让我们了解当我们考虑到离平均值几个标准差时，我们期望看到的观察比例。
- en: 'To finish this section and this chapter, one very important fact you should
    know about any continuous random variable is that the **area under the probability
    distribution** will give the probability of the variable being in a certain range.
    Let''s illustrate this with the normal distribution, and also connect this with
    the empirical rule. Say we have a normally distributed random variable with *mean
    = 170* and *standard deviation = 10*. What is the area under the probability distribution
    between *x = 160* and *x = 180* (one standard deviation away from the mean)? The
    empirical rule tells us that 68% of the observations will lie in this interval,
    so we would expect that ![a](image/B15968_08_InlineEquation5.png), which will
    correspond with the area below the curve in the interval [160, 180]. We can visualize
    this plot with matplotlib. The code to produce the plot is somewhat long, so we
    will split it into two parts. First, we will create the function to plot, establish
    the limits of the plots in the *x* axis, and define the vectors to plot:'
  id: totrans-472
  prefs: []
  type: TYPE_NORMAL
  zh: 为了完成本节和本章，你应该知道关于任何连续随机变量的一个非常重要的事实，那就是**概率分布下的面积**将给出变量在某个范围内的概率。让我们用正态分布来说明这一点，并将其与经验法则联系起来。假设我们有一个正态分布的随机变量，*平均值=170*，*标准差=10*。在*x=160*和*x=180*之间（离平均值一个标准差），概率分布下的面积是多少？经验法则告诉我们68%的观察结果将落在这个区间内，所以我们期望![a](image/B15968_08_InlineEquation5.png)，这将对应于曲线下的面积在区间[160,
    180]内。我们可以用matplotlib可视化这个图。生成图的代码有点长，所以我们将把它分成两部分。首先，我们将创建绘图函数，确定*x*轴上的限制，并定义要绘制的向量：
- en: '[PRE90]'
  id: totrans-473
  prefs: []
  type: TYPE_PRE
  zh: '[PRE90]'
- en: 'Now, we will create the figure with a shaded region:'
  id: totrans-474
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将创建一个有阴影区域的图：
- en: '[PRE91]'
  id: totrans-475
  prefs: []
  type: TYPE_PRE
  zh: '[PRE91]'
- en: 'The output will be as follows:'
  id: totrans-476
  prefs: []
  type: TYPE_NORMAL
  zh: 输出将如下所示：
- en: '![Figure 8.20: Area under the pdf as the probability of an event'
  id: totrans-477
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.20：概率密度函数下的面积作为事件的概率'
- en: '](image/B15968_08_20.jpg)'
  id: totrans-478
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_20.jpg)'
- en: 'Figure 8.20: Area under the pdf as the probability of an event'
  id: totrans-479
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.20：pdf下的面积作为事件的概率
- en: 'How do we calculate the integral that will give us the area under the curve?
    The `scipy.stats` module will make this very easy. Using the `cdf` (**cumulative
    distribution function**) method of the random variable, which is essentially the
    integral of the pdf, we can easily evaluate the integral by subtracting the lower
    and upper limits (remember the fundamental theorem of calculus):'
  id: totrans-480
  prefs: []
  type: TYPE_NORMAL
  zh: 我们如何计算将给我们曲线下面积的积分？`scipy.stats`模块将使这变得非常容易。通过随机变量的`cdf`（**累积分布函数**）方法，本质上是pdf的积分，我们可以通过减去下限和上限来轻松评估积分（记住微积分的基本定理）：
- en: '[PRE92]'
  id: totrans-481
  prefs: []
  type: TYPE_PRE
  zh: '[PRE92]'
- en: 'The result is as follows:'
  id: totrans-482
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE93]'
  id: totrans-483
  prefs: []
  type: TYPE_PRE
  zh: '[PRE93]'
- en: 'And this is how we get probabilities from the `pdf` without the need to perform
    simulations. Let''s look at one last example to make this clear by connecting
    it with an earlier result. A few pages earlier, for the same population, we asked,
    *What is the probability of finding a male taller than 190 cm?* We got the answer
    by performing simulations. Now, we can get the exact probability like so:'
  id: totrans-484
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是我们如何从`pdf`中获得概率，而无需进行模拟。让我们看最后一个例子，通过与之前的结果联系起来，来澄清这一点。几页前，对于同一人群，我们问道，*找到一个身高超过190厘米的男性的概率是多少？*我们通过进行模拟得到了答案。现在，我们可以这样获得确切的概率：
- en: '[PRE94]'
  id: totrans-485
  prefs: []
  type: TYPE_PRE
  zh: '[PRE94]'
- en: 'The result is as follows:'
  id: totrans-486
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE95]'
  id: totrans-487
  prefs: []
  type: TYPE_PRE
  zh: '[PRE95]'
- en: If you compare this with the result we got earlier, you will see it is virtually
    the same. However, this approach is better since it's exact and does not require
    us to perform any computationally heavy or memory-consuming simulations.
  id: totrans-488
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您将此与我们之前得到的结果进行比较，您会发现它几乎是一样的。然而，这种方法更好，因为它是精确的，不需要我们进行任何计算密集或占用内存的模拟。
- en: 'Exercise 8.04: Using the Normal Distribution in Education'
  id: totrans-489
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习8.04：在教育中使用正态分布
- en: In this exercise, we'll use a normal distribution object from `scipy.stats`
    and the `cdf` and its inverse, `ppf`, to answer questions about education.
  id: totrans-490
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将使用`scipy.stats`中的正态分布对象和`cdf`及其逆`ppf`来回答教育问题。
- en: 'In psychometrics and education, it is a well-known fact that many variables
    relevant to education policy are normally distributed. For instance, scores in
    standardized mathematics tests follow a normal distribution. In this exercise,
    we''ll explore this phenomenon: in a certain country, high school students take
    a standardized mathematics test whose scores follow a normal distribution with
    the following parameters: *mean = 100*, *standard deviation = 15*. Follow these
    steps to complete this exercise:'
  id: totrans-491
  prefs: []
  type: TYPE_NORMAL
  zh: 在心理测量学和教育领域，一个众所周知的事实是，许多与教育政策相关的变量都呈正态分布。例如，标准化数学测试的分数遵循正态分布。在这个练习中，我们将探讨这一现象：在某个国家，高中学生参加一项标准化数学测试，其分数遵循以下参数的正态分布：*平均值=100*，*标准差=15*。按照以下步骤完成这个练习：
- en: 'Import NumPy, Matplotlib, and `scipy.stats` following the usual conventions:'
  id: totrans-492
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照通常的惯例导入NumPy、Matplotlib和`scipy.stats`：
- en: '[PRE96]'
  id: totrans-493
  prefs: []
  type: TYPE_PRE
  zh: '[PRE96]'
- en: 'Use the `scipy.stats` module to produce an instance of a normally distributed
    random variable, named `X_rv`, with *mean = 100* and *standard deviation = 15*:'
  id: totrans-494
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`scipy.stats`模块生成一个名为`X_rv`的正态分布随机变量实例，其*平均值=100*和*标准差=15*：
- en: '[PRE97]'
  id: totrans-495
  prefs: []
  type: TYPE_PRE
  zh: '[PRE97]'
- en: 'Plot the probability distribution of *X*:'
  id: totrans-496
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 绘制*X*的概率分布：
- en: '[PRE98]'
  id: totrans-497
  prefs: []
  type: TYPE_PRE
  zh: '[PRE98]'
- en: 'The output will be as follows:'
  id: totrans-498
  prefs: []
  type: TYPE_NORMAL
  zh: 输出将如下：
- en: '![Figure 8.21: Probability distribution of tests scores'
  id: totrans-499
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.21：测试分数的概率分布'
- en: '](image/B15968_08_21.jpg)'
  id: totrans-500
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_21.jpg)'
- en: 'Figure 8.21: Probability distribution of tests scores'
  id: totrans-501
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.21：测试分数的概率分布
- en: 'The Ministry of Education has decided that the minimum score for someone to
    be considered *competent* in mathematics is 80\. Use the `cdf` method to calculate
    the proportion of students that will get a score above that score:'
  id: totrans-502
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 教育部决定，被认为在数学上*胜任*的人的最低分数是80。使用`cdf`方法计算将获得高于该分数的学生的比例：
- en: '[PRE99]'
  id: totrans-503
  prefs: []
  type: TYPE_PRE
  zh: '[PRE99]'
- en: 'The result is as follows:'
  id: totrans-504
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE100]'
  id: totrans-505
  prefs: []
  type: TYPE_PRE
  zh: '[PRE100]'
- en: Around 91% of the students are considered *competent* in mathematics.
  id: totrans-506
  prefs: []
  type: TYPE_NORMAL
  zh: 大约91%的学生在数学上被认为是*胜任*的。
- en: 'A very selective university wants to set very high standards for high school
    students that are admitted to their programs. The policy of the university is
    to only admit students with mathematics scores in the top 2% of the population.
    Use the `ppf` method (which is essentially the inverse function of the `cdf` method)
    with an argument of *1 - 0.02 = 0.98* to get the cut-off score for admission:'
  id: totrans-507
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个非常严格的大学希望为被录取到他们的项目的高中生设定非常高的标准。该大学的政策是只录取人口中数学分数处于前2%的学生。使用`ppf`方法（本质上是`cdf`方法的逆函数）并使用参数*1-0.02=0.98*来获得录取的分数线：
- en: '[PRE101]'
  id: totrans-508
  prefs: []
  type: TYPE_PRE
  zh: '[PRE101]'
- en: 'The result should be as follows:'
  id: totrans-509
  prefs: []
  type: TYPE_NORMAL
  zh: 结果应该如下：
- en: '[PRE102]'
  id: totrans-510
  prefs: []
  type: TYPE_PRE
  zh: '[PRE102]'
- en: In this exercise, we used a normal distribution and the `cdf` and `ppf` methods
    to answer real-world questions about education policy.
  id: totrans-511
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们使用了正态分布和`cdf`和`ppf`方法来回答关于教育政策的现实问题。
- en: Note
  id: totrans-512
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To access the source code for this specific section, please refer to [https://packt.live/3eUizB4](https://packt.live/3eUizB4).
  id: totrans-513
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问此特定部分的源代码，请参阅[https://packt.live/3eUizB4](https://packt.live/3eUizB4)。
- en: You can also run this example online at [https://packt.live/2VFyF9X](https://packt.live/2VFyF9X).
  id: totrans-514
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以在[https://packt.live/2VFyF9X](https://packt.live/2VFyF9X)上在线运行此示例。
- en: 'In this section, we learned about continuous random variables, as well as the
    most important distribution of these types of variables: the normal distribution.
    The key takeaway from this section is that a continuous random variable is determined
    by its probability density function, which is, in turn, determined by its parameters.
    In the case of the normal distribution, its two parameters are the mean and the
    standard deviation. We used an example to demonstrate how these parameters influence
    the shape of the distribution.'
  id: totrans-515
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们学习了关于连续随机变量的知识，以及这些类型变量的最重要的分布：正态分布。本节的关键是，连续随机变量由其概率密度函数确定，而概率密度函数又由其参数确定。在正态分布的情况下，它的两个参数是平均值和标准差。我们使用一个例子来演示这些参数如何影响分布的形状。
- en: Another important takeaway is that you can use the area below the pdf to calculate
    the probability of certain events. This is true for any continuous random variable,
    including, of course, those that follow a normal distribution.
  id: totrans-516
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个重要的收获是，你可以使用概率密度函数下方的面积来计算某些事件的概率。这对于任何连续随机变量都是成立的，当然也包括遵循正态分布的随机变量。
- en: Finally, we also learned about the empirical rule for the normal distribution,
    which is a good-to-know *rule of thumb* if you want to quickly get a sense of
    the proportion of values that will lie *k* standard deviations away from the mean
    of the distribution.
  id: totrans-517
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们还学习了正态分布的经验法则，这是一个很好的*经验法则*，如果你想快速了解分布均值附近*k*个标准差处的值的比例。
- en: Now that you are familiar with this important distribution, we will continue
    using it in the next chapter when we encounter it again in the context of the
    **central limit theorem**.
  id: totrans-518
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经熟悉了这个重要的分布，我们将在下一章中继续使用它，当我们再次在**中心极限定理**的背景下遇到它时。
- en: 'Activity 8.01: Using the Normal Distribution in Finance'
  id: totrans-519
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 活动8.01：在金融中使用正态分布
- en: In this activity, we'll explore the possibility of using the normal distribution
    to understand the daily returns of the stock price. By the end of this activity,
    you should have an opinion regarding whether the normal distribution is an appropriate
    model for the daily returns of stocks.
  id: totrans-520
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个活动中，我们将探讨使用正态分布来理解股票价格的每日收益的可能性。在活动结束时，你应该对正态分布是否适合描述股票的每日收益有自己的看法。
- en: 'In this example, we will use daily information about Microsoft stock provided
    by Yahoo! Finance. Follow these steps to complete this activity:'
  id: totrans-521
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，我们将使用Yahoo! Finance提供的有关微软股票的每日信息。按照以下步骤完成此活动：
- en: Note
  id: totrans-522
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: The dataset that's required to complete this activity can be found at [https://packt.live/3imSZqr](https://packt.live/3imSZqr).
  id: totrans-523
  prefs: []
  type: TYPE_NORMAL
  zh: 完成此活动所需的数据集可以在[https://packt.live/3imSZqr](https://packt.live/3imSZqr)找到。
- en: Using pandas, read the CSV file named `MSFT.csv` from the `data` folder.
  id: totrans-524
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用pandas从`data`文件夹中读取名为`MSFT.csv`的CSV文件。
- en: Optionally, rename the columns so they are easy to work with.
  id: totrans-525
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可选地，重命名列，使它们易于处理。
- en: Transform the `date` column into a proper `datetime` column.
  id: totrans-526
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`date`列转换为适当的`datetime`列。
- en: Set the `date` column as the index of the DataFrame.
  id: totrans-527
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`date`列设置为DataFrame的索引。
- en: In finance, the daily returns of a stock are defined as the percentage change
    of the daily closing price. Create the `returns` column in the MSFT DataFrame
    by calculating the percent change of the `adj close` column. Use the `pct_change`
    series pandas method to do so.
  id: totrans-528
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在金融中，股票的每日收益被定义为每日收盘价的百分比变化。通过计算`adj close`列的百分比变化，创建MSFT DataFrame中的`returns`列。使用`pct_change`系列pandas方法来实现。
- en: Restrict the analysis period to the dates between `2014-01-01` and `2018-12-31`
    (inclusive).
  id: totrans-529
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将分析期限限制在`2014-01-01`和`2018-12-31`（包括在内）之间的日期。
- en: Use a histogram to visualize the distribution of the returns column, using 40
    bins. Does it look like a normal distribution?
  id: totrans-530
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用直方图可视化`returns`列的分布，使用40个箱子。它看起来像正态分布吗？
- en: 'The output should look like this:'
  id: totrans-531
  prefs: []
  type: TYPE_NORMAL
  zh: 输出应该如下所示：
- en: '![Figure 8.22: Histogram of returns of the MSFT stock'
  id: totrans-532
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.22：微软股票收益的直方图'
- en: '](image/B15968_08_22.jpg)'
  id: totrans-533
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_22.jpg)'
- en: 'Figure 8.22: Histogram of returns of the MSFT stock'
  id: totrans-534
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.22：微软股票收益的直方图
- en: 'Calculate the descriptive statistics of the `returns` column:'
  id: totrans-535
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算`returns`列的描述统计信息：
- en: '[PRE103]'
  id: totrans-536
  prefs: []
  type: TYPE_PRE
  zh: '[PRE103]'
- en: Create a random variable named `R_rv` that will represent *The daily returns
    of the MSFT stock*. Use the mean and standard deviation of the return column as
    the parameters for this distribution.
  id: totrans-537
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`R_rv`的随机变量，它将代表*微软股票的每日收益*。使用收益列的平均值和标准差作为该分布的参数。
- en: 'Plot the distribution of `R_rv` and the histogram of the actual data. Then,
    use the `plt.hist()` function with the `density=True` parameter so that both the
    real data and the theoretical distribution appear in the same scale:![Figure 8.23:
    Histogram of returns of the MSFT stock'
  id: totrans-538
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 绘制`R_rv`的分布和实际数据的直方图。然后，使用`plt.hist()`函数和`density=True`参数，使真实数据和理论分布以相同的比例出现：![图8.23：微软股票收益的直方图
- en: '](image/B15968_08_23.jpg)'
  id: totrans-539
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_08_23.jpg)'
- en: 'Figure 8.23: Histogram of returns of the MSFT stock'
  id: totrans-540
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.23：微软股票收益的直方图
- en: After looking at the preceding plot, *would you say that the normal distribution
    provides an accurate model for the daily returns of Microsoft stock?*
  id: totrans-541
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在查看前面的图后，*你会说正态分布是否为微软股票的每日收益提供了准确的模型？*
- en: 'Additional activity: Repeat the preceding steps with the `PG.csv` file, which
    contains information about the Procter and Gamble stock.'
  id: totrans-542
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 额外活动：使用包含宝洁公司股票信息的`PG.csv`文件重复前面的步骤。
- en: This activity was about observing real-world data and trying to use a theoretical
    distribution to describe it. This is important because by having a theoretical
    model, we can use its known properties to arrive at real-world conclusions and
    implications. For instance, you could use the *empirical rule* to say something
    about the daily returns of a company, or you could calculate the probability of
    losing a determined amount of money in a day.
  id: totrans-543
  prefs: []
  type: TYPE_NORMAL
  zh: 这个活动是关于观察现实世界的数据，并尝试使用理论分布来描述它。这很重要，因为通过拥有一个理论模型，我们可以利用其已知的特性得出现实世界的结论和影响。例如，你可以使用*经验法则*来描述公司的每日收益，或者你可以计算一天内损失一定金额的概率。
- en: Note
  id: totrans-544
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: The solution for this activity can be found on page 684.
  id: totrans-545
  prefs: []
  type: TYPE_NORMAL
  zh: 此活动的解决方案可以在第684页找到。
- en: Summary
  id: totrans-546
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: This chapter gave you a brief introduction to the branch of mathematics regarding
    probability theory.
  id: totrans-547
  prefs: []
  type: TYPE_NORMAL
  zh: 本章简要介绍了概率论的数学分支。
- en: 'We defined the concept of probability, as well as some of its most important
    rules and associated concepts such as experiment, sample space, and events. We
    also defined the very important concept of random variables and provided examples
    of the two main discrete and continuous random variables. Later in this chapter,
    we learned how to create random variables using the `scipy.stats` module, which
    we also used to generate the probability mass function and the probability density
    function. We also talked about two of the most important random variables in the
    (literal) universe: the normal distribution and the binomial distribution. These
    are used in many applied fields to solve real-world problems.'
  id: totrans-548
  prefs: []
  type: TYPE_NORMAL
  zh: 我们定义了概率的概念，以及一些最重要的规则和相关概念，如实验、样本空间和事件。我们还定义了随机变量这一非常重要的概念，并举例说明了两种主要的离散和连续随机变量。在本章的后面，我们学习了如何使用`scipy.stats`模块创建随机变量，我们还用它来生成概率质量函数和概率密度函数。我们还讨论了宇宙中两个最重要的随机变量：正态分布和二项分布。这些在许多应用领域被用来解决现实世界的问题。
- en: This was, of course, a brief introduction to the topic, and the goal was to
    present and make you familiar with some of the basic and foundational concepts
    in probability theory, especially those that are crucial and necessary to understand
    and use inferential statistics, which is the topic of the next chapter.
  id: totrans-549
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，这只是对这个主题的简要介绍，目标是向您介绍并让您熟悉概率论中一些基本和基础概念，特别是那些对理解和使用推断统计学至关重要的概念，而这将是下一章的主题。
- en: WUE84
  id: totrans-550
  prefs: []
  type: TYPE_NORMAL
  zh: WUE84
- en: JNP97
  id: totrans-551
  prefs: []
  type: TYPE_NORMAL
  zh: JNP97
