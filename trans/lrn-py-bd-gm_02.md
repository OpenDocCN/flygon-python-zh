# 第二章：学习 Python 的基础知识

Python 不需要在游戏开发中，设计和分析被认为是编程之前完成的步骤。设计和分析要求我们集思广益，模拟程序，并格式化输入。所有这些程序都与数据有关。数据可以是简单的数字列表，也可以是复杂的天气历史。这些数据有自己的类型和结构。数据需要有自己的存储位置，以便我们可以引用它。Python 提供了数据的抽象形式，以对象的形式，这样我们可以创建嵌套的数据结构。

本章将带您体验 Python 中的核心编程范式的过山车之旅。我们将首先学习可用的不同数据类型以及将它们捕捉到变量或存储单元中的方法。我们将学习使用`math`模块进行不同的数学运算（算术和三角）的方法。在本章结束时，我们将使用在本章学到的知识制作我们的第一个游戏-井字棋。

在本章中，我们将涵盖以下主题：

+   处理值和数据

+   变量和关键字

+   运算符和操作数

+   在代码中编写注释

+   请求用户输入

+   字符串操作

+   构建你的第一个游戏-井字棋

+   可能的错误和警告

+   游戏测试和可能的修改

# 技术要求

您需要满足以下要求才能充分获得本章的全部好处：

+   您将需要 Python **IDLE**

+   本章的代码资产可以在本书的 GitHub 存储库中找到：[`github.com/PacktPublishing/Learning-Python-by-building-games/tree/master/Chapter02`](https://github.com/PacktPublishing/Learning-Python-by-building-games/tree/master/Chapter02)

观看以下视频以查看代码的运行情况：

[`bit.ly/2o6Kto2`](http://bit.ly/2o6Kto2)

# 处理值和数据

软件的评价取决于其处理数据的能力。每个程序都有自己的数据库设计和实现。数据库是一个模式，数据以这样的方式存储，以便可以快速和安全地检索和操作。据推测，像 Facebook 和 Twitter 这样的社交网络每天收集 17 亿人的数据。这么庞大的数据量，每天都在收集，应该得到妥善处理，因为我们没有足够的内存来存储和处理它。因此，Python 提供了灵活的内置方法，以便对这些数据集进行映射、过滤和减少，以便可以更快地存储和获取以进行处理。

Python 在存储数据方面非常快速。它与 Hadoop 等大数据平台的集成，继承了其兼容性，是我们在大型数据集中使用 Python 的主要原因。强大的包，如 NumPy、pandas 和 scikit-learn，为当今的数据和分析需求提供数据支持。

值是程序计算的一些属性的表示。在这里，属性是任何对象的属性。例如，当我们谈论一个人时，我们通过姓名、年龄和身高来引用他们。这些属性有一个*r*-value（属性的内容）和一个*l*-value（内存位置）与它们相关联。*属性的内容*指的是存储为变量内容的值，而*内存位置*指的是存储值的物理位置。例如，`name = "Python"`有一个`name`变量作为属性；它的*r*-value 是`Python`，它的*l*-value 是 Python 解析器自动分配的唯一 ID，作为名称属性的内存位置。

在 Python 中，值以对象的形式存储。对象有四个特点：ID、命名空间、类型和值。让我们看一个简单的例子，揭示对象的这些特点。

```py
>>> player_age = 90
```

当创建`player_age`变量时，它的实例被创建，我们称之为对象。每当创建一个对象时，它都会接收一个唯一的内存存储位置，即一个唯一的 ID 号，并动态地分配一个类型，即一个整数，因为我们将 90 分配给它。之后，将 player 变量添加到命名空间中，以便我们可以检索其值，即 90。以下图尝试简化这个解释：

![](img/f8339e73-d20e-4f62-af02-a35b4ae74219.png)

每当执行任何赋值语句时，解析器都会创建一个对象，该对象从中获取唯一的内存 ID，我们可以引用变量的值。由于 Python 是一种动态类型的语言，它通过分析分配给变量的值动态地分配变量的类型。最终，它将该变量添加到全局命名空间，以便在您想要获取该变量时，可以使用变量名。在这里，`memory_ID`是指向对象值的位置。一些编程语言，如 C，称之为指针。

每个这些值都有与之关联的类型。`1`是一个整数，`a`是一个字符，`Hello World`是一个字符串。`Hello World`是一系列字符，因为它定义了一系列字符，所以它被称为字符串。在前一章中，我们看到了一个示例，我们要求用户输入。每当用户输入一些内容时，它被视为字符串。这些值在编程中定义对象。让我们以鹦鹉为例。它将有一个作为字符串的名称，一个作为整数的年龄，以及一个作为男性或女性的性别，用*M*或*F*表示，这些都是字符。在 Python 中，字符也被表示为字符串。为了验证这一点，我们有`type`方法。`type`方法表示如下：

```py
>>> type('a')
```

前面命令的输出将是`<class 'str'>`，这意味着字符也是字符串的一部分。要检查任何值的类型，我们可以使用相同的`type`方法：

```py
>>> type(1)
>>> type('Hello World')
```

前面的命令将分别显示类别为`int`和`str`。

现在，让我们谈谈数字。数字有两种类型：整数和小数。正如我们所看到的，整数是整数，但小数是浮点数。我们在 Python 中称小数为浮点数，因为它们以浮点格式表示，如下所示：

```py
>> type(3.4)
```

前面命令的输出是`<class 'float'>`。

您可以使用`print`方法在终端中打印这些值。`print`方法在括号内接受值，并在解释器中给出结果，如下所示：

```py
>>> print(1)
```

如果您在`print`语句中放入`1`，它将打印`1`作为数字。但是，当您在双引号中放入`1`时，它将打印`1`作为字符串，如下所示：

```py
>> print("1")
<class 'str'>
```

任何数字、文本或特殊符号，如@、$、%或*，您放在单引号或双引号中最终都将成为字符串。以下是字符串的一个示例：`1`、`Hello`、`False`、`#$(#`。

当您在`print`语句中的两个值之间放置逗号时，它会在它们之间放置一个空格，如下所示：

```py
>>> print("abc","abc")
```

前面的代码将给出`abc abc`的输出，但它们不再被视为字符串。这是我们在 Python 中看到的第一个语义错误。我们将`abc`作为字符串传递，但结果是一个非类型：

```py
>>> type(print("abc","abc"))
<class 'NoneType'>
```

这是一个语义错误的完美例子。我们得到了输出而没有任何错误，但是我们没有得到我们想要的结果。

您还可以检查整数。不可能用逗号在它们之间打印整数。Python 解释器将逗号转换为传递的每个值之间的空格：

```py
>>> print(0,000,000)
```

这个命令将给我们一个`0 0 0`的结果。每个逗号都被转换为空格并打印出来。如果您检查从函数返回的值的类型，它也将是`NoneType`。

现在我们知道了值和类型，让我们熟悉一下变量和关键字。

# 变量和关键字

编程就是接受和操作我们学到的值。我们在接受和操作这些值时使用变量，以便将来可以引用它们。变量就像盒子，您可以在其中放入不同的东西，并在需要时取出。变量是通过名称创建的，并为其分配一个值。

我们使用等号（`=`）来进行赋值语句。变量是通过赋值语句创建的；例如：

```py
>>> myAge = 24
>>> info = "I love Python"
>>> isHonest = True
```

在这里，我们使用赋值语句创建了三个变量。在第一条命令中，我们创建了`myAge`变量并为其分配了一个整数。在 Python 中，您不必显式指定变量的类型，因为 Python 会在内部执行此操作。这就是使 Python 成为动态类型语言的原因。在第二条命令中，我们创建了`info`变量并为其分配了一个字符串。最后，我们创建了`isHonest`变量并为其分配了一个布尔值。

布尔类型是逻辑类型。它们要么是`True`，要么是`False`。创建布尔变量与创建其他变量相同，例如，`is_hungry = True`。

变量是基本的数据存储单元。我们一次可以将一个值分配给一个变量。每当您将另一个值分配给相同的变量名称时，它将覆盖原始值。例如，在这里，我们将`info`变量设置为字符串，但是如果我用另一个值替换它，比如`integer`，这是有效的：

```py
>>> info = 23
```

如果您在 Python 中创建变量，它将为每个变量创建单独的内存引用。因此，每当您用另一个值替换相同的变量时，该特定位置的值将被检索并用新值覆盖。变量名称是保留内存位置中值的指针。您不能在一个变量中存储多个值。您必须使用高级数据结构来实现这一点。我们将在接下来的章节中介绍这一点（第四章：数据结构和函数：用 AI 的味道完善您的游戏）。

将多个变量分配给不同的变量可以在一行代码中完成。我们可以用单个赋值语句来分配它们。变量的名称应该在左侧给出，它们之间应该用逗号隔开。您可以使用以下命令在一行中创建尽可能多的具有不同数据类型的变量：

```py
>>> even, odd, num = 2, 3, 10
```

您可以通过直接在终端中写入变量的名称来查看变量的值：

```py
>>> even
```

如果您只在脚本中写变量的名称，那么不会打印出值。相反，它会终止。如果要在屏幕上打印出东西，您必须使用`print()`方法。要打印任何变量的值，请在 shell 或脚本中键入`print(variable_name)`，如下所示：

```py
>>> print(even)
```

如果要查看存储在变量中的值的类型，可以调用`type()`方法。为此，请将变量的名称放在括号内：

```py
>>> type(even)
```

上述命令将给出`<class 'int'>`的输出，这意味着可以在变量中存储整数值。

我们还可以在 Python 中将相同的值分配给多个变量。在上述命令中，我们不是分配多个值，而是将单个值分配给它，如下所示：

```py
>>> even, num = 10
```

在上述命令中，我们将整数值 10 分配给了两个不同的变量`even`和`num`。

Python 不需要变量实例化和声明。因此，在 Python 中不需要保留内存空间。当我们使用赋值语句创建变量时，Python 会在内部执行此操作。

Python 已经将 33 个单词保留为关键字，用于特定功能。我们不能使用它们来命名变量。Python 会使用内置脚本检查变量的名称与这些关键字，每当它检测到其中一个单词时，它将抛出语法错误，如下例所示：

```py
>>> and = 23
```

前面的命令不会被执行，也不能用作变量名，因为它是一个关键字。Python 用它来执行一些逻辑操作。但是，如果您创建一个名为`And`的变量并为其赋值，Python 将为您创建`And`变量。对于 Python 来说，`And`和`and`是不同的。它是大小写敏感的语言。

为了避免变量名的任何问题，我们可以遵循一些简单的规则。我们将在下一节中介绍这些规则。

# 变量命名规则

通常我们选择有意义的变量名，因为从长远来看，可能会出现我们完全忘记代码顺序和流程的情况，而没有适当名称的变量会造成混乱。尽管您可以按照一些规则创建任何名称的变量，但强烈建议创建有意义的变量名。比如，您正在制作一个游戏，想要为玩家的生命值创建一个变量；将该变量命名为`a`不是一个好的做法。相反，您应该将其命名为`player_Health`，这样对您和可能查看您代码的人来说，这个变量中的代码是清晰的。

通常从编程的角度来看，有两种有效地给变量命名的方式。其中两种被广泛称为`驼峰命名法`和`帕斯卡命名法`。观察先前定义的变量的命名约定，`playerHealth`，变量的第一个字符应该是小写的，其他所有字符都应该是大写的。同样，在`帕斯卡命名法`中，变量的每个第一个字符都应该是大写的。因此，使用`帕斯卡命名法`，先前定义的变量可以写成`PlayerHealth`。您可以使用其中任何一种来命名您的变量。

您的变量名可以是任意长度。它可以包含大写字母（A-Z）、小写字母（a-z）、数字（0-9）和下划线（_）的组合。下划线用于在两个单词之间区分变量中的两个实体。例如，`player_Health`变量由两个单词组成。我们在它们之间使用下划线。或者，您也可以使用`驼峰命名法`，其中您将第一个单词以小写字母开头，第二个单词的第一个字母大写，例如，`playerHealth`。

我们还可以在变量名的开头使用下划线。如果它被用作其他库的库，我们会在我们的代码中使用它。我们也可以在递归语句中使用它，就像这个例子：

```py
>>> _age = 34
```

在命名变量时，我们需要遵循一些规则，否则 Python 会将其声明为非法并抛出语法错误。以下截图显示了一些非法的赋值语句：

![](img/32303842-b5f5-4db7-8f21-fb372bff8957.png)

为了消除前述错误，我们必须遵循一些规则。有些是强制性的，而有些只是良好的实践：

+   我们给变量取一个有意义的名字。将年龄变量命名为`age`比将其命名为`a`更有意义。

+   在命名变量时，我们不能使用特殊符号（@、#、$和%）。例如，n@me 不是一个有效的变量名。

+   变量名不应以数字开头。45 age 不是一个合适的变量名，Python 会报错。

+   使用大写名称声明常量，例如，`>>> PI = 3.14`。

+   使用`驼峰命名法`创建变量名是一个好的做法，例如，`>>> myCountry = "USA"`。

现在我们已经了解了变量和关键字是什么，以及在命名它们时要遵循的一些规则。现在，让我们继续看看运算符和操作数是什么。

# 运算符和操作数

数学和编程是两个密切相关但又不同的领域。前者处理理论并提供制定的原则来解决任何问题领域，而后者处理使用这些原则来解决业务领域。编程就是接受数据并使用模型以及适当的数学运算对其进行操作。运算符用于执行这些操作。Python 中有算术和逻辑运算符。

运算符是执行加法、乘法、除法等计算的符号。诸如`+`、`-`和`/`之类的符号用于执行这些操作。运算符应用的值称为操作数。以下是一些运算符的示例：

```py
>>> 3 + 4
>>> 14 - 5 - 9
>>> 2 * 4
```

在前面的例子中，第一次操作的结果是 7，第二次操作的结果是 0，最后一次操作的结果是 8。您可以在 shell 中添加或减去任意数量的数字。在这里，所有数字都是操作数，而`+`、`-`和`*`等符号是运算符。

另一个 Python 中重要的运算符是除法（`/`）。在 Python 3.x 中，除法操作的结果是浮点数，例如：

```py
>>> 10 / 4
```

前面的操作给出了一个结果为 2.5。这与使用计算器得到的结果相同。

在 Python 2.x 中，解释器会截断小数部分，并给出一个结果为 2。如果您想在 Python 3.x 中获得相同的结果，应该使用地板除法（`//`）；例如：

```py
>>> 10 // 4
```

前面的操作将给我们一个结果为 2，而不是 2.5。

让我们回顾一下我们迄今为止学到的内容，即值、变量和运算符。让我们将所有这些组合成一个语句。这被称为表达式：

```py
>>> x = 10 + 2 * 5
>>> x
```

您可以将所有这些组合在一起，以制作任何类型的表达式。赋值操作是使用最简单的表达式。我们在创建变量时看到了赋值操作。

当表达式中使用多个运算符时，这些运算的顺序变得重要。我们将在下一节中介绍操作的顺序。

# 操作顺序

让我们回顾一下我们在学校时学到的基本数学。您可能听说过 BODMAS 规则或 PEDMAS 规则。每当我们的表达式中使用多个运算符时，都会按照这个优先级规则执行操作。括号内的操作、指数、除法、乘法、加法和减法按照这个顺序执行：

+   括号/方括号：这个符号具有最高的优先级，这意味着括号内的操作首先完成。通过在表达式中使用括号，您告诉解释器强制执行某个表达式。例如，在`(10-5)+5*6`中，括号内的操作首先完成，即*10-5*，然后进行乘法。

+   指数/幂：在括号内的操作完成后，指数操作会首先执行。`9**0+1`的输出不是 9，而是 1。首先执行指数操作，然后执行加法。

+   除法：除法操作在指数操作之后进行，包括除法，如果它不在括号内。例如，`10 / 2 + 3 + 9 / 3`是 11 而不是 5。如果表达式是`10 / (2 +3) + 9 /3`，输出将是 5。

+   乘法：它的优先级与除法相同。但是，如果表达式中既有除法又有乘法，操作是从左到右顺序执行的。从左到右扫描，如果我们在除法之前得到乘法，就先执行乘法。例如，`3*4 / 3`的输出是`4`而不是 3.999。

+   加法和减法：这两个操作也具有相同的优先级。因此，我们根据从左到右扫描的顺序执行这些操作。例如，在`5-5+6`中，我们首先执行减法，然后执行加法，得到 6。

如果您仍然对 BODMAS/PEDMAS 规则感到困惑，您可以简单地使用括号来确保获得预期的结果。在下一节中，我们将学习两个重要的运算符：`//`和`%`。前者称为地板除法，而后者称为模运算符。

# 模运算符

之前，我们看到了如何使用地板除法(`//`)以及它如何为我们提供除法运算的商。但是，如果您想要除法的余数，可以使用取模运算符。取模运算符产生第一个操作数除以第二个操作数时的余数。取模运算符的符号是百分号(`%`)。以下屏幕截图显示了两个操作：第一个是地板除法，将得到商，而下一个是取模运算，将得到除法的余数：

![](img/150412e6-94be-4faa-9bd0-32e2e6986fc7.png)

当我们想要搜索数字模式并创建可以根据该模式划分数字的程序时，取模运算符非常有用。例如，我们可以检查任何数字与 2 之间的除法余数，以确定该数字是偶数还是奇数：

```py
>>> 5 % 2
```

由于前面的操作给出了余数为 1，5 可以被认为是一个奇数。

前面的所有操作都非常基本，不需要任何艰苦的计算。但是，我们知道计算机以处理复杂任务而闻名。因此，在下一节中，我们将学习`math`模块，它能够执行复杂的数学运算，例如计算三角函数和复杂方程。

# 使用数学模块

数学不仅仅局限于加法和乘法。到目前为止，我们已经学习了各种算术运算。我们还没有涉及逻辑运算符和比较，因为这些将在下一章中介绍。为了涵盖许多数学领域，Python 给了我们一个强大的库，称为`math`模块。我们称包含代码的文件为模块。这些库也被称为内置库，因为它们在安装 Python 时预先打包。

它们是由 Python 制作的，我们可以随时在我们的代码中调用它们，而无需手动安装。如果要使用任何内置库的代码，必须首先调用它。调用它们意味着导入它们。要导入并使用内置库，我们使用`import`关键字。正如您可能还记得的，从上一章中，它是 Python 中具有特定目的的保留字。因此，`import`关键字将任何库导入您的代码中。例如，如果要导入`math`模块，只需编写以下内容：

```py
>>> import math
```

您将立即看到下一行有一个空的 shell，就像这样：`>>>`。

这只是指定您正在导入它。导入语句与打印或输入方法不同，后者会立即给我们一个响应。我们应该从该模块中调用某些内容，以便看到任何响应或结果。`math`模块为我们提供了许多操作。可以通过以下步骤访问这些操作：

1.  打开您的 IDLE 并按*F1*打开文档。您将看到以下窗口：

![](img/379348e2-3ebf-4de9-94df-af2e49cd1add.png)

1.  现在，点击模块。您将看到一个包含模块列表的新窗口：

![](img/fec0ac60-a9f1-4d65-b02d-f16e3f0f455b.png)

1.  从该选项卡搜索数学模块，或者如果您想浏览以字母`m`开头的模块列表，只需在键盘上按*M*：

![](img/801ce731-abb7-479d-8898-ef017a539a56.png)

有很多方法可以使用！不要被术语方法所压倒；我们已经专门介绍了面向对象编程的部分，我们将学习如何创建自己的方法。现在，只需将方法视为我们用来创建表达式的操作。数学模块提供的方法也将执行简单的算术运算和许多其他复杂的运算。如果您想要获得平方根，我们没有特定的运算符来执行，也不能执行复杂的数学运算；相反，您必须使用数学模块。我们将在下面的示例中查看平方根。

要获得一个数字的平方根，我们可以使用`sqrt`方法。查看`sqrt`方法的文档，了解更多信息并学习如何调用它。这非常容易！首先，我们写`math`，然后是一个句点（`.`），表示我们想要从 math 模块中使用某些东西并使用`sqrt`方法：

```py
>>> import math
>>> math.sqrt(49)
```

`49`的平方根是 7。我们的解释器打印出 7.0，因为`sqrt`执行了一个浮点运算。

如果您没有导入`math`模块，而是直接调用了`sqrt`，您将收到以下错误：

![](img/c2a4dca0-33d7-49c1-89de-445070cc088d.png)

您可能还记得我们讨论`print()`函数时，我们没有使用任何模块来调用它，因为它是一个内置函数。但是，这个`sqrt()`函数不是内置的。它来自 Python 的内置库。虽然我们不必像其他第三方模块一样安装它，但在使用它提供的任何功能之前，我们必须导入它。Python 提供的所有模块都是小写的。

我们可以从 math 模块调用一系列函数和常量。这使我们能够进行支持复杂数学计算的多种操作。如果要打印 PI 的值，可以使用`math`模块，如下所示：

1.  首先，我们用`>>> import math`导入它。

1.  然后，我们使用`module_name`并提供一个句点（`.`）来指定我们要使用该模块和我们要执行的类型操作，例如`>>> math.pi`。

您可以使用数学函数执行代数、对数、三角、双曲和各种其他操作。但是，这个模块不能对复数执行数学运算，例如`z = a + ib`。

对于那些复数类型，我们必须导入`cmath`模块。导入和使用这个模块也类似于`math`模块。

如果您想使用`math`模块提供的函数与`print()`或`input()`的调用，而不需要加句点，可以使用以下命令：

```py
>>> from math import *
```

在前面的命令中，`*`表示您想要导入所有内容。它经典地表示*从 math 模块中导入所有内容*。现在，如果您想从 math 模块调用任何函数，可以直接调用，类似于我们对输入和打印函数所做的操作：

```py
>>> factorial(4)
```

前面的函数将被完美执行，并给我们一个结果为 24。

也许您会想为什么模块的概念没有在本书的开头解释。很简单！我们刚刚学习了运算符、操作和表达式，这意味着很容易与数学模块相关联。我们从`math`模块调用的每个函数都包含运算符、操作数和表达式，但它的实现对我们来说是隐藏的。例如，我们只需使用`sqrt`函数执行平方根操作，但我们不知道如何用表达式和逻辑来做平方根。在接下来的章节中，当我们涵盖流程控制和函数时，我们将学习这个。因此，模块为我们提供了一种执行高级操作的方式，而无需知道它们是如何工作的。但是，如果您想制作自己的库和模块，那么接下来的章节将帮助您。

如果您想了解有关模块和函数的更多信息，可以简单地使用`help`命令。Python `help`命令将为您提供内置函数、模块和关键字的完整文档列表，如以下示例所示：

```py
>>> help([object])
>>> help(input)
Help on built-in function input in module builtins:

input(prompt=None, /)
    Read a string from standard input. The trailing newline is stripped.

    The prompt string, if given, is printed to standard output without a
    trailing newline before reading input.

    If the user hits EOF (*nix: Ctrl-D, Windows: Ctrl-Z+Return), raise 
    EOFError.

    On *nix systems, readline is used if available.
```

关于值和类型的讨论就到此为止。现在，让我们看看如何使我们的代码更易读和可重用，也就是说，其他人应该能够轻松阅读我们的代码。我们谈到了在命名变量时应遵循的规则和约定，这也导致了可读性。有两种使代码易读的方法：

+   在程序中写注释。

+   Pythonic 的方法是创建一个函数。

我们可以通过注释向程序添加注释，这将在下一节中介绍。

# 在代码中编写注释

即使您正在制作一款普通的软件，它也必须以某种方式与数据进行交互。最终，您的代码将变得更长、更复杂，变得难以管理、阅读和理解。虽然我们最终会理解我们编写的代码，但从长远来看，这将变得更加困难。如果您有 50,000 行代码，并且想要调试其中的语义和逻辑错误，那么很难搜索和索引它们。因此，注释非常有用。注释是一种在代码中写下注释的方式，以便任何试图阅读您的代码的人都知道该程序在做什么。Python 不会解释注释，这意味着每当 Python 解析器看到语句以井号符号 (`#`) 开头时，它的执行将被跳过。

Python 设计模式可能会很复杂，这使得任何天真的程序员都很难查看代码并理解它在做什么。因此，我们在我们的母语中为程序添加简单的注释，解释为什么我们要编写特定的代码。以 `#` 开头的注释是单行注释。如果您在包含井号的行下面写点东西，它不会被视为注释。这在以下代码中显示：

```py
>>> # this is single line comment
>>> but this is not comment
```

在 Python 中，没有多行注释。人们通常认为三个双引号 (`""" """`) 用于多行注释，但这是不正确的。在 Python 3.x 中，三引号内的字符串被视为常规字符串。您可以使用三个双引号来删除断开的字符串。当字符串的范围没有完全封闭时，字符串被视为断开，就像这个例子中一样：

```py
>>> 'Hey it's me'
```

前面的字符串是用单引号创建的。字符串中使用了撇号，这会使解释器产生困惑，因为它认为 `hey it` 是一个字符串，而忽略了 `s me`。这是一个断开的字符串。您遇到的文本并不是每一段都在字符串中。如果您在 IDLE 中运行此代码，将会得到以下语法错误：

![](img/c65043ea-afa5-48f8-ab49-d9d9bdea2ce4.png)

要消除此错误，您可以使用三引号。三引号将删除断开的字符串，即使您的字符串中出现双引号或单引号：

```py
>>> """ Hey! it's me """
>>> """ He said, "How may I help you" """
```

许多人认为前面的代码行代表多行注释，并做了这样的事情：

![](img/158f7921-4c38-452f-a5af-6a0edad82b41.png)

您可以清楚地看到，它不是忽略执行该命令，而是通过为我们创建一个字符串来反映我们的命令。如果我们没有将值封装在三个双引号中的变量中，它将被视为垃圾收集器，并给我们一个字符串。许多人因其作为文档字符串的行为而将其误认为是多行注释。文档字符串是放置在函数、模块或类顶部的字符串。例如，这是执行加法操作的函数：

```py
def add:
```

显然，我们还没有学会如何创建函数，但您可以了解到三个双引号用于提供有关函数、类和模块的一些信息。因此，有些人认为它是多行注释。您可以看出它不是多行注释，因为三引号内的注释可以通过 Python 的特殊函数访问。

由于这是文档字符串，我们可以通过 **`obj.__doc__`** 访问它。由于它可以被方法访问，并且解释器不会忽略它，因此它不能被视为多行注释。因此，我们可以得出结论，Python 中只有单行注释。如果我们确实想要多行注释，应该使用三个双引号，但我们必须确保将它们放在函数、类或模块的定义之上。

在以下代码中，`\n` 表示换行。这将导致代码中的换行。正如我们所看到的，以下代码在第一行打印 `hey`，在下一行打印 `it's me`：

```py
>>> print("hey \n it's me")
hey
it's me
```

从中，我们可以得出关于注释的以下结论：

+   注释是多余的。它们只是告诉我们每行代码在做什么：

```py
      >>> print(customer_info)  # printing customer information
```

+   注释可能包含有关代码的有用信息，甚至一些我们无法通过查看代码提取的关键信息：

```py
      >>> d = (400, 200) # d is for display of game console 400*200
      >>> TEMP = 23 # temperature is in Celsius
```

正如我们在上一章中讨论的，我们在创建程序时必须遵循一种方便的模式。虽然这不是强制性的，但这总是一个很好的做法。在*Python 的基本组成*部分，第一个块是请求用户输入，这将是我们下一次讨论的主题。

# 请求用户输入

编程的基本组成之一是让用户使用键盘输入数据。无论是用于管理工具还是游戏，所有应用程序都应该从用户那里获取输入。在用户管理应用程序中，我们收集用户信息，如他们的姓名、地址和年龄，并将其插入到数据库中。在游戏中，我们从键盘上获取用户输入以进行移动。根据用户按下的键，我们可以让角色执行一些动作。例如，按下键盘上的*Shift*键将使角色跳跃。因此，每个应用程序都必须用户友好，这意味着它必须使用户与应用程序进行交互。

让用户在键盘上输入一些内容并将其存储在变量中，以便我们在需要时可以进一步处理，这是一个常见的做法。Python 具有内置函数来从用户那里获取输入，这意味着您无需导入或安装任何内容即可使用此函数。`input()`函数用于从用户那里获取输入：

```py
>>> input()
```

当您输入上述命令时，它将为您提供一个写东西的地方。解释器在用户按下键盘上的按钮并按下*Enter*之前会保持其其他执行。按下*Enter*键后，程序将恢复并给出用户的文本输入。

以下屏幕截图显示了`input()`函数在 Python 中的工作方式：

![](img/e15f0424-e5d6-4e2c-a80d-845f6acca596.png)

在上面的屏幕截图中，我们使用了`input()`方法并输入了字符串'I love Python'。黑色文本颜色是用户输入的内容，解释器立即给出了一些输出，这是用户输入的相同字符串。您可以将输入文本存储到变量中，以便我们可以对其进行计算：

```py
>>> message = input()
```

现在，我们已经看到了如何从用户那里输入数据。向用户提供消息或提示，告诉他们需要在该字段中输入什么，这总是一个很好的做法。消息或提示应作为`input`方法括号内的字符串给出，如下所示：

```py
>>>user_name = input(" \n Enter your name? : \n")
Enter your name? :
John Doe #this is input from user
'John Doe' #printing content of user_name
```

在上面的示例中，当用户输入内容并按下*Enter*时，我们的程序会接受用户的输入并执行指定的任务。但是，如果您想要创建一个应用程序，其中要连续从用户那里获取数据，我们必须使用循环。我们将在接下来的章节中学习循环：

```py
>>> while True:
        input("Enter user_names: \n")

```

上述语句连续从用户那里获取输入。即使按下*Enter*或输入`return`关键字后，它也不会停止。在上述命令中，`while`用于循环。`True`是表示逻辑和布尔代数的真值的布尔类型。布尔类型要么是`True`，要么是`False`。因此，`while True`语句意味着其中的代码应该无限运行，要求用户无限输入。其结果如下：

![](img/80de89ab-ae5c-4db1-8a67-6e9db7c1b42f.png)

调用`input()`方法时，您在键盘上输入的任何内容都将以字符串形式呈现，即使您输入的是整数，就像在示例中一样：

```py
>>> a = input()
1 #store integer 1 to the variable a
```

如果你使用`type`方法检查`a`变量的类型，即`>>> type(a)`，你会看到一些意想不到的结果。我们从用户那里输入`1`并将其存储在变量`a`中。当我们检查存储在`a`变量中的值的类型时，它不会是一个整数。相反，它会显示`str class: <class 'str'>`，这意味着你通过调用`input()`方法在键盘上输入的任何内容都将是字符串类型。但有时，也许我们希望用户输入的整数保持为整数。在这种情况下，我们必须执行类型转换，这将在下一节中介绍。

# 类型转换或类型转换

有时你可能希望将用户输入的数据作为整数使用。我们看到，用户输入的数据将是一个字符串，即使它是一个整数，就像这个例子中一样：

```py
>>> age = input("Enter your age? \n")
>>> Enter your age?
29
>>> type(age)
<class 'str'>
>>> age
'29'
```

年龄是用数字表示的。然而，在前面的代码中，它是一个字符串。因此，我们必须将它转换为整数，以便用户输入的信息对计算有意义。这种转换称为类型转换。然而，如果你在不将其转换为适当类型的情况下对这个值进行一些计算，你的结果将是不可取的。例如，如果你想通过将 29 加 2 来改变年龄的值，你不能将它从 29 改变为 31。这是因为字符串不支持增量；相反，它们支持连接：

```py
>>> age 
'29'
>>> age + 2
Traceback (most recent call last):
  File "<pyshell#3>", line 1, in <module>
    age + 2
TypeError: can only concatenate str (not "int") to str
```

因此，如果你想使用输入的年龄作为整数，我们必须使用类型转换方法。这些方法也是 Python 的内置函数。其中一些如下：

+   `int(arg1, base)`: 这个方法将任何其他数据类型转换为整数。如果你在`int`函数的括号中放入一个字符串，它将把它转换为整数。`arg1`是要转换的字符串，基本参数表示数据的基数是一个字符串：

```py
      >>> a = int("10101", 2)
      >>> a
      21 #conversion from string to integer

      >>> b = int("255")
      >>>b
      255
```

+   `float()`: 这个方法将任何整数转换为浮点数，就像这个例子中一样：

```py
      >>> float(3)
      3.0 #this is floating point number           
```

+   `str()`: 这个方法将任何其他数据类型转换为字符串，就像这个例子中一样：

```py
      >>> str(255)
      '255'
```

+   `ord()`: 这个方法将字符类型转换为整数，并返回它的 ASCII 值，就像这个例子中一样：

```py
       >>> ord('a')
       97  #ASCII value of a is 97
```

其他函数，如`tuple()`、`list()`、`set()`和`dict()`，将在接下来的章节中介绍。

现在你已经熟悉了 Python 的第一个构建块，即从用户那里输入数据，让我们看看如何使用 Python 提供的不同功能来格式化这些数据。在下一节中，我们将看一下字符串操作，这将反过来调用 Python 提供的不同方法来操作用户输入的数据。

# 字符串操作

任何数据类型，无论是文本、整数还是布尔值，用双引号(`" "`)或单引号(`' '`)括起来，在 Python 中都被视为字符串。字符串值揭示了数据的广泛含义。存储为字符串的数据可以很容易地访问，但不能被改变。因此，它被视为不可变的数据类型。让我们看一下下面的代码：

```py
>>> msg = "happy birthday"
>>> msg.upper() # upper() is inbuilt method of string class that converts string to upper case
'HAPPY BIRTHDAY'
>>> msg
'happy birthday'
```

在前面的代码中，我们创建了`msg`变量并将一个字符串存储在其中。我们使用了`string`类的内置方法来操作该字符串，当我们将`msg`变量打印回来时，它保持不变。这意味着字符串是不可变的数据类型。如果你想改变字符串的内容，你应该完全覆盖它，就像这个例子中一样：

```py
>>> msg = msg.upper()
>>> msg
'HAPPY BIRTHDAY'
```

字符串不支持项目赋值。如果你想向字符串添加一个项目，你必须创建一个全新的字符串。因此，Python 的这个特性使它成为不可变的，就像这个例子中一样：

```py
>>> str1 = "John"
>>> str1[0] = "Hello"
Traceback (most recent call last):
  File "<pyshell#30>", line 1, in <module>
    str1[0] = "Hello"
TypeError: 'str' object does not support item assignment
```

要使用字符串的内置函数，你必须在字符串上调用一个方法。让我们看一下我们可以在内置方法中使用的模式，即`"String".method_name()`：

```py
>>> "Python".capitalize() #capitalize first letter of string
Python
>>> "xyz".join("pqr") #joins every letter of string "pqr" with xyz except for first and last letter
'pxyzqxyzr'

#len function does not have to call like this, call simply len() with string passed inside parenthesis
>>> len("Python") #prints length of string
6
```

您可以使用方括号访问字符串的每个元素。我们应该将位置放在方括号内。这些位置在 Python 中称为索引。字符串的索引从 0 开始，从左到右每次增加 1：

```py
>>> info = "Python"
>>> info[2] 
t
>>> info[0]
P
```

您可以在以下图表中观察索引模式。在这里，我们有一个`Python`字符串。字符串的索引从 0 开始。对于紧挨着具有索引的每个元素，都会增加一个单位到前一个元素的索引。这被称为正索引：

![](img/0d75ec16-fe47-46f5-a0e7-5f2516730636.png)

字符串还支持负索引。如果您想要从字符串中获取最后几位数字，可以给出一个`-1`索引，如下所示：

```py
>>> info = "Python"
>>> info[-1]
n
>>> info[-3]
h
```

现在，我们已经学会了如何根据索引提取字符串的特定元素。但是，如果您想从字符串中提取多个元素，可以使用字符串切片操作。切片操作与比萨切片相同，表示我们按顺序取出字符串的一些部分。字符串切片可以使用与从字符串中提取单个字符时相同的方括号进行。这两种操作的区别在于，当我们用冒号扩展我们的方括号并为其提供开始、结束（不包括）和步长索引时，就会看到区别。尽管字符串切片的理论可能看起来很复杂，但编程起来很容易。让我们看一个例子来澄清这一点：

```py
>>> email = "johndoe@gmail.com"
```

假设我们想要从这个电子邮件地址中提取一个人的名字。我们必须跟踪所有的索引才能做到这一点：

![](img/5bea629a-3190-4d34-8398-c196671068a8.png)

由于我们正在切片字符串的一些部分，我们必须将其想象为一个容器，其中每个字符都有其索引，以便更容易地引用它们。要实现字符串切片，请按照以下步骤进行：

1.  使用`name_of_string[start: stop]`：我们使用`[step]`命令进行字符串切片。这里，`start`是起始索引，`stop`是一个排他位置，这意味着如果您在其上放置一个索引，-1 的元素将被包括在内，但在停止索引处的元素将被排除在外。这里，步骤是可选的。我们将在接下来的章节（第三章：流控制：为您的游戏构建决策制定者）中讨论步骤索引位置。

1.  首先决定需要提取什么。您不能随机提取字符串的任何部分。它应该是按顺序进行的。例如，您不能使用单个命令提取`jo`和`mail`。我们可以提取`johndoe`，因为每个元素都是按顺序排列的。让我们尝试从我们的代码中提取它：

```py
  >>> email = "johndoe@gmail.com"
  >>> email[0:7:] # 0 is starting position, 7 is stopping position and it is not included
  'johndoe'
  >>> email[:7:] #empty starting position also means start from 0 index
  'johndoe'
```

在上述代码中，`email[0:7:]`或`email[:7:]`告诉我们，第一个索引 0 是字符串的起始索引，这意味着我们要从`start`打印。您也可以放置 0，表示默认状态，`start`将从起始位置打印。第二个索引 7 是停止位置，但它是一个排他位置，这意味着解释器将打印直到`e`字符，但不包括`@`，因为`@`在位置 7。最后，第三个索引位置是步长。我们在这里放置一个空格，表示它应该默认持有的值，这意味着我们打印时不跳过任何数字。如果您将步骤放置为`>>> email[0:7:2]`，您将得到`jhde`作为输出；它将在每个字符之间跳过一个字符。

我们还可以对字符串执行加法和乘法运算。将两个字符串连接在一起称为连接。我们使用`+`和`*`等运算符来执行字符串操作，就像这个例子中一样：

```py
>>> "-" * 50 #this will create 50 hyphen or dashes (-)
'--------------------------------------------------'

>>> "a" * 4
'aaaa'
```

但是，您不能将两种字符串类型相乘。其中一个必须是字符串，另一个必须是整数，如果我们希望对字符串执行乘法操作。

```py
>>> "a" * "b"
Traceback (most recent call last):
  File "<pyshell#22>", line 1, in <module>
    "a" * "b"
TypeError: can't multiply sequence by non-int of type 'str'
```

如果您还想要添加字符串，那么操作数必须都是字符串。否则，它将抛出类型错误：

```py
>>> str1 = "Happy"
>>> str2 = "Birthday"
>>> str3 = "John"
>>> str1 + str2 + str3
'HappyBirthdayJohn' 

>>> str1 + 45 # YOU CANNOT ADD STRING AND INTEGER
Traceback (most recent call last):
  File "<pyshell#28>", line 1, in <module>
    str1 + 45
TypeError: can only concatenate str (not "int") to str
```

现在我们已经了解了字符串操作的基本知识，比如赋值、连接和赋值，我们将学习字符串格式化。如果我们需要根据输入更改文本的格式，这是一个重要的概念。

# 字符串格式化

字符串格式化是我们通过用变量的内容替换占位符来构建字符串的地方。我们应用%（取模运算符）来执行字符串格式化。如果要指定数字作为占位符，使用`％d`。如果是字符串，使用`％s`作为占位符。字符串格式化的结果也是一个字符串。让我们看一个小例子：

```py
>>> key = "love"
>>> value = 13

#lets use string formatting technique
>>> print(" I %s number %d"%(key,value))
'I love number 13'
```

在上述代码中，`％s`的位置被 key 变量的值替换，`％d`的位置被 value 变量的值替换。因此，`％d`和`％s`是占位符。你不能在`％d`的位置上分配字符串值，也不能在`％d`上分配整数值。

传递的值的数量必须与字符串中使用的格式序列的数量相匹配。否则，它将抛出类型错误，如下所示：

```py
>>> '%s %d %s'%("Hello",1)
Traceback (most recent call last):
  File "<pyshell#19>", line 1, in <module>
    '%s %d %s'%("Hello",1)
TypeError: not enough arguments for format string
```

你也可以使用 Python 的内置格式函数来格式化字符串。使用这个函数进行格式化相对容易。我们可以使用大括号`{}`作为占位符，而不是使用占位符或格式序列，如`％d`和`％s`。我们还可以在大括号内指定数字，以便格式化为特定值，如下所示：

```py
>>> print(" I love {}".format("Python"))
'I love Python'

>>> print(" I love {0} and I hate {1}".format("Python", "Java"))
'I love Python and I hate Java'

>>> print(" I love {1} and I hate {0}".format("Python","Java"))
'I love Java and I hate Python'
```

现在我们熟悉了 Python 的核心编程范式，让我们跳到下一节，在那里我们将学习制作我们的第一个游戏：**井字棋**。

# 制作你的第一个游戏-井字棋

Python 语言是一种跨平台语言，这意味着我们可以为任何设备制作游戏。然而，在这里，我们将更多地关注逻辑及其实现，而不是针对特定平台进行编码。与其他语言相比，使用 Python 编写游戏更简单，因为它的语法更短，提供了丰富的内容库，使生产速度更快。话虽如此，如果在编码之前不制定计划，那就不那么容易了。我们必须将游戏实体分解成部分，以便每个实体都可以轻松调试。从现在开始，在制作游戏时，我们将遵循以下一般步骤：

+   头脑风暴和信息收集

+   选择合适的代码编辑器

+   编程模型

+   用户交互-用户输入/操作

到目前为止，我们已经涵盖了各种主题，包括变量、运算符、表达式、从用户那里获取输入并将其打印给用户。现在让我们将所有这些技术应用到我们的第一个游戏中。

# 头脑风暴和信息收集

在我们开始编码之前，让我们考虑一下游戏的设计和界面。拿出你的笔和纸，开始思考游戏的界面吧！到目前为止我们学到了关于 GUI 的什么？显然没有！这意味着我们必须为我们的第一个游戏使用一个简单的界面。在学习了 Python 的一些高级概念之后，我们将稍后对其进行修改。井字棋是一个需要从用户那里获取输入并根据玩家的移动放置 X 或 O 的游戏。因此，我们的界面应该是这些符号的占位符。我们将制作一个包含`_`的简单界面。下划线（`_`）将是我们的占位符，我们将根据玩家的选择放置 X 或 O。

```py
_ | _ | _
_ | _ | _
_ | _ | _                    
```

上述代码显示了我们游戏的简单布局。它包含`_`（下划线）作为占位符和`|`来分隔符号。

```py
_ | _ | O
_ | X | _
_ | _ | X
```

正如你所看到的，每当玩家迈出一步时，我们就用与该用户决定相对应的符号替换下划线。现在，我们有了一个游戏的基本界面。

现在我们已经规划了界面，我们需要解决如何跟踪下划线的位置以及如何找出在哪里用适当的符号替换下划线的问题。我们可以为这些下划线中的每一个分配一个数字，并告诉用户选择一个数字。然后，根据该数字，我们可以将其符号分配到该位置，如下所示：

```py
0 | 1 | 2
3 | 4 | 5
6 | 7 | 8
```

现在，我们已经收集了足够的信息来开始我们的简单游戏。在复杂的现实世界游戏中，头脑风暴和信息收集过程大约需要 6 个月。现在，让我们来选择一个代码编辑器。

# 选择适当的代码编辑器

我们已经在我们的机器上安装了 Python，并查看了 Python 的预安装编辑器 IDLE。我们将在这个项目中使用该编辑器。让我们开始吧：

1.  在搜索栏中搜索 IDLE 并打开它。你会得到以下 Shell：

![](img/87ad6991-f4ca-466c-8ff3-2724089f82d6.png)

这个终端或 Shell 通常用于在 Shell 内立即解释命令。这意味着一次只执行一个命令，但我们必须写很多行代码来制作我们的游戏。因此，用这个 Shell 编写游戏是不可能的。我们必须创建一个文件，可以在其中写入多行代码并一次性执行它们。Python 为我们提供了脚本来解决这个问题。

1.  点击文件，然后新建文件，或按*Ctrl* + *N*。将打开一个新的脚本文件，我们可以在其中写入多行代码。

![](img/a3bf3719-f952-461e-afa9-3e591d468030.png)

1.  在窗口顶部，我们会看到未命名，这意味着我们还没有保存我们的文件。让我们先保存，因为无论如何我们都必须保存。按下*Ctrl* + *S*进行保存。我已经将其保存为`first_game.py`。

![](img/d9cd0064-2b31-4664-9999-1224565e887d.png)

现在我们已经选择了适合开发的 IDE，让我们开始为游戏开发我们的模型。

# 编程模型或建模

在编程中，模型是表示程序中数据流的一种方式。在我们的游戏中，这是关于如何使用作为用户输入获得的数据。在*头脑风暴和信息收集*部分，我们揭示了一些信息，讨论了位置以及如何将每个数字分配给代表玩家选择的位置。模型不包含演示逻辑；相反，它将处理数据逻辑。计算机不关心布局或界面。另一方面，用户需要一个界面来做出反应。因此，每个程序都有前端和后端。前端是应用程序中看到的一切，无论是应用程序的美学部分还是可见部分。在大型项目中，**用户体验**（**UX**）设计师主要在前端工作。后端不关心设计，它只关心应用于数据层的算法和安全性。模型被用作前端和后端之间的通信方式。

计算机不关心模型如何呈现数据，但用户应该以信息丰富和美观的方式从模型中获取数据。因此，我们制作了简单的布局，如下所示：

```py
_ | _ | _
_ | _ | _
_ | _ | _   
```

让我们开始创建我们的演示层模型：

```py
#this code is written as scripts
game_board = ['_'] * 9 #this will create 9 underscores
print(game_board[0] + '|' + game_board[1] + '|' + game_board[2])
print(game_board[3] + '|' + game_board[4] + '|' + game_board[5])
print(game_board[6] + '|' + game_board[7] + '|' + game_board[8])
```

上面的代码代表了我们游戏的布局。它显示给用户。让我们逐行分解一下：

+   `game_board = ['_'] * 9`: 这个语句创建了 9 个下划线，作为我们游戏角色的占位符。它存储在`game_board`变量中。正如你可能记得的，一个变量不能存储多个值。如果我们对同一个变量执行多次赋值，变量将存储最后添加到它的值。因此，这个棋盘不是简单类型的变量。这是一个`list`变量。我们可以在列表中存储多个数据。让我们打印一下棋盘的值：

```py
      >>> board = ['_'] * 9
      >>> board 
      ['_', '_', '_', '_', '_', '_', '_', '_', '_'] # 9 underscores is 
        stored in board list
```

+   `>>> print(game_board[0] + '|' + game_board[1] + '|' + game_board[2])`: 上面的命令打印了布局的第一行。在本章的前面，我们已经学习了`print`语句。括号内的任何内容（字符串或变量值）都会被`print`语句原样打印出来。我们传递了`board[0]`来获取棋盘的第一个元素，也就是第一个下划线（`_`）。我们在每个下划线之间打印一个分隔符（`|`）。上面语句的输出是`_ | _ | _ `。

+   我们必须再次打印前面的布局两次，这意味着我们必须使用两个`print`语句：

```py
      >>> print(game_board[3] + '|' + game_board[4] + '|' + game_board[5])
      >>> print(game_board[6] + '|' + game_board[7] + '|' + game_board[8])
```

+   插入在方括号中的数字是我们通常在编程中称为`索引`的位置。这指的是`list`变量的某个位置。列表索引总是从零开始：

```py
     >>> board = [1,2,3,4,5,6]
     >>> board[0] # this will give value 1 from "board" list
     >>> board[5] # this will give value 6 from "board" list
```

+   下面的代码显示了我们井字棋游戏的最终布局。确保将程序编写为脚本，并按*F5*运行它：

```py
        game_board = ['_'] * 9
        print(game_board[0] + '|' + game_board[1] + '|' + game_board[2])
        print(game_board[3] + '|' + game_board[4] + '|' + game_board[5])
        print(game_board[6] + '|' + game_board[7] + '|' + game_board[8])

        #output
        """ 
            _ | _ | _
            _ | _ | _
            _ | _ | _   

        """ 
```

+   在前面的代码中，我们做了两件事：首先，在我们的布局的每个位置上打印了下划线，然后我们为每个位置分配了一个数字：

```py
      0th | 1st | 2nd
      3rd | 4th | 5th     
      6th | 7th | 8th
```

现在，我们已经开发了代表游戏基本布局的编程模型，是时候让编程模型与游戏玩家进行交互了。在下一节中，我们将学习如何接受用户输入并对其进行操作，以便与我们游戏的模型进行交互。

# 用户交互-用户输入和操作

我们正在为用户制作游戏。因此，我们应该制作一个界面，使我们的应用程序更加用户友好。我们在上一节中已经做到了这一点。现在，我们必须从用户那里接受一些输入，并通过模型将其放到布局中。我们知道从用户那里接受输入的一个简单方法是使用`input()`方法。现在让我们使用它。

为了解决这个问题，我们需要考虑：*我们应该从用户那里输入什么？是一个符号，比如 X/O，还是位置？*

将输入作为符号是没有意义的，因为在接受输入后，我们应该知道在哪里放置它。因此，我们可以从用户那里接受位置，并自动将符号放入我们的代码中：

```py
#code from models  

#...................................................................

#code for user input

while True:
     pos = input(" Enter any position you want from (0-8): \n")
     pos = int(pos)
     game_board[pos] = 'X'
     print(game_board[0] + '|' + game_board[1] + '|' + game_board[2])
     print(game_board[3] + '|' + game_board[4] + '|' + game_board[5])
     print(game_board[6] + '|' + game_board[7] + '|' + game_board[8])

```

让我们一部分一部分地来分解这个问题：

+   `while True`：这将无限次运行。我们在*请求用户输入*部分看到了这种情况。因此，我们将无限次地从用户那里获取输入数据，这意味着我们的游戏循环没有终止。

+   `pos = input("输入您想要的任何位置（0-8）：\n")`：这个语句将从用户那里接受 0 到 8 的位置输入，并将其存储在`pos`变量中。

+   存储在`pos`变量中的数据将是一个字符串，但位置应该是一个整数。因此，我们必须使用`int`方法将其转换为整数。然后，我们将整数存储在`pos`变量中，如`x = int(x)`。

+   `game_board[pos] = 'X'`：这个语句将`X`分配给用户选择的位置。`pos`变量包含了用户在上一个命令中选择的 0 到 8 的位置。现在，我们将`X`分配给该位置，取代下划线，如下所示：

```py
      0th | 1st | 2nd
      3rd | 4th | 5th     
      6th | 7th | 8th
```

如果用户输入`4`，那么我们将在第`4`个位置放置`X`，如下所示：

```py
      0th | 1st | 2nd
      3rd |  X  | 5th     
      6th | 7th | 8th
```

+   在我们为指定位置分配了玩家符号之后，我们必须使用这三个打印语句再次打印棋盘。它应该保持在循环内，因为我们必须在用户从键盘输入新位置时每次都打印棋盘。

现在我们已经完成了渲染布局和用户输入模型的制作，我们可以运行游戏并观察输出。你将看到的游戏可能不太吸引人，因为它没有一个合适的布局，也不会有我们井字棋游戏应该有的许多功能。在未来的章节中，我们将尽可能地使游戏可玩。现在，让我们来看看可能在我们的游戏中遇到的错误和警告。

# 可能的错误和警告

到目前为止，我们只涵盖了 Python 的基本基础知识，因此到目前为止，你可能还没有发现太多语义错误。但是，你可能已经习惯了语法错误。首先，变量命名可能会导致错误。如果你不遵循变量命名的规则或约定，你可能会遇到以下错误：

```py
>>> my name = "John Doe"
SyntaxError: invalid syntax
```

前面的名称是无效的，因为在创建变量名称时不能使用空格。你可以在它们之间加一个下划线来指定它由两个单词组成。`my_name`是一个变量的有效名称。

如果你拼错了变量名，你会立即得到一个错误。假设你创建了一个名为`Msg`的变量，并将其用作`msg`。将返回一个错误，说明这是错误的定义。Python 是大小写敏感的，这意味着`True`和`true`在 Python 中是不同的。如果你将一个变量命名为`True`，那将是非法的，因为它是 Python 的关键字之一。

然而，你可以将一个变量命名为`true`：

```py
>>> True = 45
SyntaxError: can't assign to keyword 
>>> true = 45
>>> true
45
```

同样的规则也适用于命名模块。在本章中，我们学习了如何导入`math`模块并使用它的方法。然而，如果你拼错了模块的名称，长期来看会导致许多问题。在 IDLE 上不会立即看到错误；你必须编译你的脚本才能看到。因此，在 IDLE 上调试要困难得多。因此，请确保你正确拼写所有的模块和它们的方法。

`>>> import math`将成功地将`math`模块导入到你的项目中，但如果你使用错误的模块名称，你将得到以下错误：

```py
>>> import Math
Traceback (most recent call last):
  File "<pyshell#6>", line 1, in <module>
    import Math
ModuleNotFoundError: No module named 'Math'
```

还有另一种比语法错误更危险的错误类型；这些被称为语义错误。语义错误发生在我们没有得到预期结果时。它们不会被解释器检测到，因此很难调试。我们可能由于错误执行表达式而出现语义错误。如果我们对优先规则不够重视，最终会导致程序出现错误的语句。

`1 + 3**2`表达式的输出是 10，而不是 16。然而，我们可以通过在括号中包围该语句来强制解释器打印 16。`(1 + 3) **2`将给我们 16。

现在你已经学会了如何纠正程序中遇到的错误，让我们来了解一下修改我们的第一个井字棋游戏的可能方法。

# 游戏测试和可能的修改

有几种方法可以找到游戏中的错误。首先，你可以向你的朋友们求助，让他们玩你的游戏。你第一次测试游戏时收集到的建议被称为 alpha 测试，它是任何游戏开发生命周期中的一个重要部分。通过采访收集足够的信息后，你可以开始修改你的游戏。

到目前为止我们学到的东西还不足以使我们的游戏更有吸引力。我们将在接下来的章节中学习一些主题，并相应地修改我们的井字棋游戏。

我们在本节制作的游戏很单调，没有激励用户去玩，但通过制作它，我们学到了很多东西。我们看了使用模型和视图概念创建游戏的基本过程。视图指的是我们呈现数据的布局，帮助我们通过界面与用户进行交互，而模型指的是我们在程序和用户之间传递数据的方式。我们还没有涵盖高级的 Python 语言范式，因此我们的能力有限。这意味着本章的游戏很简单。然而，在我们学习条件、循环和函数后，我们将对这个游戏进行修改。

以下是我们可以对游戏进行的一些可能修改：

+   让我们分析一下我们的代码及其局限性。我们告诉用户明确输入 0 到 8 之间的数字来指定用户的移动。如果用户没有输入数字而输入了字符串会怎么样？我们的程序将终止循环并因异常而崩溃。因此，我们将进行的第一个修改是限制用户只能输入数字。如果他们输入其他内容，我们可以打印一个用户友好的消息，而不是让程序崩溃。这个概念被称为*异常处理*，将在下一章中介绍。

+   目前，这个游戏只能与一个玩家一起玩，但井字棋是一个多人游戏。因此，我们必须学习条件和流控制，这将帮助我们实现玩家之间的过渡。我们将在下一章中做到这一点。

+   当用户捕获整行、整列或对角线时，他们应被视为游戏的赢家，并且游戏应完成执行。然而，我们还没有创建任何逻辑来使玩家成为赢家。到目前为止，我们所学的还不够，但在完成下一章之后，我们将能够对我们的游戏进行重大改变。

通过查看我们可以对我们的游戏进行的修改，我们可以看到在下一章中我们有更大的事情要做。尽管我们在本章中获得的知识足以创建一个编程模型并允许我们与单个玩家互动，但这对我们与多个玩家互动来说还不够，这需要对循环和条件结构有很好的理解。我们将在下一章中涵盖这些概念。

# 总结

在本章中，我们涵盖了 Python 的两个基本构建模块：输入和提供格式化输出。在本章中，我们查看了 Python 的内置数据类型，并首先学习了不同数据值及其类型，如整数、字符串、浮点数、布尔值和无值。我们通过学习变量、数字和`math`模块来了解 Python 生态系统。我们看到了如何使用`math`模块，并对需要遵循的变量创建和使用模块的规则和约定有了很好的理解。如果你想用 Python 开始你的编程生涯，这些主题是必不可少的。这些主题不仅为 Python 打下了坚实的基础，还教会了你在编程中需要遵循和消除的好坏实践，即使你是一名熟练的 Python 程序员。编码不仅仅是编写代码——它是关于以可读和可用的方式呈现信息。因此，我们看到了如何在编程中使用注释来使我们的代码更易读和可重用于其他程序员。

使用户输入数据，然后在我们的程序中使用它是使应用程序用户友好的唯一方法。因此，我们学习了如何使用户输入数据并将其存储在结构中，以便进一步操作时更容易访问。我们最终看到了`input()`方法的不寻常的工作行为，它将我们的整数或布尔输入数据转换为字符串。由于这个原因，我们学习了类型转换方法，并看到使用 Python 的内置方法执行数据转换是多么容易。

字符串是最基本和原始的数据类型，用于存储文本。我们专门讨论了字符串的创建和操作。我们学习了如何访问字符串的元素。我们还了解到字符串赋值是不可能的，因此我们得出结论字符串是不可变的。我们学习了字符串类的基本方法，如 capitalize、join、upper、lower 和 len。我们研究了字符串的两种格式化技术，即`%s`和`%d`，它们被用作占位符和格式化方法。你可以使用其中任何一个，尽管最好在这样做之前对每一个都有所了解。

然后，我们建立了我们的第一个游戏。我们看到建立游戏不仅仅是编码。我们需要经历各种过程，如头脑风暴、建模和用户交互。我们学习了模型和视图如何协同工作。然后，我们制作了一个简单的游戏，并有机会复习到目前为止学到的一切。最后，我们提出了一些我们可以对井字棋游戏进行的修改。随着我们在这本书中的进展，每个修改都将被涵盖。在下一章中，我们将学习流控制以及如何为我们的游戏构建决策者。
