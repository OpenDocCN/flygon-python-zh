- en: 9\. Intermediate Statistics with Python
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 9\. 使用Python进行中级统计
- en: Overview
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 概述
- en: In this chapter, we will progress through to some intermediate statistical concepts.
    We will learn what the law of large numbers tells us about the value of the sample
    mean as a sample gets larger.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将进一步学习一些中级统计概念。我们将了解大数定律告诉我们随着样本的增大，样本均值的价值是什么。
- en: By the end of this chapter, you will be able to apply the central limit theorem
    to describe the distribution of the sample mean, create confidence intervals to
    describe the possible value of the average with some degree of confidence, use
    hypothesis testing to evaluate conclusions based on the evidence that our sample
    provides, and use regression equations to analyze data.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 通过本章的学习，你将能够应用中心极限定理来描述样本均值的分布，创建置信区间来描述平均值的可能取值并带有一定的置信度，使用假设检验来评估基于样本提供的证据的结论，并使用回归方程来分析数据。
- en: Introduction
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: In previous chapters, we have described and explored data using descriptive
    statistics and visual techniques. We have also looked at probability, randomness,
    and using simulations of random variables to solve problems. The idea of distributions
    was also examined, which plays a much bigger role later in this chapter.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在之前的章节中，我们已经使用描述性统计和可视化技术描述和探索了数据。我们还研究了概率、随机性以及使用随机变量的模拟来解决问题。分布的概念也被讨论过，这在本章后面将扮演更重要的角色。
- en: When looking at applying statistical ideas, there are some important questions
    to answer concerning methodology. Some examples of these questions could include
    "how large should I make my sample?" or "how confident can we be in the results?".
    For this chapter, we will look at how we can apply two of the most important theorems
    in statistics, starting with their practical implications before moving onto solving
    common problems using the more useful techniques that are derived from these important
    ideas.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在应用统计思想时，有一些重要的问题需要回答，涉及方法论。这些问题的例子可能包括“我应该让我的样本有多大？”或者“我们对结果有多有信心？”。在本章中，我们将看看我们如何应用统计学中最重要的两个定理，首先从它们的实际影响开始，然后再转向使用这些重要思想衍生出的更有用的技术来解决常见问题。
- en: In this chapter, we will explain what the law of large numbers is and clarify
    how sample size affects the sample mean. The central limit theorem will be discussed,
    along with its application in confidence intervals and hypothesis testing. Using
    Python, we will construct functions to calculate our confidence intervals to describe
    sample statistics and margin of error in a poll. Hypothesis tests will be conducted
    in Python to evaluate the evidence of a collected sample against a set of contradictory
    hypotheses. Finally, using the linear regression capabilities of Python, we will
    create a linear model to predict new data values.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将解释大数定律是什么，并澄清样本大小如何影响样本均值。我们将讨论中心极限定理，以及它在置信区间和假设检验中的应用。使用Python，我们将构建函数来计算置信区间，描述样本统计和民意调查中的误差范围。我们将在Python中进行假设检验，评估收集样本的证据与一组相互矛盾的假设。最后，利用Python的线性回归能力，我们将创建一个线性模型来预测新的数据值。
- en: Law of Large Numbers
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 大数定律
- en: There are many schemes and systems that people claim can make you a big winner
    at the casino. But what these people fail to see is the reason why casinos are
    lucrative money-makers; the odds are always on the casino's side, ensuring that
    the casino will come out ahead and always win (in the long run). What the casinos
    have come to depend on is something called the law of large numbers.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 有很多人声称有很多方案和系统可以让你在赌场大赢家。但是这些人忽视了赌场为什么能够赚钱的原因；赔率总是对赌场有利，确保赌场最终总是赢得胜利（从长远来看）。赌场所依赖的是一种叫做大数定律的东西。
- en: 'Before we figure out how the casinos always make themselves winners in the
    long run, we need to define several terms. The first is **sample average**, or
    **sample mean**. The sample mean is what everybody thinks of when they think of
    the average. You calculate the sample mean by adding up the results and dividing
    by the number of results. Let''s say we flip a coin 10 times and it comes up heads
    7 times. We calculate the sample mean, or the average number of heads per flip,
    like so:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们弄清楚赌场为什么总是在长期内让自己成为赢家之前，我们需要定义几个术语。第一个是**样本平均值**，或者**样本均值**。当人们想到平均值时，他们通常会想到样本均值。你可以通过将结果相加然后除以结果的数量来计算样本均值。比如说我们抛硬币10次，有7次是正面。我们可以计算样本均值，或者每次抛硬币得到正面的平均次数，如下所示：
- en: '![Figure 9.1: Formula for sample mean'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.1：样本均值公式'
- en: '](image/B15968_09_01.jpg)'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_01.jpg)'
- en: 'Figure 9.1: Formula for sample mean'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.1：样本均值公式
- en: The sample average is typically denoted as *x̄*, pronounced *x bar*.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 样本均值通常用*x̄*表示，读作*x bar*。
- en: 'The second term we need to understand is **expected value**. Expected value
    is the theoretical value we can expect our average to be, based on probability.
    For the discrete examples, like our coin flipping experiment, we calculate it
    by taking the sum of each result multiplied by the probability of it occurring.
    For our coin flipping example, we take the number of heads on each side of the
    coin, 1 for heads and 0 for tails, and multiply it by the probability of each
    side occurring, 0.5 for each side in this instance. To write it out mathematically:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要理解的第二个术语是**期望值**。期望值是基于概率我们可以期望的理论值。对于离散的例子，比如我们的抛硬币实验，我们通过将每个结果乘以其发生的概率来计算它。对于我们的抛硬币例子，我们将硬币的每一面的正反面数，正面为1，反面为0，乘以每一面发生的概率，这种情况下每一面的概率都是0.5。数学上写出来就是：
- en: '![Figure 9.2: Formula for expected value'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.2：期望值公式'
- en: '](image/B15968_09_02.jpg)'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_02.jpg)'
- en: 'Figure 9.2: Formula for expected value'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.2：期望值公式
- en: We can expect 0.5 heads per coin flip, which makes sense since we have a 50%
    chance of obtaining heads in any given coin flip.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以期望每次抛硬币得到0.5个正面，这是有道理的，因为在任何一次抛硬币中我们有50%的机会得到正面。
- en: Another term is **sample**, which is a collection of results. In this instance,
    the collection of coin flip results is our sample. One important characteristic
    of a sample is its size, or the number of results you have. We have 10 coin flips,
    so our sample size is 10\. The final term is the idea of **independence**, which
    is the notion that one result in no way impacts another result. Our coin flips
    are independent; getting heads on the first coin flip is in no way going to impact
    the result of the 10th coin flip.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个术语是**样本**，它是一组结果。在这种情况下，抛硬币结果的集合就是我们的样本。样本的一个重要特征是其大小，或者你拥有的结果数量。我们有10次抛硬币，所以我们的样本大小是10。最后一个术语是**独立性**的概念，即一个结果绝对不会影响另一个结果。我们的抛硬币是独立的；在第一次抛硬币得到正面不会以任何方式影响第10次抛硬币的结果。
- en: Notice that our sample average and expected value are not the same. While getting
    7 heads out of a sample of 10 coin flips may seem unlikely, it is not an impossible
    result. Yet we know that about half of our sample should be heads. What happens
    if we keep flipping our coin 10 more times? Or even 100 or 1,000 more times? The
    answer to this is provided by the law of large numbers. **The law of large numbers**
    states that the value of the sample mean will converge to our expected value as
    the size of the sample grows. In other words, as we flip our coin more and more,
    the sample average should get closer and closer to 0.5.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 注意我们的样本平均值和期望值不同。虽然在10次抛硬币的样本中得到7次正面似乎不太可能，但这并不是不可能的结果。然而，我们知道大约一半的样本应该是正面。如果我们继续抛10次硬币会发生什么？甚至再抛100次或1,000次呢？这个问题的答案由大数定律提供。**大数定律**规定，随着样本大小的增长，样本均值将收敛到我们的期望值。换句话说，随着我们抛硬币的次数越来越多，样本平均值应该越来越接近0.5。
- en: Python and Random Numbers
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Python和随机数
- en: In this chapter, we will use the random library several times, but it is not
    truly random at all—it is what we call pseudo-random. A **pseudo-random** number
    is a number that is typically generated from an algorithm. We initialize the algorithm
    using a number called a **seed**. A lot of the time, the seed is based on the
    time or date the program is executed. However, Python (and most other languages)
    allows you to set the seed equal to whatever number you want. If you initialize
    your algorithm with the same seed, then the same pseudo-random numbers will be
    generated every time. This is useful when you are working with random numbers
    and want to produce the same results every time.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将多次使用random库，但它实际上并不是真正的随机数——它是我们所谓的伪随机数。**伪随机**数是通常从算法生成的数。我们使用一个称为**种子**的数字初始化算法。很多时候，种子是基于程序执行的时间或日期。然而，Python（以及大多数其他语言）允许你将种子设置为任何你想要的数字。如果你用相同的种子初始化你的算法，那么每次都会生成相同的伪随机数。当你使用随机数并希望每次产生相同的结果时，这是很有用的。
- en: 'Exercise 9.01: The Law of Large Numbers in Action'
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习9.01：大数定律的实践
- en: 'Let''s expand upon our coin flipping experiment in Python. First, let''s create
    a coin flipping simulator. Open up your Jupyter notebook and type the following
    code:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们在Python中扩展我们的抛硬币实验。首先，让我们创建一个抛硬币模拟器。打开你的Jupyter笔记本并输入以下代码：
- en: 'We first need to import the `random` Python package and set the `seed` method:'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们首先需要导入`random` Python包并设置`seed`方法：
- en: '[PRE0]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Let''s define a variable for our sample size and, for this instance, set it
    equal to `10`:'
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们为样本大小定义一个变量，并在这种情况下将其设置为`10`：
- en: '[PRE1]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'We create an empty list so that we can collect the results of our coin flip
    experiment:'
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们创建一个空列表，以便收集我们抛硬币实验的结果：
- en: '[PRE2]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Define two variables to compile the results (the number of heads and the average
    number of heads per flip, respectively):'
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义两个变量来编译结果（正面次数和每次抛硬币的平均正面次数）：
- en: '[PRE3]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Finally, we print the results to the console:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，我们将结果打印到控制台：
- en: '[PRE4]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Running your notebook should get you results that look like the following:'
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行你的笔记本应该得到以下类似的结果：
- en: '[PRE5]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Since we are generating random numbers in this simulation, the results that
    you get may vary. Getting 4 heads out of 10 coin tosses (a sample mean of 0.4
    heads per flip) is something that seems plausible, but is different than our expected
    value of 0.5\. But notice what happens when we change the sample size from 10
    to 100:'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于我们在这个模拟中生成随机数，你得到的结果可能会有所不同。在10次抛硬币中得到4次正面（每次抛硬币平均0.4次正面）似乎是可能的，但与我们的期望值0.5不同。但是请注意，当我们将样本大小从10增加到100时会发生什么：
- en: '[PRE6]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Rerun the entire program again (make sure to include the line with `random.seed(54321)`)
    and this time, the result will be as follows:'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新运行整个程序（确保包括带有`random.seed(54321)`的行），这次结果将如下所示：
- en: '[PRE7]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Notice that the sample average (`0.51`) is now a lot closer to the expected
    value (`0.50`) with a sample size of 100 rather than 10\. This is a prime example
    of the law of large numbers.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，样本平均值（`0.51`）现在与样本大小为100相比，更接近期望值（`0.50`）而不是10。这是大数定律的一个典型例子。
- en: Note
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To access the source code for this specific section, please refer to https://packt.live/2VCT9An.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问本节的源代码，请参阅https://packt.live/2VCT9An。
- en: You can also run this example online at https://packt.live/2NOMGhk.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以在https://packt.live/2NOMGhk上在线运行此示例。
- en: 'Exercise 9.02: Coin Flipping Average over Time'
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习9.02：随时间变化的抛硬币平均值
- en: Let's go back to our coin flipping simulator code and build it out to keep a
    running sample average as we flip our coin. We are going to flip a coin 20,000
    times and graph the sample mean using a line graph to show how it changes over
    time and compares to our expected value.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回到我们的抛硬币模拟器代码，并将其构建出来，以便在我们抛硬币时保持一个运行的样本平均值。我们将抛硬币20,000次，并使用折线图来显示样本均值随时间的变化，并与我们的期望值进行比较。
- en: 'Import the `random` and `matplotlib` Python packages and set the random seed:'
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入`random`和`matplotlib` Python包并设置随机种子：
- en: '[PRE8]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Define the sample size or the number of coin flips:'
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义样本大小或抛硬币次数：
- en: '[PRE9]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Initialize the variables that we are going to use to collect the results of
    our simulation:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 初始化我们将用来收集模拟结果的变量：
- en: '[PRE10]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Run the simulation and collect the results:'
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行模拟并收集结果：
- en: '[PRE11]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Print the results to the console:'
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将结果打印到控制台：
- en: '[PRE12]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Create a line graph that shows the sample mean over time, along with marking
    our expected value using a dashed line:'
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一条线图，显示随时间变化的样本均值，并使用虚线标记我们的期望值：
- en: '[PRE13]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Running our notebook will yield the following results:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行我们的笔记本将产生以下结果：
- en: '[PRE14]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'The code will generate the following graph, which shows how the average number
    of heads per coin flip changes as our sample size gets bigger (denoted by the
    solid line). Notice that after approximately 2,000 coin flips, the sample mean
    matches the expected value (about 0.5 heads per coin flip):'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 该代码将生成以下图表，显示随着样本量的增加，每次抛硬币的平均正面朝上数量的变化（用实线表示）。请注意，大约在2,000次抛硬币后，样本均值与期望值相匹配（约为每次抛硬币0.5个正面朝上）：
- en: '![Figure 9.3: Average number of heads per coin flip over a sample size'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.3：样本量每次抛硬币的平均正面朝上数量'
- en: '](image/B15968_09_03.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_03.jpg)'
- en: 'Figure 9.3: Average number of heads per coin flip over a sample size'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.3：样本量每次抛硬币的平均正面朝上数量
- en: Note
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To access the source code for this specific section, please refer to https://packt.live/2BZcR2h.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问此特定部分的源代码，请参阅https://packt.live/2BZcR2h。
- en: You can also run this example online at https://packt.live/31AIxpc.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以在https://packt.live/31AIxpc上在线运行此示例。
- en: A Practical Application of the Law of Large Numbers Seen in the Real World
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 大数定律在现实世界中的实际应用
- en: One of the best casino games to analyze through the lens of probability is roulette.
    Playing the game is relatively simple. The centerpiece of the game is a giant
    wheel with spaces and labels 1 through 36, 0, and 00 (double zero). The odd numbers
    are colored red, the even numbers are colored black, and both zero spaces are
    colored green. The wheel is spun and a ball is dropped into the wheel space moving
    the opposite direction to which the wheel is spinning. Eventually, the ball drops
    down into one of the 38 spots on the wheel. The result of where the ball lands
    is what people are betting on. They can place many different types of bets, ranging
    from landing on one specific number or which color space the ball will land on.
    The casino pays out according to the type of bet you have placed. When most people
    see roulette for the first time, a lot of them ask the question, "What's the deal
    with the two green spaces?" We will see clearly in a couple of pages why the green
    spaces are very important to casinos, but first let's talk about what we can expect
    from playing Roulette.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 通过概率的角度分析的最佳赌场游戏之一是轮盘赌。玩这个游戏相对简单。游戏的中心是一个巨大的轮盘，上面有1到36的空格和标签，0和00（双零）。奇数是红色的，偶数是黑色的，两个零空格都是绿色的。轮盘旋转，球被放入轮盘空格中，与轮盘旋转的方向相反。最终，球落入轮盘上的38个空格之一。球落在哪里的结果是人们下注的对象。他们可以下很多不同类型的赌注，从落在一个特定的数字上到球会落在哪个颜色的空格上。赌场根据您下注的类型进行支付。当大多数人第一次看到轮盘赌时，他们中的许多人会问这样的问题：“两个绿色空格是怎么回事？”我们将在接下来的几页中清楚地看到为什么绿色空格对赌场非常重要，但首先让我们谈谈我们可以从玩轮盘赌中期望什么。
- en: 'To add a little simplicity to the game, we are going to bet on the ball landing
    on a red number every single time. The payout on winning such a bet is 1:1, so
    if we bet $5 and win, we get to keep our $5 and win $5 more. If we lose the bet,
    we win nothing and lose the $5 bet. If we bet on red, here are the following probabilities
    of what can happen:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使游戏更简单，我们将每次都下注球落在红色号码上。赢得这样的赌注的支付比例是1:1，所以如果我们下注5美元并赢了，我们可以保留我们的5美元并赢得5美元。如果我们输了赌注，我们什么也不赢，失去了5美元的赌注。如果我们下注红色，以下是可能发生的概率：
- en: 'Bet on red and if the ball lands on red, we win: ![1](image/B15968_09_InlineEquation1.png)'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在红色上下注，如果球落在红色上，我们赢得：![1](image/B15968_09_InlineEquation1.png)
- en: 'Bet on red and if the ball lands on black, we lose: ![2](image/B15968_09_InlineEquation1a.png)'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在红色上下注，如果球落在黑色上，我们失去：![2](image/B15968_09_InlineEquation1a.png)
- en: 'Bet on red and if the ball lands on green, we lose: ![3](image/B15968_09_InlineEquation2.png)'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在红色上下注，如果球落在绿色上，我们失去：![3](image/B15968_09_InlineEquation2.png)
- en: 'Let''s look at the outcomes in terms of the money we can win or lose when placing
    a $1 bet:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看以我们可以赢得或失去的金额来看结果，当下注1美元时：
- en: Bet on red and if the ball lands on red, we win $1
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在红色上下注，如果球落在红色上，我们赢得1美元
- en: Bet on red and if the ball lands on black, we lose $1
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在红色上下注，如果球落在黑色上，我们失去1美元
- en: Bet on red and if the ball lands on green, we lose $1
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在红色上下注，如果球落在绿色上，我们失去1美元
- en: 'This is an example of a discrete distribution. To calculate the expected value
    of a discrete distribution, you multiply the value of the outcome by the probability
    with which it occurs. If you look at the preceding two lists, we have the probability
    and the value of each outcome in our game of roulette, so now we can calculate
    the expected amount of money we can win or lose for a typical game of roulette:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个离散分布的例子。要计算离散分布的期望值，您需要将结果的值乘以它发生的概率。如果您看一下前面的两个列表，我们有轮盘赌游戏中每个结果的概率和值，所以现在我们可以计算我们可以赢得或输掉的预期金额：
- en: '*(probability of landing on red * winnings or losses when we land on red) +
    (probability of landing on black * winnings or losses when we land on black) +
    (probability of landing on green * winnings or losses when we land on green)*'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: '*(落在红色上的概率*落在红色上时的赢或输) + (落在黑色上的概率*落在黑色上时的赢或输) + (落在绿色上的概率*落在绿色上时的赢或输)*'
- en: 'Now, if we calculate the expected amount we can win based on the probabilities
    we''ve calculated, we''ll get the *(0.474*1)+(0.474*-1)+(0.053*-1) ≈ -0.05* value:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果我们根据我们计算的概率计算我们可以赢得的预期金额，我们将得到*(0.474*1)+(0.474*-1)+(0.053*-1) ≈ -0.05*值：
- en: The preceding calculation tells us that we can expect to lose about 5 cents
    for every $1 bet on red. If we increase our bet, we can expect to lose more money.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的计算告诉我们，我们预计每下注1美元在红色上会损失约5美分。如果我们增加下注，我们预计会损失更多的钱。
- en: 'Exercise 9.03: Calculating the Average Winnings for a Game of Roulette If We
    Constantly Bet on Red'
  id: totrans-83
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习9.03：计算轮盘赌游戏的平均赢利如果我们不断下注红色
- en: 'Let''s rework our simulation code to simulate playing games of roulette and
    track the overall average amount of money we win or lose per game. Then, we will
    graph the results like we did for the coin flipping scenario:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们重新调整我们的模拟代码，模拟玩轮盘赌游戏并跟踪每场游戏我们赢得或输掉的平均金额。然后，我们将像我们为抛硬币的情况那样绘制结果的图表：
- en: 'Import the `random` and `matplotlib` packages:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入`random`和`matplotlib`包：
- en: '[PRE15]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Create a variable for the sample size and set it to `10`. Create a variable
    called `bet` and set it to $1:'
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个样本大小的变量，并将其设置为`10`。创建一个名为`bet`的变量，并将其设置为1美元：
- en: '[PRE16]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Initialize the variables that we will use to collect the results of our simulation:'
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 初始化我们将用于收集模拟结果的变量：
- en: '[PRE17]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Run the simulation and collect the results:'
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行模拟并收集结果：
- en: '[PRE18]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Print the results of the simulation and the expected value of the average:'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打印模拟结果和平均期望值：
- en: '[PRE19]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Graph the expected value of the net change in money per game and the sample
    average of the net change in money per game:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 绘制每场游戏中净变化的期望值和净变化的样本平均值的图表：
- en: '[PRE20]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Run your notebook and you will get the following results:'
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行你的笔记本，你会得到以下结果：
- en: '[PRE21]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'The preceding code will generate the following graph:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 上述代码将生成以下图表：
- en: '![Figure 9.4: Running average net per game of roulette over 10 games played'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.4：进行了10场游戏的轮盘每场游戏的平均净收益'
- en: '](image/B15968_09_04.jpg)'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_04.jpg)'
- en: 'Figure 9.4: Running average net per game of roulette over 10 games played'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.4：进行了10场游戏的轮盘每场游戏的平均净收益
- en: In the preceding diagram, the solid line represents the average winnings per
    game during the 10 games we played. The dashed line represents how much money
    we can expect to win or lose per game. We should be losing about 5 cents per game
    but, in this specific scenario, we ended up losing 20 cents in total, much less
    than losing 5 cents per game. If you remove `random.seed(54321)` from the code
    and rerun the simulation, the results will be different. Feel free to experiment
    and change the amount you bet each time and see what happens.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 在上图中，实线代表我们玩的10场游戏中每场游戏的平均赢钱数。虚线代表我们每场游戏可以期望赢得或输掉的金额。我们应该每场游戏输掉大约5美分，但在这种特定情况下，我们总共输掉了20美分，远少于每场游戏输掉5美分。如果从代码中删除`random.seed(54321)`并重新运行模拟，结果将会有所不同。随意尝试并改变每次下注的金额，看看会发生什么。
- en: Note
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To access the source code for this specific section, please refer to https://packt.live/3dTdlEb.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问此特定部分的源代码，请参阅https://packt.live/3dTdlEb。
- en: You can also run this example online at https://packt.live/2ZtkOEV.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以在https://packt.live/2ZtkOEV上在线运行此示例。
- en: 'But this isn''t reflective of what happens in a casino. No casino only opens
    for 10 games of roulette a day. So, what happens to our graph if we change the
    number of games from 10 to 100,000? Setting the sample size variable to 100,000
    and rerunning the code yields a graph that looks like this:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 但这并不反映赌场的情况。没有赌场一天只开放10场轮盘赌游戏。那么，如果我们将游戏次数从10次改为100,000次，我们的图会发生什么变化？将样本大小变量设置为100,000并重新运行代码，得到的图看起来像这样：
- en: '![Figure 9.5: Running average net per game of roulette over 100,000 games played'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.5：进行了100,000场游戏的轮盘每场游戏的平均净收益'
- en: '](image/B15968_09_05.jpg)'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_05.jpg)'
- en: 'Figure 9.5: Running average net per game of roulette over 100,000 games played'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.5：进行了100,000场游戏的轮盘每场游戏的平均净收益
- en: 'Notice that the blue line quickly converges to the average dollar net per game
    of -0.05\. Specifically, this simulation yielded a -0.054 dollar net, not too
    far off our expected value. In practical terms, the casino will gain money and
    gamblers will lose money on a per game basis in the long run. Now, back to the
    question of the green spaces. If we removed them from the game, there would be
    18 red and 18 black spaces. Let''s recalculate our expected value under these
    conditions:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，蓝线迅速收敛到每场游戏的平均净收益-0.05美元。具体来说，这次模拟产生了-0.054美元的净收益，与我们的预期值相差不远。实际上，长期来看，赌场会赚钱，赌徒会输钱。现在，回到绿色空间的问题。如果我们从游戏中移除它们，将会有18个红色和18个黑色的空间。让我们在这些条件下重新计算我们的期望值：
- en: '*(probability of landing on red * winnings or losses when we land on red) +*'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '*(落在红色上的概率*落在红色上时的赢得或输掉的钱)+*'
- en: '*(probability of landing on black * winnings or losses when we land on black)*'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: '*(落在黑色上的概率*落在黑色上时的赢得或输掉的钱)*'
- en: '![Figure 9.6: Formula to calculate the expected value'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.6：计算期望值的公式'
- en: '](image/B15968_09_06.jpg)'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_06.jpg)'
- en: 'Figure 9.6: Formula to calculate the expected value'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.6：计算期望值的公式
- en: What this means is that without the green spaces, neither the casino nor the
    gamblers will win or lose any money in the long run; both parties will walk away
    with the same amount of money they started with.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着没有绿色空间，赌场和赌徒在长期内都不会赢钱或输钱；双方都会带着与他们开始时一样的金额离开。
- en: Central Limit Theorem
  id: totrans-118
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 中心极限定理
- en: By way of a quick review of the previous section, the law of large numbers tells
    us that as our sample gets larger, the closer our sample mean matches up with
    the population average. While this tells us what we should expect the value of
    the sample mean to be, it does not tell us anything at all about the distribution.
    For that, we need the central limit theorem. The **central limit theorem** (**CLT**)
    states that if we have a large enough sample size, the distribution of the sample
    mean is approximately normal, with a mean of the population mean and a standard
    deviation of the population standard deviation divided by the square root of *n*.
    This is important because not only do we know the typical value that our population
    mean can take, but we know the shape and variance of the distribution as well.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 通过快速回顾前一节，大数定律告诉我们，随着样本的增大，样本均值越接近于总体均值。虽然这告诉我们样本均值的值应该是什么，但它并不告诉我们分布的任何信息。为此，我们需要中心极限定理。**中心极限定理**（**CLT**）指出，如果样本量足够大，样本均值的分布近似正态分布，均值为总体均值，标准差为总体标准差除以*n*的平方根。这很重要，因为我们不仅知道我们的总体均值可以取得的典型值，而且我们也知道分布的形状和方差。
- en: Normal Distribution and the CLT
  id: totrans-120
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 正态分布和中心极限定理
- en: In *Chapter 8*, *Foundational Probability Concepts and Their Applications*,
    we looked at a type of continuous distribution known as *normal distribution*,
    also known as a bell curve or a Gaussian curve (all three of these names mean
    the same thing). While there are many instances of normal distribution that appear,
    that's not the main reason why it is special. The reason that normal distribution
    is special is because the distribution of many statistics follows a normal distribution,
    including the sample mean.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 在*第8章*，*基础概率概念及其应用*中，我们看了一种连续分布，称为*正态分布*，也称为钟形曲线或高斯曲线（这三个名称的意思是一样的）。虽然有许多正态分布的实例，但这并不是它特殊的主要原因。正态分布之所以特殊是因为许多统计数据的分布都遵循正态分布，包括样本均值。
- en: Knowing the distribution of the sample mean turns out to be vital in many of
    the typical statistical problems that we end up solving day to day. We take the
    mean and the variance information and put it together to have some idea of how
    our sample mean will vary from sample to sample. This tells us whether a sample
    mean is something we expect to show up or something that we are not expecting
    and need to study closer. We can take two different samples from supposedly identical
    populations and prove that they are, in fact, significantly different to one another.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 了解样本均值的分布在我们日常解决的许多典型统计问题中非常重要。我们获取均值和方差信息并将其放在一起，以了解我们的样本均值将如何从样本到样本变化。这告诉我们样本均值是否是我们期望出现的东西，还是我们不期望出现并且需要更仔细研究的东西。我们可以从据称相同的两个不同群体中取两个不同的样本，并证明它们实际上彼此显着不同。
- en: Random Sampling from a Uniform Distribution
  id: totrans-123
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从均匀分布中随机抽样
- en: We can illustrate and verify the CLT by constructing a couple of simulations
    in Python, which is what we will do in the following exercises. The first simulation
    we are going to run is to take a random sample from a uniform distribution. A
    **uniform distribution** is one where every outcome is equally likely to be picked.
    If we were to graph a uniform distribution, it would look like a straight horizontal
    line going across the page. Some examples of uniform distributions are a dice
    roll, flipping a coin, or typical random number generators.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过在Python中构建一些模拟来说明和验证中心极限定理，这正是我们将在接下来的练习中要做的。我们将要运行的第一个模拟是从均匀分布中随机抽取样本。**均匀分布**是每个结果被选中的可能性都是相等的分布。如果我们绘制均匀分布，它看起来像是一条横穿页面的直线。均匀分布的一些例子是掷骰子、抛硬币或典型的随机数生成器。
- en: 'Exercise 9.04: Showing the Sample Mean for a Uniform Distribution'
  id: totrans-125
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习9.04：显示均匀分布的样本均值
- en: 'Let''s draw a random sample from a random number generator that generates random
    numbers between 0 and 100 and calculates the sample average:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从一个生成0到100之间的随机数的随机数生成器中抽取一个随机样本并计算样本平均值：
- en: 'Import the following Python packages that we will be using and set the `seed`:'
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入我们将使用的以下Python包并设置`seed`：
- en: '[PRE22]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Create a variable for the size of each sample and the total number of samples
    that you want to take. Since the CLT states that we need a sufficiently large
    sample, we have selected a sample size of 30\. Next, we are going to need a lot
    of sample means to graph and have set that value equal to 10,000:'
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建每个样本的大小和要抽取的总样本数的变量。由于中心极限定理规定我们需要足够大的样本，我们选择了样本大小为30。接下来，我们需要大量的样本均值来绘制图表，并将该值设置为10,000：
- en: '[PRE23]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Initialize the list we will use to collect our sample means and run through
    our simulation the specified number of times, collecting the sample mean of each
    sample:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 初始化我们将用于收集样本均值的列表，并运行我们的模拟指定次数，收集每个样本的样本均值：
- en: '[PRE24]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Create a histogram of the sample means that we collected. Over the top of the
    histogram, we will overlay what the CLT says the distribution of the sample mean
    should look like:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建我们收集的样本均值的直方图。在直方图的顶部，我们将覆盖中心极限定理所说的样本均值分布应该是什么样子的：
- en: '[PRE25]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Running this code in our notebook will give us the following result:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的笔记本中运行此代码将给我们以下结果：
- en: '![Figure 9.7: Distribution of sample average from 10,000 samples from a uniform
    distribution with a sample size of 30'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.7：从样本大小为30的均匀分布的10,000个样本中的样本平均值的分布'
- en: '](image/B15968_09_07.jpg)'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_07.jpg)'
- en: 'Figure 9.7: Distribution of sample average from 10,000 samples from a uniform
    distribution with a sample size of 30'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.7：从样本大小为30的均匀分布的10,000个样本中的样本平均值的分布
- en: The expected distribution given to us by the CLT almost perfectly overlays the
    histogram of the results of our simulation. Feel free to experiment and change
    the sample size and the number of sample means used to generate the graph.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 中心极限定理给出的期望分布几乎完全覆盖了我们模拟结果的直方图。随意尝试并更改样本大小和用于生成图表的样本均值的数量。
- en: Note
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To access the source code for this specific section, please refer to https://packt.live/31JG77I.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问此特定部分的源代码，请参阅https://packt.live/31JG77I。
- en: You can also run this example online at https://packt.live/3ggAq5m.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以在https://packt.live/3ggAq5m上在线运行此示例。
- en: Random Sampling from an Exponential Distribution
  id: totrans-143
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从指数分布中随机抽样
- en: 'We know that the CLT worked for the sample mean taken from a uniform distribution,
    but what about something that looks nothing like a uniform distribution? The CLT
    does not restrict the distribution of the sample we are drawing from, so would
    it work for something that looks nothing like a normal distribution? Let''s look
    at the exponential distribution. The **exponential distribution** is a distribution
    that falls very quickly as it goes left to right before leveling off and approaching,
    but not quite touching, zero. The following graph is of a typical exponential
    distribution:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道中心极限定理适用于从均匀分布中取得的样本均值，但是对于看起来一点也不像均匀分布的东西呢？中心极限定理不限制我们抽取的样本的分布，那么对于看起来一点也不像正态分布的东西，它会起作用吗？让我们看看指数分布。**指数分布**是一种分布，它在从左到右迅速下降，然后趋于平稳，但并没有完全接触到零。以下图表是典型的指数分布：
- en: '![Figure 9.8: Example of exponential distribution'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.8：指数分布示例'
- en: '](image/B15968_09_08.jpg)'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_08.jpg)'
- en: 'Figure 9.8: Example of exponential distribution'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.8：指数分布示例
- en: There a lot of examples of exponential distributions in the real world. Examples
    include how fast hot liquids cool, radioactive decay, and modeling the failure
    of mechanical parts.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 现实世界中有很多指数分布的例子。例如，热液体冷却的速度，放射性衰变，以及机械零件的故障建模。
- en: 'Exercise 9.05: Taking a Sample from an Exponential Distribution'
  id: totrans-149
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习9.05：从指数分布中抽取样本
- en: 'In this exercise, we will randomly sample an exponential distribution. The
    following is the code that we can use to simulate drawing from an exponential
    distribution:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将随机抽样指数分布。以下是我们可以用来模拟从指数分布中抽样的代码：
- en: 'Import the Python packages that we will need. In order to see the effects of
    taking a smaller sample, we will set the sample size to `5` (refer to the following
    code), but keep the number of samples at `10000`:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入我们需要的Python包。为了看到取较小样本的影响，我们将样本大小设置为`5`（参考以下代码），但保持样本数为`10000`：
- en: '[PRE26]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'Initialize the variable that we will use to collect the results of our simulation.
    Run the simulation, but this time sample from an exponential distribution rather
    than a uniform distribution:'
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 初始化我们将用来收集模拟结果的变量。运行模拟，但这次从指数分布中取样，而不是均匀分布：
- en: '[PRE27]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Create a histogram of the sample means we collected and overlay what the CLT
    says we should expect from it:'
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建我们收集的样本均值的直方图，并叠加中心极限定理对其的预期：
- en: '[PRE28]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'Running the code that we typed in our Jupyter notebook will give us the following
    graph:![Figure 9.9: Distribution of sample average from 10,000 samples from an
    exponential distribution with a sample size of 5'
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在我们的Jupyter笔记本中输入的代码将给我们以下图形：![图9.9：来自指数分布的5个样本的10,000个样本平均值分布
- en: '](image/B15968_09_09.jpg)'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_09.jpg)'
- en: 'Figure 9.9: Distribution of sample average from 10,000 samples from an exponential
    distribution with a sample size of 5'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.9：来自指数分布的5个样本的10,000个样本平均值分布
- en: 'As in the previous exercise entitled *Exercise 9.04*, *Showing the Sample Mean
    for a Uniform Distribution*, the orange line tells us what the CLT expects us
    to have. While our green histogram is similar to what we should expect, it is
    clearly skewed to the right and not a bell-shaped curve at all. But remember that
    the CLT requires us to take a large enough sample. Clearly, 5 is not large enough,
    so let''s increase our sample size from 5 to 50 and rerun the code. Doing so should
    yield something like the following:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 与之前的练习*Exercise 9.04*中的*显示均匀分布的样本均值*一样，橙色线告诉我们中心极限定理对我们的预期。虽然我们的绿色直方图与我们的预期相似，但显然向右倾斜，根本不是钟形曲线。但请记住，中心极限定理要求我们取足够大的样本。显然，5不够大，所以让我们将样本大小从5增加到50并重新运行代码。这样做应该会产生以下结果：
- en: '![Figure 9.10: Distribution of sample average from 10,000 samples from an exponential
    distribution with a sample size of 50'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.10：来自指数分布的50个样本的10,000个样本平均值分布'
- en: '](image/B15968_09_10.jpg)'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_10.jpg)'
- en: 'Figure 9.10: Distribution of sample average from 10,000 samples from an exponential
    distribution with a sample size of 50'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.10：来自指数分布的50个样本的10,000个样本平均值分布
- en: 'This looks a lot closer to what we expected. Clearly, a sample size of 50 is
    big enough, while a sample size of 5 is not. But a question might be running through
    your head right now: "What sample size is large enough and how will we know?".
    The answer really depends on the underlying distributions; the more skewed the
    underlying distribution, the larger sample you must take to ensure a large enough
    sample for the CLT.'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 这看起来更接近我们的预期。显然，50个样本的大小足够大，而5个样本的大小不够。但现在你可能会有一个问题：“什么样本大小足够大，我们如何知道？”。答案实际上取决于基础分布；基础分布偏斜越大，您必须取足够大的样本来确保中心极限定理的样本足够大。
- en: Note
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To access the source code for this specific section, please refer to https://packt.live/2D2phXE.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问此特定部分的源代码，请参阅https://packt.live/2D2phXE。
- en: You can also run this example online at https://packt.live/2NRcvNP.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以在https://packt.live/2NRcvNP上在线运行此示例。
- en: Later in the chapter, we will go through how to calculate the sample size you
    would need to take for a desired result, but we only consider the CLT to apply
    to samples of size 30 or more.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章后面，我们将介绍如何计算所需的样本大小，但我们只考虑中心极限定理适用于样本大小为30或更大的样本。
- en: Confidence Intervals
  id: totrans-169
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 置信区间
- en: As we saw with the previous simulations, our sample mean can vary from sample
    to sample. While, in a simulation, we have the luxury of taking 10,000 samples,
    we cannot do that in the real world; it would be far too expensive and time-consuming.
    Typically, we are given only enough resources to gather one sample. So how can
    we be confident in the results of our sample? Is there any way we can account
    for this variability when reporting our sample mean?
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在之前的模拟中看到的，我们的样本均值可能会因样本而异。在模拟中，我们有奢侈的取10,000个样本的条件，但在现实世界中我们做不到；这将是非常昂贵和耗时的。通常，我们只有足够的资源来收集一个样本。那么我们如何能对我们样本的结果有信心呢？在报告我们的样本均值时，有没有办法考虑到这种变异性？
- en: The good news is that the CLT gives us an idea of the variance in our sample
    mean. We can apply the CLT and take sampling variability into account by using
    a confidence interval. More generally, a **confidence interval** is a range of
    values for a statistic (an example of a statistic is a sample mean) based on a
    distribution that has some degree of confidence of how likely it is to contain
    the true value for the mean. We are not always going to be calculating confidence
    intervals for just the sample mean; the idea applies to any statistic that you
    calculate from a sample (the only difference is how you calculate it). Confidence
    intervals can be used to calculate how big a sample we need to take and what the
    margin of error is.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 好消息是中心极限定理给了我们关于样本均值的方差的一个概念。我们可以应用中心极限定理，并通过使用置信区间来考虑抽样变异性。更一般地，**置信区间**是一个统计量（样本均值的一个例子）的一系列值，基于一个具有一定置信度的分布，用于估计包含真实均值的值的可能性有多大。我们不总是只计算样本均值的置信区间；这个想法适用于从样本中计算出的任何统计量（唯一的区别是如何计算它）。置信区间可以用来计算我们需要抽取多大的样本以及误差范围是多少。
- en: Calculating the Confidence Interval of a Sample Mean
  id: totrans-172
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 计算样本均值的置信区间
- en: The first type of confidence interval we will calculate is a **z-confidence
    interval**, which will give us an interval (or range) of values for our sample
    mean based on the standard normal model (sometimes referred to as a z-distribution).
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将计算的第一种置信区间是**z置信区间**，它将根据标准正态模型（有时称为z分布）为我们的样本均值提供一个区间（或范围）的值。
- en: 'In order to calculate a z-confidence interval for our sample mean, we are going
    to need to know four things:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 为了计算样本均值的z置信区间，我们需要知道四件事：
- en: The sample mean
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 样本均值
- en: The sample size
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 样本大小
- en: The population variance
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 人口方差
- en: The critical value or some level of confidence
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关键值或某个置信水平
- en: 'The sample mean and size are calculated from the sample that we collect. The
    population variance isn''t something we calculate from our sample; the population
    variance is a value that is given to us. Typically, it is some accepted value
    for variance given from prior studies and research. The final piece of the puzzle
    is the critical value, or the confidence level; this is where the normal distribution
    and the CLT come in. To get an idea of what a critical value is, let''s look at
    a standard normal distribution (which is a normal distribution that always has
    a mean of 0 and a variance of 1) and the area under its curve:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 我们计算样本均值和大小是从我们收集的样本中计算出来的。人口方差不是我们从样本中计算出来的；人口方差是一个给定给我们的值。通常，这是一些先前研究和研究中给出的方差的接受值。谜题的最后一块是关键值，或置信水平；这就是正态分布和中心极限定理发挥作用的地方。为了了解关键值是什么，让我们看一下标准正态分布（它是一个总是具有均值为0和方差为1的正态分布）及其曲线下的面积：
- en: '![Figure 9.11: Example of a standard normal model'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.11：标准正态模型的示例'
- en: '](image/B15968_09_11.jpg)'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_11.jpg)'
- en: 'Figure 9.11: Example of a standard normal model'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.11：标准正态模型的示例
- en: 'We know in our normal distribution that our mean is in the center (it is 0
    in this case). The area underneath the curve from -1 to 1 accounts for 68% of
    the total area. Another way of putting this is that 68% of the values described
    by this distribution are between -1 and 1\. About 95% of the values are between
    -2 and 2\. Applying this to the distribution of the sample mean, we can find the
    range that 95% of our sample means will take. Referring back to *Figure 9.7*:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道在我们的正态分布中，我们的均值在中心（在这种情况下是0）。曲线下面积从-1到1占总面积的68%。另一种说法是，由这个分布描述的值中有68%在-1和1之间。大约95%的值在-2和2之间。将这应用于样本均值的分布，我们可以找到95%的样本均值将取的范围。参考*图9.7*：
- en: '![Figure 9.12: Distribution of sample average from 10,000 samples from a uniform
    distribution with a sample size of 30'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.12：来自30个样本的均匀分布的10,000个样本的样本平均值分布'
- en: '](image/B15968_09_12.jpg)'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_12.jpg)'
- en: 'Figure 9.12: Distribution of sample average from 10,000 samples from a uniform
    distribution with a sample size of 30'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.12：来自30个样本的均匀分布的10,000个样本的样本平均值分布
- en: If we look, the center of our bell curve is 50, which is the expected value
    of a uniform distribution that goes from 0 to 100\. The expected standard deviation
    for a uniform distribution that goes from 0 to 100 would be about 5.27 (![4](image/B15968_09_InlineEquation3.png)).
    So, applying the same logic as before, about 68% of our values are between 45
    and 55, and about 95% of our values are between 40 and 60\. These ranges are our
    confidence intervals.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们看一下，我们的钟形曲线的中心是50，这是从0到100的均匀分布的预期值。从0到100的均匀分布的预期标准差约为5.27 (![4](image/B15968_09_InlineEquation3.png))。因此，应用与之前相同的逻辑，大约68%的值在45和55之间，大约95%的值在40和60之间。这些范围就是我们的置信区间。
- en: 'The more formal equation for calculating a z-confidence interval is given here:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 计算z置信区间的更正式方程如下：
- en: '![Figure 9.13: Formula for calculating z-confidence interval'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.13：计算z置信区间的公式'
- en: '](image/B15968_09_13.jpg)'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_13.jpg)'
- en: 'Figure 9.13: Formula for calculating z-confidence interval'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.13：计算z置信区间的公式
- en: 'In this equation:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个方程中：
- en: '*x̄* is the sample mean.'
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*x̄*是样本均值。'
- en: '*n* is the sample size.'
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*n*是样本大小。'
- en: '*σ* is the population standard deviation.'
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*σ*是人口标准差。'
- en: '*Z* is the critical value of our confidence level.'
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Z*是我们置信水平的关键值。'
- en: 'Our final confidence interval is going to be two numbers: an upper limit where
    we add the two terms together, and a lower limit where we subtract the two terms.
    Luckily, this is something we can write a function for in Python, as follows:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 我们最终的置信区间将是两个数字：一个上限，我们将两个项相加，一个下限，我们将两个项相减。幸运的是，这是我们可以在Python中编写一个函数的事情，如下所示：
- en: '[PRE29]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'This function takes the following as input: the data we have gathered, along
    with the population standard deviation (given to us), and a level of confidence.
    It will print what the confidence level is to the console and return it as a tuple.'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 此函数将以下内容作为输入：我们收集的数据，以及总体标准偏差（由我们给出），以及置信水平。它将在控制台上打印置信水平并将其作为元组返回。
- en: 'Exercise 9.06: Finding the Confidence Interval of Polling Figures'
  id: totrans-200
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习9.06：找到民意调查数据的置信区间
- en: 'You are running a political campaign and decide to run 30 focus groups with
    about 10 people in each group. You get the results and want to report to your
    candidate the number of people who would vote for them in a typical 10-person
    group. Since there is some variability in each focus group, you decide that the
    most accurate way is to give a 95% z-confidence interval. You assume from past
    experience that the standard deviation is 2.89\. Let''s model this using Python:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 您正在进行一场政治竞选，并决定进行30个焦点群体，每个群体约有10人。您获得了结果，并希望向您的候选人报告典型10人群体中会投票给他们的人数。由于每个焦点群体都有一些变化，您决定最准确的方法是给出95%的z-置信区间。您假设根据过去的经验，标准偏差为2.89。让我们使用Python对此进行建模：
- en: 'Import the `random` Python package and set the seed to `39809`. This will ensure
    that we get the same results every time we run the program:'
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入`random` Python包并将种子设置为`39809`。这将确保我们每次运行程序时都获得相同的结果：
- en: '[PRE30]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Initialize our sample list and collect our samples from our focus groups. From
    there, we just enter the information into our function:'
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 初始化我们的样本列表并从焦点群体中收集我们的样本。然后，我们只需将信息输入到我们的函数中：
- en: '[PRE31]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'If you did everything correctly, then the following should be printed when
    you run your notebook:'
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您做得正确，那么在运行笔记本时应打印出以下内容：
- en: '[PRE32]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: This tells us that in a typical focus group, anywhere between 4 to 6 people
    in each group will vote for our candidate. This signals to you that the campaign
    should keep working harder to convince more people to vote for your candidate.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 这告诉我们，在典型的焦点群体中，每个群体中有4到6人会投票给我们的候选人。这向您表明，竞选活动应继续努力说服更多人投票给您的候选人。
- en: Note
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To access the source code for this specific section, please refer to https://packt.live/2Zp6XiU.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问此特定部分的源代码，请参阅https://packt.live/2Zp6XiU。
- en: You can also run this example online at https://packt.live/3eUBL1B.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以在https://packt.live/3eUBL1B上在线运行此示例。
- en: Small Sample Confidence Interval
  id: totrans-212
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 小样本置信区间
- en: 'The z-confidence interval works for when you have a large enough sample (remember
    our rule of thumb of a sample size of 30 or greater); but what if the sample you
    have is not large enough? Then you can use a **t-confidence interval**, which
    is basically the same as the z-confidence interval with two exceptions:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: z-置信区间适用于样本足够大的情况（记住我们的经验法则是样本大小为30或更大）；但是如果您的样本不够大怎么办？那么您可以使用**t-置信区间**，它基本上与z-置信区间相同，但有两个例外：
- en: The t-confidence interval does not assume that you know the population standard
    deviation, so we use the sample standard deviation.
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: t-置信区间不假设您知道总体标准偏差，因此我们使用样本标准偏差。
- en: It uses the t-distribution to calculate the critical value rather than the z
    (standard normal) distribution. The difference between the two is that the t-distribution
    is less concentrated around the mean to account for not knowing the population
    standard deviation.
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它使用t-分布来计算临界值，而不是z（标准正态）分布。两者之间的区别在于t-分布在平均值周围的集中程度较低，以解释不知道总体标准偏差的情况。
- en: 'We need to know two things in order to calculate a t-confidence interval; the
    first is the degrees of freedom, which is calculated as the sample size minus
    1 (*n-1*). The second is the confidence level. The formula for a t-confidence
    interval is given here:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 为了计算t-置信区间，我们需要知道两件事；第一是自由度，它是样本大小减1（*n-1*）计算得出。第二是置信水平。t-置信区间的公式如下：
- en: '![Figure 9.14: Formula for calculating t-confidence interval'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.14：计算t-置信区间的公式'
- en: '](image/B15968_09_14.jpg)'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_14.jpg)'
- en: 'Figure 9.14: Formula for calculating t-confidence interval'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.14：计算t-置信区间的公式
- en: 'In this equation:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个方程中：
- en: '*x̄* is the sample mean.'
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*x̄*是样本均值。'
- en: '*t*n-1 is the critical value with *n-1* degrees of freedom.'
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*t*n-1是具有*n-1*自由度的临界值。'
- en: '*s* is the sample standard deviation.'
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*s*是样本标准偏差。'
- en: '*n* is the sample size.'
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*n*是样本大小。'
- en: 'Just like with the z-interval, our final answer is going to be a lower and
    upper limit. We will write a function in Python to do all the calculation work
    for us:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 就像z-区间一样，我们的最终答案将是下限和上限。我们将编写一个Python函数来为我们完成所有计算工作：
- en: '[PRE33]'
  id: totrans-226
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'Let''s use the same sample list as the z-confidence interval. The `t_confidence_interval`
    function is used in the same way as our z-confidence interval function; we will
    enter a list of the data for which we want to calculate the t-confidence interval
    and specify our confidence level. There is no need to include a population standard
    deviation; the t-confidence interval uses the sample standard deviation and will
    calculate it for us automatically. The correct usage of the `t_confidence_interval`
    function is as follows:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们使用与z-置信区间相同的样本列表。`t_confidence_interval`函数的使用方式与我们的z-置信区间函数相同；我们将输入要计算t-置信区间的数据列表，并指定我们的置信水平。无需包括总体标准偏差；t-置信区间使用样本标准偏差，并将自动为我们计算。`t_confidence_interval`函数的正确使用方式如下：
- en: '[PRE34]'
  id: totrans-228
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'If you do everything correctly, the following should output in your notebook
    when you run the preceding code:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您做得正确，当您运行前面的代码时，笔记本中应输出以下内容：
- en: '[PRE35]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: Notice that the t-confidence interval is wider than our z-confidence interval.
    This is because we have more uncertainty in using the sample standard deviation
    to estimate the standard deviation of the population than using the known value.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，t-置信区间比我们的z-置信区间更宽。这是因为我们在使用样本标准偏差估计总体标准偏差时存在更多的不确定性，而不是使用已知值。
- en: The nice thing about the t-confidence interval is that not only can it be used
    for small samples or situations where you do not know the population standard
    deviation; it can be used in any situation where you would use a z-confidence
    interval. In fact, as your sample size gets larger, the closer the t-distribution
    gets to the z (standard normal) distribution. So, if you are ever unsure of the
    value of the population standard deviation that you are given or find while looking
    at prior research, you can always play it safe and use the t-confidence interval.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: t-置信区间的好处在于它不仅可以用于小样本或者你不知道总体标准差的情况；它可以在任何需要使用z-置信区间的情况下使用。事实上，随着样本量的增大，t-分布越接近于z（标准正态）分布。所以，如果你对所给的总体标准差的值不确定，或者在查看以前的研究时发现，你总是可以保险起见使用t-置信区间。
- en: Confidence Interval for a Proportion
  id: totrans-233
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 样本比例的置信区间
- en: Let's go back to the example of the political campaign. After the different
    focus groups gave you results that were not definitive, a new poll came out that
    has your candidate winning the race, with 54% of the sample of 350 people saying
    they will vote for your candidate, while your opponent got the other 46%. You
    want to calculate a confidence interval for this proportion so you can consider
    sampling variability.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回到政治竞选的例子。在不同的焦点小组给出了不明确的结果之后，一项新的民意调查显示你的候选人正在赢得竞选，其中350人的样本中有54%表示他们将投票给你的候选人，而你的对手得到了另外46%。你想计算这个比例的置信区间，以便考虑抽样变异性。
- en: 'We know how to calculate the confidence interval of a sample mean, but how
    do we calculate a confidence interval for a proportion? The percentage of a sample
    is different than the mean value of a sample. Luckily for us, there is a formula
    for calculating a confidence interval for a proportion of a sample:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道如何计算样本均值的置信区间，但是如何计算样本比例的置信区间呢？样本的百分比与样本的均值不同。幸运的是，我们有一个计算样本比例置信区间的公式：
- en: '![Figure 9.15: Formula for calculating confidence interval'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.15：计算置信区间的公式
- en: '](image/B15968_09_15.jpg)'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_15.jpg)'
- en: 'Figure 9.15: Formula for calculating confidence interval'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.15：计算置信区间的公式
- en: 'In this equation:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个方程中：
- en: '*p̂* is the sample proportion. In this example, it is the 54% of people that
    voted for you.'
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*p̂*是样本比例。在这个例子中，是投票给你的人的54%。'
- en: '*n* is the sample size. For this example, it is the 350 people.'
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*n*是样本量。在这个例子中，是350人。'
- en: '*Z* is our critical value from the standard normal distribution. We calculate
    this the same way as the z-confidence interval.'
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Z*是我们从标准正态分布中得到的临界值。我们计算方法与z-置信区间相同。'
- en: 'There are some conditions that need to be met before we can apply this:'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 在应用之前，有一些条件需要满足：
- en: The observations in our sample are independent—so, in our example, one person's
    answer did not influence another person's answer.
  id: totrans-244
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们样本中的观察结果是独立的-所以在我们的例子中，一个人的答案不会影响另一个人的答案。
- en: We need at least 10 successes and 10 failures—so we need at least 10 people
    that vote for us and 10 people that would vote for your opponent.
  id: totrans-245
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们需要至少有10个成功和10个失败-所以我们需要至少有10个人投票给我们，还有10个人会投票给你的对手。
- en: 'Again, we can create a function in Python to do the calculations for us:'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，我们可以在Python中创建一个函数来进行计算：
- en: '[PRE36]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'Unlike the other functions we created, we do not feed in a list of our data
    values. Instead, we can enter our statistics directly and set a confidence level.
    To create a confidence interval for our poll, we enter the information like so:'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 与我们创建的其他函数不同，我们不需要输入我们数据值的列表。相反，我们可以直接输入我们的统计数据并设置置信水平。为了创建我们的民意调查的置信区间，我们输入信息如下：
- en: '[PRE37]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'And the following results will be printed in the console:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 并且以下结果将被打印在控制台中：
- en: '[PRE38]'
  id: totrans-251
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: This tells us that we can be 95% confident that the true value of the proportion
    of the vote our candidate would get is between 48.8% and 59.2%. Hence, the results
    of the poll are inconclusive, and it shows us we still have more work to do to
    convince people to vote for our candidate. Note that this is where polls typically
    get the margin of error. The **margin of error** is the distance from our point
    estimator (*p̂* in this example) and either boundary (since the confidence interval
    is symmetrical; it does not matter whether we use the upper or lower bound). For
    this poll, our margin of error would be *0.592 - 0.54 = 0.052*.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 这告诉我们，我们可以有95%的把握，我们的候选人得到的选票比例的真实值在48.8%和59.2%之间。因此，民意调查的结果是不确定的，这表明我们仍然需要更多的工作来说服人们投票给我们的候选人。请注意，这通常是民意调查得到的误差范围。**误差范围**是我们的点估计器（在这个例子中是*p̂*）与任一边界之间的距离（因为置信区间是对称的；无论我们使用上限还是下限都没有关系）。对于这次民意调查，我们的误差范围将是*0.592
    - 0.54 = 0.052*。
- en: So, the margin of error for the preceding poll would be about 5.2%. This is
    something to keep in mind when you are taking in the results of any poll, whether
    political or otherwise.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，前面民意调查的误差范围约为5.2%。这是在你接受任何民意调查结果时需要记住的事情，无论是政治还是其他方面。
- en: Hypothesis Testing
  id: totrans-254
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 假设检验
- en: In the previous section, we ran simulations where the sample mean changed from
    sample to sample, despite sampling from the same population. But how will we know
    if a sample mean we calculate is significantly different from a preconceived value
    or even a different sample? How will we know if a difference is variability in
    action, or if the measures are different? The answer lies in conducting a hypothesis
    test.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 在前一节中，我们进行了模拟，样本均值在不同样本中发生了变化，尽管是从同一总体中抽样的。但是我们如何知道我们计算的样本均值是否与预设值或者不同样本显著不同？我们如何知道差异是变异性的作用，还是测量值不同？答案在于进行假设检验。
- en: A **hypothesis test** is a statistical test that is designed to determine whether
    a statistic is significantly different from what we expect. Examples of hypothesis
    tests include checking to see whether the sample mean is significantly different
    from a pre-established standard or compare two different samples to see whether
    they are statistically different or the same.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: '**假设检验**是一种旨在确定统计量是否与我们的预期显著不同的统计检验。假设检验的例子包括检查样本均值是否与预先建立的标准显著不同，或者比较两个不同样本，看它们是否在统计上不同或相同。'
- en: Parts of a Hypothesis Test
  id: totrans-257
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 假设检验的部分
- en: 'There are three main parts to any hypothesis test: the hypotheses, the test
    statistic, and the p-value. The *hypotheses* are what you are conducting the tests
    on to see whether they should be rejected or accepted. There are always two hypotheses
    for any test: a **null hypothesis** (typically referred to as using the symbol
    *H*0) and an **alternative hypothesis** (typically referred to as using the symbol
    *H*A). The null hypothesis is what we have always assumed or known to be true;
    in other words, it is what our pre-established standard is. The alternative hypothesis
    is the alternative we are going to compare to our null; in practical terms, it
    is the thing that we want to prove to be true.'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 任何假设检验都有三个主要部分：假设、检验统计量和p值。*假设*是你进行检验的对象，以确定它们是否应该被拒绝或接受。任何测试都有两个假设：一个**零假设**（通常用符号*H*0表示）和一个**备择假设**（通常用符号*H*A表示）。零假设是我们一直假定或已知为真的东西；换句话说，它是我们预先建立的标准。备择假设是我们将要与零假设进行比较的备选项；在实际情况下，它是我们想要证明为真的东西。
- en: 'Here are some examples of several hypotheses:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些假设的例子：
- en: 'You are the leader of a manufacturing company and you have a process that typically
    uses up 15 liters of fuel per hour. Your company is testing changes to this process
    to try and use less fuel. They took a sample of 24 hours and found that the new
    process used 13.7 liters of fuel per hour. The company needs to know if that reduction
    is significant or whether it can be attributed to variance in the process. Your
    null hypothesis would be what the process typically uses: *H*O*: μ = 15*. We want
    to try and prove that the new process uses less fuel, so our alternative hypothesis
    is: *H*A*: μ < 15*.'
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '你是一家制造公司的领导，你有一个通常每小时使用15升燃料的流程。你的公司正在测试对这个流程的改变，以尝试使用更少的燃料。他们对24小时进行了抽样，发现新流程每小时使用13.7升燃料。公司需要知道这种减少是否显著，或者是否可以归因于流程中的差异。你的零假设将是流程通常使用的：*H*O*:
    μ = 15*。我们希望证明新流程使用更少的燃料，所以我们的备择假设是：*H*A*: μ < 15*。'
- en: 'Richard is a commercial baker in your city. He is wondering whether to invest
    in new equipment for the bread-making portion of his factory. Normally, his factory
    can make about 15,000 loaves of bread during one shift. Richard sent one of his
    shifts to try the new equipment for 5 shifts and they could make, on average,
    17,500 loaves per shift. You tell Richard to test to see whether this is significantly
    different; the null hypothesis would be based on what he typically makes (*H*O*:
    μ=15000*), and the alternative hypothesis would be what he wants to try and prove
    (*H*A*: μ = 15000*).'
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Richard是你们城市的一名商业面包师。他在考虑是否要投资于他工厂的制面包设备。通常情况下，他的工厂在一个班次可以制作大约15,000个面包。Richard派了一个班次去尝试新设备，连续5个班次平均每班次可以制作17,500个面包。你告诉Richard要测试一下这是否显著不同；零假设将基于他通常的产量（*H*O*:
    μ=15000*），备择假设将是他想要尝试证明的（*H*A*: μ = 15000*）。'
- en: 'Linda is an analyst for a quality control department in her company. A part
    that the company makes needs to be 15 inches long. Since the company cannot measure
    every part that is made, Linda takes a sample of 100 parts and finds that the
    average length of this sample is 14.89 inches. She tells you that they expect
    each part to be 15 inches (*H*O*: μ = 15*), and they want to try and figure out
    whether the sample is evidence that the average part is not typically 15 inches
    (*H*A*:μ ≠ 15*).'
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Linda是她公司质量控制部门的分析师。公司生产的一个零件需要15英寸长。由于公司无法测量每个零件，Linda抽样了100个零件，发现这个样本的平均长度是14.89英寸。她告诉你，他们期望每个零件都是15英寸（*H*O*:
    μ = 15*），他们想要尝试弄清楚样本是否证明平均零件通常不是15英寸（*H*A*:μ ≠ 15*）。'
- en: 'Each of the preceding situations depicts one of the three typical hypotheses
    tests that you will encounter: an upper-tailed test, a lower-tailed test, and
    a two-tailed test, respectively. Knowing the type of test you are conducting is
    necessary so that you can write your hypothesis and calculate your p-value correctly.'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 前述情况中的每一种都描述了你将遇到的三种典型假设检验之一：上尾检验、下尾检验和双尾检验。了解你正在进行的测试类型是必要的，这样你才能正确地写出你的假设并计算你的p值。
- en: The **test statistic** is a number that describes how our observed sample compares
    to what we assume or know to be true about the mean we are testing. It is the
    part that is going to vary the most between the different tests that we conduct;
    it is based on the specific statistic we are testing and the test used. This is
    the most mathematical part of the statistics test, typically represented by a
    formula. The **p-value** is the last part of our hypothesis test; it is typically
    defined as the probability of seeing a sample like the one we collected if we
    assume the null hypothesis is true. We compare this value to some level of significance
    (0.05 is the most frequently used significance level); if our p-value is smaller
    than our level of significance, then we reject the null hypothesis and have evidence
    that the alternative hypothesis is true. Likewise, if our p-value is larger than
    our level of significance, we fail to reject the null hypothesis and do not have
    any evidence that the alternative hypothesis is true.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: '**检验统计量**是一个描述我们观察到的样本与我们假设或已知的平均值相比的数字。这是我们进行不同测试时最容易变化的部分；它基于我们正在测试的特定统计量和所使用的检验。这是统计检验中最数学化的部分，通常用公式表示。**p值**是我们假设检验的最后部分；它通常被定义为假设零假设为真时观察到类似我们收集的样本的概率。我们将这个值与某个显著性水平进行比较（0.05是最常用的显著性水平）；如果我们的p值小于显著性水平，那么我们拒绝零假设，并且有证据表明备择假设为真。同样，如果我们的p值大于显著性水平，我们未能拒绝零假设，并且没有证据表明备择假设为真。'
- en: The Z-Test
  id: totrans-265
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Z-检验
- en: 'Just like our z-confidence interval, there is a hypothesis test based on the
    standard normal model called the **z-test**. Just like the z-confidence interval,
    the z-test assumes that we know the population standard deviation and we have
    a large enough sample (again, the rule of thumb is a sample size of at least 30).
    The basic setup for a z-test is as follows:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 就像我们的z-置信区间一样，基于标准正态模型的假设检验称为**z-检验**。就像z-置信区间一样，z-检验假设我们知道总体标准偏差，并且我们有足够大的样本（同样，经验法则是样本大小至少为30）。z-检验的基本设置如下：
- en: '*H*O*:μ = μ*O (don''t worry; *μ*O is what we typically think the mean is and
    is just a number)'
  id: totrans-267
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*H*O*:μ = μ*O（不用担心；*μ*O通常是我们认为的平均值，只是一个数字）'
- en: '*H*A*: μ < μ*O or *H*A*: μ > μ*O or *H*A*: μ ≠ μ*O (*μ*O will always match
    what we have for the null hypothesis)'
  id: totrans-268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*H*A*: μ < μ*O 或 *H*A*: μ > μ*O 或 *H*A*: μ ≠ μ*O（*μ*O将始终与我们的零假设相匹配）'
- en: 'Test statistics: ![5](image/B15968_09_InlineEquation4.png)'
  id: totrans-269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检验统计量：![5](image/B15968_09_InlineEquation4.png)
- en: 'Where:'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 其中：
- en: '*x̄* is the sample average.'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: '*x̄*是样本平均值。'
- en: '*σ* is the known population standard deviation.'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: '*σ*是已知的总体标准偏差。'
- en: '*n* is the sample size.'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: '*n*是样本大小。'
- en: 'P value: ![6](image/B15968_09_InlineEquation5.png)'
  id: totrans-274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: P值：![6](image/B15968_09_InlineEquation5.png)
- en: While none of this math is hard once you get the hang of it, we can use Python
    to make the calculations very simple.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你掌握了这些数学，这些计算就不难，我们可以使用Python使计算变得非常简单。
- en: 'Exercise 9.07: The Z-Test in Action'
  id: totrans-276
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习9.07：Z-检验实例
- en: 'Let''s take a random sample from a distribution with a known population mean
    and see whether our z-test can select the correct hypothesis:'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从具有已知总体均值的分布中随机抽取一个样本，并看看我们的z-检验是否能选择正确的假设：
- en: 'Let''s start this exercise by importing all the libraries we are going to need
    in order to be able to run our code and set the `seed` value:'
  id: totrans-278
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们从导入我们将需要的所有库开始这个练习，以便能够运行我们的代码并设置`seed`值：
- en: '[PRE39]'
  id: totrans-279
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'We will write a function to do our z-test for us. The inputs will be a sample
    (in the form of a list), the population standard deviation (remember, specifying
    this is one of the requirements for the z-tests), the value of our hypothesis,
    the significance level of our test, and the test type (upper-, lower-, or two-tailed
    test). We will calculate the sample mean and sample size from the given list.
    Then, we will take the inputs and calculate our test statistic. Then, based on
    what hypothesis test we are deciding to do, we calculate a p-value accordingly.
    Finally, we compare our p-value to the level of significance, and if it is less
    than our level of significance, we reject the null hypothesis. Otherwise, we fail
    to reject the null hypothesis:'
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将编写一个函数来进行z-检验。输入将是一个样本（以列表的形式），总体标准偏差（记住，指定这一点是z-检验的要求之一），我们假设的值，测试的显著性水平，以及测试类型（上尾、下尾或双尾检验）。我们将从给定的列表中计算样本均值和样本大小。然后，我们将输入计算我们的检验统计量。然后，根据我们决定要进行的假设检验，我们相应地计算p值。最后，我们将我们的p值与显著性水平进行比较，如果它小于我们的显著性水平，我们拒绝零假设。否则，我们未能拒绝零假设：
- en: '[PRE40]'
  id: totrans-281
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'We draw a random sample size of `50` from a normal distribution with a mean
    of `15` and a standard deviation of `1`. We will print the sample mean to the
    console so we know what it is (it will be different every time you run this code
    since we take a random sample every time). We use our z-test function to conduct
    a lower-tailed test since we want to see whether our mean is significantly less
    than `16`. We specify the list that contains our data (`data1`), the population
    standard deviation (we know this is `1`), the value of the hypothesis (we want
    to see whether it is significantly less than `16`), the level of significance
    (most of the time this will be `0.05`), and finally the type of test (since we
    want to see whether the mean is lower than `16`, this is a lower-tailed test):'
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们从均值为`15`，标准偏差为`1`的正态分布中抽取一个随机样本大小为`50`。我们将把样本均值打印到控制台，以便我们知道它是多少（每次运行此代码时它都会有所不同，因为我们每次都会抽取一个随机样本）。我们使用我们的z-检验函数进行一个下尾检验，因为我们想要看到我们的均值是否显著小于`16`。我们指定包含我们数据的列表（`data1`），总体标准偏差（我们知道这是`1`），假设的值（我们想要看到它是否显著小于`16`），显著性水平（大多数情况下这将是`0.05`），最后是测试类型（因为我们想要看到均值是否小于`16`，这是一个下尾检验）：
- en: '[PRE41]'
  id: totrans-283
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: 'When we run this code, we should get something that looks like this:'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们运行此代码时，我们应该得到类似以下的结果：
- en: '[PRE42]'
  id: totrans-285
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: Since the p-value of our test statistic is less than 0.05 (written out from
    the scientific notation, it's 0.0000000000000509), we know that the sample mean
    of 15.06 is significantly less than 16, based on our sample size of 50\. Since
    we took the sample from a population with a mean of 15, the test result was what
    we expected it to be. Again, since we are taking a random sample in the beginning,
    your results may vary, but, for most samples, this test should be rejecting the
    null hypothesis. In the tuple that is returned, the first value is the test statistic
    and the second is our p-value.
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们的检验统计量的p值小于0.05（从科学计数法写出来，是0.0000000000000509），我们知道15.06的样本均值显著小于16，基于我们的样本量为50。由于我们从平均值为15的总体中抽取了样本，测试结果符合我们的预期。同样，由于我们一开始是随机抽样的，您的结果可能会有所不同，但是对于大多数样本来说，这个测试应该会拒绝零假设。在返回的元组中，第一个值是检验统计量，第二个是我们的p值。
- en: 'Next, let''s test to see whether our mean is significantly larger than `14`.
    Following the same pattern as the lower-tailed test, our code will appear as follows:'
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，让我们测试一下我们的均值是否显著大于`14`。按照单侧检验的相同模式，我们的代码将如下所示：
- en: '[PRE43]'
  id: totrans-288
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'When we run the code, the following output is displayed in the console:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们运行代码时，以下输出将显示在控制台中：
- en: '[PRE44]'
  id: totrans-290
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'For our final z-test, we will perform a two-tailed test and see whether our
    sample mean differs significantly from `15`. In this test, we really do not have
    a preference whether it is higher or lower than `15`; we just want to see whether
    it is different:'
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于我们最后的z检验，我们将执行一个双侧检验，并查看我们的样本均值是否与`15`显著不同。在这个测试中，我们实际上并不关心它是高于还是低于`15`；我们只是想看看它是否不同：
- en: '[PRE45]'
  id: totrans-292
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'When we run this code, the result is as follows:'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们运行此代码时，结果如下：
- en: '[PRE46]'
  id: totrans-294
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: This result makes sense because we sampled for a population where the mean was
    15.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 这个结果是有道理的，因为我们对平均值为15的总体进行了抽样。
- en: Note
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To access the source code for this specific section, please refer to https://packt.live/2C24ItD.
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问此特定部分的源代码，请参阅https://packt.live/2C24ItD。
- en: You can also run this example online at https://packt.live/2NNyntn.
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以在https://packt.live/2NNyntn上在线运行此示例。
- en: Proportional Z-Test
  id: totrans-299
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 比例Z-检验
- en: 'The most common use of the z-test is not in testing the significance of a sample
    mean, but the significance of a percentage. The assumptions required for this
    are the same as the requirements for a proportional z-confidence interval: random
    sample, independence, and at least 10 successes and 10 failures. We would calculate
    the test statistics for this test as follows:'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: z检验最常见的用途不是测试样本均值的显著性，而是测试百分比的显著性。这需要的假设与比例z置信区间的要求相同：随机样本、独立性，以及至少10次成功和10次失败。我们将按照以下方式计算此测试的检验统计量：
- en: '![Figure 9.16: Formula to calculate test statistics'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.16：计算检验统计量的公式'
- en: '](image/B15968_09_16.jpg)'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_16.jpg)'
- en: 'Figure 9.16: Formula to calculate test statistics'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.16：计算检验统计量的公式
- en: 'We would calculate the p-value the same way as the z-test for a sample mean.
    We do not need to create a function for this test; one already exists in the `statsmodels.stats.proportion`
    Python package called `proportions_ztest`. The syntax for this function is as
    follows:'
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将以与样本均值的z检验相同的方式计算p值。我们不需要为此测试创建一个函数；在`statsmodels.stats.proportion` Python包中已经存在一个名为`proportions_ztest`的函数。此函数的语法如下：
- en: '[PRE47]'
  id: totrans-305
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'Here:'
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 这里：
- en: '`x` is the number of successes in our sample.'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: '`x`是我们样本中的成功次数。'
- en: '`n` is the size of our sample.'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: '`n`是我们样本的大小。'
- en: '`Po` is the hypothesized value we want to test against.'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: '`Po`是我们想要进行检验的假设值。'
- en: The alternative specifies a lower-tailed, upper-tailed, or two-tailed test.
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 备用项指定了一个单侧、双侧或双侧检验。
- en: 'The output of this function is a tuple; the first element is the test statistic,
    and the second element is the p-value. Let''s go back to our polling example:
    your campaign conducted a poll of their own and sampled 350 people. Out of 350
    people, 193 people said they would vote for you. We want to see whether this sample
    we collected is evidence that a majority of people are going to vote for you.'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 此函数的输出是一个元组；第一个元素是检验统计量，第二个元素是p值。让我们回到我们的民意调查例子：你的竞选活动进行了一项民意调查，并对350人进行了抽样。在350人中，有193人表示他们会投票给你。我们想要看看我们收集的这个样本是否证明了大多数人会投票给你。
- en: 'We will assign the results of our z-test to a variable called `results`. We
    call the function where `193` is the number of successes/people who will vote
    for us, and the sample size is `350`. Since we want to test to see whether our
    sample is evidence that we have the majority of the vote, we want to perform an
    upper-tailed test where the hypothesized value is `0.50`:'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将把我们的z检验结果分配给一个名为`results`的变量。我们调用函数，其中`193`是成功/将为我们投票的人数，样本大小为`350`。由于我们想要测试我们的样本是否证明我们获得了大多数选票，我们想要执行一个单侧检验，其中假设值为`0.50`：
- en: '[PRE48]'
  id: totrans-313
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'When the code is run, the following is printed to the console:'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 当代码运行时，以下内容将打印到控制台：
- en: '[PRE49]'
  id: totrans-315
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: Our p-value is about 0.027, which is a significant result at 0.05\. This tells
    us that our sample is evidence that we have the majority of the vote.
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的p值约为0.027，这是一个显著的结果，显著水平为0.05。这告诉我们，我们的样本证明了我们获得了大多数选票。
- en: The T-Test
  id: totrans-317
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: T-检验
- en: While the z-test is useful for conducting a hypothesis test on a proportion,
    it is not very practical when testing a sample mean because we typically do not
    know the standard deviation of the population. There are other times where our
    sample size is very small. For this situation, we can use a t-test, which is analogous
    to our t-confidence interval. Just like with the t-confidence interval, you do
    not need to know the population standard deviation; you can use the sample to
    estimate it.
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然z检验对比例进行假设检验很有用，但在测试样本均值时并不是很实用，因为我们通常不知道总体的标准差。还有其他情况下，我们的样本量非常小。对于这种情况，我们可以使用t检验，它类似于我们的t置信区间。就像t置信区间一样，您不需要知道总体标准差；您可以使用样本来估计它。
- en: 'The formula for the t-test is given as follows:'
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: t检验的公式如下：
- en: '![Figure 9.17: Formula to calculate t-test'
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.17：计算t检验的公式'
- en: '](image/B15968_09_17.jpg)'
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_17.jpg)'
- en: 'Figure 9.17: Formula to calculate t-test'
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.17：计算 t-检验的公式
- en: 'In this equation:'
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个方程中：
- en: '*x̄* is the sample mean.'
  id: totrans-324
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*x̄*是样本均值。'
- en: '*μ*O is the hypothesized value we are testing against.'
  id: totrans-325
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*μ*O是我们正在测试的假设值。'
- en: '*s* is the sample standard deviation.'
  id: totrans-326
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*s*是样本标准差。'
- en: '*n* is the sample size.'
  id: totrans-327
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*n*是样本大小。'
- en: 'We will calculate the p-value using a t-distribution instead of a standard
    normal distribution. However, we are not going to focus too much on the mechanics
    of this specific test, as it is like the other hypothesis tests we have covered.
    We are going to create a function to conduct our t-test, similar to our z-test:'
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用 t-分布而不是标准正态分布来计算 p 值。但是，我们不会过多关注这个特定测试的机制，因为它与我们已经涵盖的其他假设检验类似。我们将创建一个函数来进行我们的
    t-检验，类似于我们的 z-检验：
- en: '[PRE50]'
  id: totrans-329
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'In the preceding code:'
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 在上述代码中：
- en: '`sample` is a list of the measures of your sample.'
  id: totrans-331
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sample`是样本测量的列表。'
- en: '`hypoth_value` is the value you are testing against.'
  id: totrans-332
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`hypoth_value`是您正在测试的值。'
- en: '`sig_level` is the significance level.'
  id: totrans-333
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sig_level`是显著性水平。'
- en: '`test_type` is the type of test—lower, upper, or two.'
  id: totrans-334
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`test_type`是测试类型——较低、较高或两者。'
- en: 'Exercise 9.08: The T-Test'
  id: totrans-335
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习9.08：T-检验
- en: 'We will examine two different samples: one large sample and one small sample.
    Both samples will be randomly selected from a normal distribution from a mean
    of 50 and a standard deviation of 10\. The only difference between the two samples
    is that the large sample will have a size of 100 and the smaller sample will have
    a size of 10:'
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将检查两个不同的样本：一个大样本和一个小样本。这两个样本都将从均值为50、标准差为10的正态分布中随机选择。两个样本之间唯一的区别是大样本的大小为100，而较小的样本的大小为10：
- en: 'First, let''s import the libraries we will use, set the seed, and then randomly
    generate our large sample:'
  id: totrans-337
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，让我们导入我们将使用的库，设置种子，然后随机生成我们的大样本：
- en: '[PRE51]'
  id: totrans-338
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'Create functions for our t-test:'
  id: totrans-339
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为我们的 t-检验创建函数：
- en: '[PRE52]'
  id: totrans-340
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'We will run three different tests: one to see whether the sample mean differs
    significantly from `50`, whether the sample mean is significantly lower than `51`,
    and whether the sample mean is significantly higher than `48`:'
  id: totrans-341
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将运行三个不同的测试：一个是看样本均值是否与`50`显著不同，一个是看样本均值是否显著低于`51`，还有一个是看样本均值是否显著高于`48`：
- en: '[PRE53]'
  id: totrans-342
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'Running this code will result in the following:'
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 运行此代码将产生以下结果：
- en: '[PRE54]'
  id: totrans-344
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: The first test is insignificant, and we do not have evidence that the mean is
    significantly different to `50`. The second test is insignificant as well; the
    sample is not evidence that the mean is significantly greater than `51`. The last
    test is significant; the sample is evidence that the mean is significantly higher
    than `48`.
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个测试是不显著的，我们没有证据表明均值与`50`显著不同。第二个测试也是不显著的；样本也不能证明均值显著大于`51`。最后一个测试是显著的；样本证明均值显著高于`48`。
- en: 'Now, we will run the same three tests, only this time we will use a sample
    with a size of `5` (we will use the first `5` elements from the large sample):'
  id: totrans-346
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们将运行相同的三个测试，只是这次我们将使用大小为`5`的样本（我们将使用大样本的前`5`个元素）：
- en: '[PRE55]'
  id: totrans-347
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'Running the preceding code produces the following:'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 运行上述代码会产生以下结果：
- en: '[PRE56]'
  id: totrans-349
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: 'The results for the first two tests do not change, while the third test did
    change despite the nearly identical sample mean. The reason for the difference
    is due to the small sample size; since there is less certainty due to the small
    sample, the test is more conservative and less likely to reject the null hypothesis.
    This can be shown in our equation for our test statistic:'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 前两个测试的结果没有改变，而第三个测试尽管样本均值几乎相同，但结果确实改变了。差异的原因是由于样本量较小；由于样本量较小，不确定性较小，测试更保守，不太可能拒绝零假设。这可以在我们的检验统计量方程中显示：
- en: '![Figure 9.18: Formula to calculate test statistics for t-test'
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.18：计算 t-检验的检验统计量的公式'
- en: '](image/B15968_09_18.jpg)'
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_18.jpg)'
- en: 'Figure 9.18: Formula to calculate test statistics for t-test'
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.18：计算 t-检验的检验统计量的公式
- en: Notice the denominator ![7](image/B15968_09_InlineEquation6.png); if *n* is
    smaller, then the value of ![8](image/B15968_09_InlineEquation6a.png) will be
    larger (for a constant *s*). This causes the value of the denominator for the
    test statistic to be larger, leading to a smaller test statistic overall.
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 注意分母![7](image/B15968_09_InlineEquation6.png)；如果*n*较小，则![8](image/B15968_09_InlineEquation6a.png)的值将较大（对于一个恒定的*s*）。这会导致测试统计量的分母值较大，从而导致整体测试统计量较小。
- en: Note
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To access the source code for this specific section, please refer to https://packt.live/38mMShg.
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问此特定部分的源代码，请参阅https://packt.live/38mMShg。
- en: You can also run this example online at https://packt.live/3gkBdlK.
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以在https://packt.live/3gkBdlK 上在线运行此示例。
- en: 2-Sample T-Test or A/B Testing
  id: totrans-358
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2-样本 t-检验或 A/B 测试
- en: The final test we will be looking at is the 2-sample t-test. This is a hypothesis
    test that compares the means of two different samples and can tell you whether
    one mean is significantly higher, significantly lower, or significantly different
    than the other mean. One of the applications of this is something known as A/B
    testing. A/B testing is where you show two different groups two different versions
    of a website or app, and collect some sort of measure of performance. Examples
    of measures of performance could be something like the amount of money spent,
    the number of people that clicked on an ad, or the amount of money people spent
    on micro transactions inside your mobile game. Once you have collected the data,
    you test the two sample means and see whether the differences between the two
    different versions are significant.
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将要看的最后一个测试是2-样本 t-检验。这是一个假设检验，比较两个不同样本的均值，并可以告诉您一个均值是否显著更高、显著更低或与另一个均值显著不同。其中之一的应用是一种称为
    A/B 测试的东西。A/B 测试是您向两个不同的群体展示网站或应用的两个不同版本，并收集某种性能度量。性能度量的例子可能是花费的金额、点击广告的人数，或者人们在您的手机游戏内进行微交易的金额。收集数据后，您测试两个样本均值，并查看两个不同版本之间的差异是否显著。
- en: 'The null and alternative hypotheses work a little bit differently for a two-sample
    test than they do for a one-sample test. Instead of comparing a sample mean to
    a value, you are comparing it to another mean. How we typically show this is by
    comparing the difference to zero. Using some algebra, you can figure out how the
    alternative hypotheses should be set up:'
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: 对于双样本检验，零假设和备择假设的工作方式与单样本检验有些不同。你不是将样本均值与一个值进行比较，而是将其与另一个均值进行比较。我们通常通过将差异与零进行比较来展示这一点。使用一些代数，你可以弄清备择假设应该如何设置：
- en: 'Upper-tailed (mean 1 is greater than mean 2): ![13](image/B15968_09_InlineEquation7.png)'
  id: totrans-361
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 上侧（均值 1 大于均值 2）：![13](image/B15968_09_InlineEquation7.png)
- en: 'Lower-tailed (mean 1 is less than mean 2): ![14](image/B15968_09_InlineEquation8.png)'
  id: totrans-362
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下侧（均值 1 小于均值 2）：![14](image/B15968_09_InlineEquation8.png)
- en: 'Two-tailed (mean 1 differs from mean 2): ![15](image/B15968_09_InlineEquation9.png)'
  id: totrans-363
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 双尾（均值 1 与均值 2 不同）：![15](image/B15968_09_InlineEquation9.png)
- en: 'For the 2-sample t-test, the null hypothesis will always be set to 0 (![9](image/B15968_09_InlineEquation10.png)).
    In other words, the null hypothesis is saying that there is no difference between
    the two means, and the other is saying that there is a difference. The test statistic
    for the 2-sample t-test is given here:'
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 对于双样本 t 检验，零假设将始终设置为 0 (![9](image/B15968_09_InlineEquation10.png))。换句话说，零假设是说两个均值之间没有差异，而另一个是说有差异。双样本
    t 检验的检验统计量如下：
- en: '![10](image/B15968_09_InlineEquation11.png) with a degree of freedom ![16](image/B15968_09_InlineEquation12.png)'
  id: totrans-365
  prefs: []
  type: TYPE_IMG
  zh: '![10](image/B15968_09_InlineEquation11.png)，自由度为 ![16](image/B15968_09_InlineEquation12.png)'
- en: 'The good news for this is that we do not have to calculate this by hand, nor
    do we have to go through the trouble of creating our own function to do this.
    There is a function in the `scipy.stats` package for this very test. The function
    is as follows:'
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个好消息是，我们不必手工计算，也不必费力创建自己的函数来执行这个操作。`scipy.stats` 包中有一个专门用于这个检验的函数。该函数如下：
- en: '[PRE57]'
  id: totrans-367
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: 'Here:'
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里：
- en: '`x1` is a list of the data in the first sample.'
  id: totrans-369
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`x1`是第一个样本中的数据列表。'
- en: '`x2` is a list of the data in the second sample.'
  id: totrans-370
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`x2`是第二个样本中的数据列表。'
- en: We set `equal_var` to `False` since we do not know whether the variance of the
    two samples is the same.
  id: totrans-371
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们将 `equal_var` 设置为 `False`，因为我们不知道两个样本的方差是否相同。
- en: 'This function returns two values: the signed test statistic and the p-value.
    Some people may have noticed that there is no option to specify which test you
    are performing. That is because this function always assumes that you are conducting
    a two-tailed test. So how can you use this to get the results of your one-tailed
    test? Since the t-distribution is symmetrical, the p-value for a one-tailed test
    would be half of the p-value of a two-tailed test. The second thing to look at
    is the sign of the test statistic. For a lower-tailed test, you would only reject
    the null hypothesis if the test statistic is negative. Likewise, for an upper-tailed
    test, you would only reject the null hypothesis if the test statistic is positive.
    So, for single-tailed tests:'
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 该函数返回两个值：有符号的检验统计量和 p 值。一些人可能已经注意到，没有选项来指定你正在执行哪种检验。这是因为该函数始终假定你正在进行双尾检验。那么你如何使用它来获得你的单尾检验的结果呢？由于
    t 分布是对称的，单尾检验的 p 值将是双尾检验的 p 值的一半。第二件要看的事情是检验统计量的符号。对于下侧检验，只有在检验统计量为负数时才能拒绝零假设。同样，对于上侧检验，只有在检验统计量为正数时才能拒绝零假设。因此，对于单尾检验：
- en: '**Lower**: Reject the null hypothesis if ![a](image/B15968_09_InlineEquation13.png)
    is less than your significance level and your test statistic is negative.'
  id: totrans-373
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**下侧**：如果 ![a](image/B15968_09_InlineEquation13.png) 小于你的显著性水平并且你的检验统计量为负数，则拒绝零假设。'
- en: '**Upper**: Reject the null hypothesis if ![b](image/B15968_09_InlineEquation13a.png)
    is less than your significance level and your test statistic is positive.'
  id: totrans-374
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**上侧**：如果 ![b](image/B15968_09_InlineEquation13a.png) 小于你的显著性水平并且你的检验统计量为正数，则拒绝零假设。'
- en: 'Exercise 9.09: A/B Testing Example'
  id: totrans-375
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习 9.09：A/B 测试示例
- en: 'We have two samples, one drawn from a normal distribution with a mean of 50,
    and another drawn from a distribution with a mean of 100\. Both samples have a
    size of 100\. In this exercise, we are going to determine whether the sample mean
    of one sample is significantly different, lower, or higher than the other:'
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: 我们有两个样本，一个来自均值为 50 的正态分布，另一个来自均值为 100 的分布。两个样本的大小都为 100。在这个练习中，我们将确定一个样本的样本均值是否显著不同、较低或较高于另一个样本：
- en: 'First, let''s import the libraries we will use:'
  id: totrans-377
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，让我们导入我们将使用的库：
- en: '[PRE58]'
  id: totrans-378
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: 'Let''s draw our random samples and print the sample means so we know what they
    are. Remember to set the seed:'
  id: totrans-379
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们绘制我们的随机样本并打印样本均值，这样我们就知道它们是什么。记得设置种子：
- en: '[PRE59]'
  id: totrans-380
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'The results are as follows:'
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE60]'
  id: totrans-382
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'We will perform a 2-sample t-test using the function from the `scipy` package
    and print the results:'
  id: totrans-383
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将使用 `scipy` 包中的函数执行双样本 t 检验并打印结果：
- en: '[PRE61]'
  id: totrans-384
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: 'The results are as follows:'
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE62]'
  id: totrans-386
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: Since, by default, the function does a two-tailed test, we know that the mean
    of sample 1 is significantly different to the mean of sample 2\. If we wanted
    to do a lower-tailed test (where the mean of sample 1 is significantly less than
    sample 2), we would use the same code. The only difference is that we would divide
    the p-value by 2 and check to see whether our test statistic is negative. Since
    our p-value divided by 2 is less than 0.05 and our test statistic is negative,
    we know that the mean of sample 1 is significantly less than the mean of sample
    2.
  id: totrans-387
  prefs: []
  type: TYPE_NORMAL
  zh: 由于默认情况下，该函数进行双尾检验，我们知道样本 1 的均值与样本 2 的均值显著不同。如果我们想进行下侧检验（其中样本 1 的均值显著低于样本 2），我们将使用相同的代码。唯一的区别是我们会将
    p 值除以 2，并检查我们的检验统计量是否为负数。由于我们的 p 值除以 2 小于 0.05，并且我们的检验统计量为负数，我们知道样本 1 的均值显著低于样本
    2 的均值。
- en: 'If we want to test whether the mean of sample 2 is significantly greater than
    the mean of sample 1, we just switch the position of sample 1 and sample 2 in
    the function:'
  id: totrans-388
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们想测试样本 2 的均值是否显著高于样本 1 的均值，我们只需在函数中交换样本 1 和样本 2 的位置：
- en: '[PRE63]'
  id: totrans-389
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: 'The results are as follows:'
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE64]'
  id: totrans-391
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: Just like with the lower-tailed test, we would divide the p-value by 2\. However,
    we would check to see that the test statistic is positive. Since the p-value divided
    by 2 is less than 0.05 and the test statistic is positive, we know that the mean
    of sample 2 is significantly more than the mean of sample 1.
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: 就像下尾检验一样，我们会将p值除以2。但是，我们会检查检验统计量是否为正。由于p值除以2小于0.05且检验统计量为正，我们知道样本2的均值明显大于样本1的均值。
- en: Note
  id: totrans-393
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To access the source code for this specific section, please refer to https://packt.live/3iuHmOr.
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问此特定部分的源代码，请参阅https://packt.live/3iuHmOr。
- en: You can also run this example online at https://packt.live/3ghpdl4.
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以在https://packt.live/3ghpdl4上在线运行此示例。
- en: Introduction to Linear Regression
  id: totrans-396
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 线性回归简介
- en: 'We have looked at describing and testing sample statistics, but what if we
    want to use characteristics of the data to describe one other characteristic?
    For example, how does the price of a mobile app impact the number of downloads?
    To do that, we would model the data using linear regression. **Linear regression**
    is where we use a linear equation of one or more independent variables to describe
    a single dependent variable. Typically, our regression equation is in slope-intercept
    form, shown here:'
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经描述并测试了样本统计数据，但是如果我们想要使用数据的特征来描述另一个特征怎么办？例如，移动应用的价格如何影响下载量？为了做到这一点，我们将使用线性回归对数据进行建模。**线性回归**是指我们使用一个或多个自变量的线性方程来描述一个因变量。通常，我们的回归方程是斜率-截距形式，如下所示：
- en: '![Figure 9.19: Formula for linear regression'
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.19：线性回归公式'
- en: '](image/B15968_09_19.jpg)'
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_19.jpg)'
- en: 'Figure 9.19: Formula for linear regression'
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.19：线性回归公式
- en: 'Here:'
  id: totrans-401
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里：
- en: β1 is the slope of our equation, typically called a coefficient.
  id: totrans-402
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: β1是我们方程的斜率，通常称为系数。
- en: βO is the intercept of the equation.
  id: totrans-403
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: βO是方程的截距。
- en: 'How do we come up with the values for our coefficient and intercept? It starts
    with the **residuals**—which is the difference between the predicted y values
    and the actual y values. Another way to look at residuals is that this is the
    amount that our equation''s prediction is off by. While we will not go into much
    detail here, we use calculus to figure out the values of *β*1, *β*O that minimize
    the total sum of all the residuals. We are not necessarily restricted to one coefficient
    either; we can have multiple (two or more) coefficients, like so:'
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: 我们如何得出系数和截距的值？它始于**残差**——即预测y值与实际y值之间的差异。查看残差的另一种方式是，这是我们方程预测偏离的量。虽然我们在这里不会详细介绍，但我们使用微积分来找出最小化所有残差总和的*β*1、*β*O的值。我们不一定受限于一个系数；我们可以有多个（两个或更多）系数，如下所示：
- en: '![Figure 9.20: Formula for linear regression with multiple coefficients'
  id: totrans-405
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.20：具有多个系数的线性回归公式'
- en: '](image/B15968_09_20.jpg)'
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_20.jpg)'
- en: 'Figure 9.20: Formula for linear regression with multiple coefficients'
  id: totrans-407
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.20：具有多个系数的线性回归公式
- en: Luckily, we can use Python to do all the calculations for us, specifically the
    linear model function in the `sklearn` package.
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，我们可以使用Python来为我们做所有的计算，特别是`sklearn`包中的线性模型函数。
- en: 'Exercise 9.10: Linear Regression'
  id: totrans-409
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习9.10：线性回归
- en: We are tasked with trying to predict the pH levels of red wine using the wine's
    other characteristics. The dataset can be downloaded from the GitHub repository
    at https://packt.live/3imVXv5.
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的任务是尝试使用葡萄酒的其他特征来预测红葡萄酒的pH水平。可以从GitHub存储库https://packt.live/3imVXv5下载数据集。
- en: Note
  id: totrans-411
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: 'This is the wine quality dataset provided by the UCI Machine Learning Repository
    (http://archive.ics.uci.edu/ml). Irvine, CA: University of California, School
    of Information and Computer Science. *P. Cortez, A. Cerdeira, F. Almeida, T. Matos,
    and J. Reiss*. Modeling wine preferences by data mining from physicochemical properties.
    In Decision Support Systems, Elsevier, 47(4):547-553, 2009.'
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: '这是UCI机器学习库（http://archive.ics.uci.edu/ml）提供的葡萄酒质量数据集。尔湾，加利福尼亚：加利福尼亚大学，信息与计算机科学学院。*P.
    Cortez, A. Cerdeira, F. Almeida, T. Matos, and J. Reiss*。通过从理化性质中进行数据挖掘来建模葡萄酒偏好。在决策支持系统中，Elsevier，47(4)：547-553，2009。 '
- en: 'Import the packages we need and read in the data:'
  id: totrans-413
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入我们需要的包并读取数据：
- en: '[PRE65]'
  id: totrans-414
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: 'Subset the data to the two columns we need (we are going to try to use the
    amount of citric acid to predict the `pH` level). Set the `pH` level as our dependent
    variable and citric acid as the independent variable:'
  id: totrans-415
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将数据子集化为我们需要的两列（我们将尝试使用柠檬酸的量来预测`pH`水平）。将`pH`水平设置为我们的因变量，柠檬酸作为自变量：
- en: '[PRE66]'
  id: totrans-416
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: 'Fit the linear model and graph the data as a scatter plot and our linear regression
    model:'
  id: totrans-417
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 拟合线性模型并将数据作为散点图和我们的线性回归模型进行绘制：
- en: '[PRE67]'
  id: totrans-418
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'The output will be as follows:'
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 9.21: The linear equation seems to fit our data well'
  id: totrans-420
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.21：线性方程似乎很好地适配了我们的数据'
- en: '](image/B15968_09_21.jpg)'
  id: totrans-421
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_21.jpg)'
- en: 'Figure 9.21: The linear equation seems to fit our data well'
  id: totrans-422
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.21：线性方程似乎很好地适配了我们的数据
- en: If you look at the picture, you notice that the line fits the data well. Let's
    add another independent variable; in this case, the amount of residual sugar,
    and see whether it improves the prediction.
  id: totrans-423
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你看图片，你会注意到这条线很好地适配了数据。让我们添加另一个自变量；在这种情况下，残留糖的数量，并看看它是否改善了预测。
- en: 'This time, we set our independent variables as citric acid and residual sugar
    and fit the model:'
  id: totrans-424
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这一次，我们将柠檬酸和残留糖设置为自变量并拟合模型：
- en: '[PRE68]'
  id: totrans-425
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: 'Create a three-dimensional scatter plot and graph the line in the `3d` space
    to check to see whether it fits our data well:'
  id: totrans-426
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个三维散点图并在`3d`空间中绘制线以检查它是否很好地适配我们的数据：
- en: '[PRE69]'
  id: totrans-427
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: 'The output will be as follows:'
  id: totrans-428
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 9.22: The linear equation doesn''t seem to fit our data well'
  id: totrans-429
  prefs: []
  type: TYPE_NORMAL
  zh: '![图9.22：线性方程似乎不太适配我们的数据'
- en: '](image/B15968_09_22.jpg)'
  id: totrans-430
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_09_22.jpg)'
- en: 'Figure 9.22: The linear equation doesn''t seem to fit our data well'
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.22：线性方程似乎不太适配我们的数据
- en: If you look at the picture, our linear model does not seem to fit the data as
    well as the first model we fitted. Based on this, residual sugar is probably not
    going to be involved in our final model.
  id: totrans-432
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您看图片，我们的线性模型似乎不如我们拟合的第一个模型那样适合数据。 基于此，残留糖可能不会出现在我们的最终模型中。
- en: Note
  id: totrans-433
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To access the source code for this specific section, please refer to https://packt.live/2Anl3ZA.
  id: totrans-434
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问此特定部分的源代码，请参阅https://packt.live/2Anl3ZA。
- en: You can also run this example online at https://packt.live/3eOmPlv.
  id: totrans-435
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以在https://packt.live/3eOmPlv上在线运行此示例。
- en: 'Activity 9.01: Standardized Test Performance'
  id: totrans-436
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 活动9.01：标准化测试表现
- en: You are given the task of describing the results of the 2015 PISA test and investigating
    possible effects of the prevalence of internet infrastructure on test scores.
  id: totrans-437
  prefs: []
  type: TYPE_NORMAL
  zh: 您被要求描述2015年PISA测试的结果，并调查互联网基础设施的普及对测试成绩可能产生的影响。
- en: To download the dataset, go to the GitHub repository at https://packt.live/3gi2hCg,
    download the `pisa_test_scores.csv` file, and save that file to your working directory.
  id: totrans-438
  prefs: []
  type: TYPE_NORMAL
  zh: 要下载数据集，请转到GitHub存储库https://packt.live/3gi2hCg，下载`pisa_test_scores.csv`文件，并将该文件保存到您的工作目录中。
- en: Note
  id: totrans-439
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: This PISA test scores dataset is based on data provided by the World Bank (https://datacatalog.worldbank.org/dataset/education-statistics).
    World Bank Edstats.
  id: totrans-440
  prefs: []
  type: TYPE_NORMAL
  zh: 这个PISA测试成绩数据集是基于世界银行提供的数据（https://datacatalog.worldbank.org/dataset/education-statistics）。
    世界银行Edstats。
- en: 'Once you have that file saved, do the following:'
  id: totrans-441
  prefs: []
  type: TYPE_NORMAL
  zh: 保存文件后，执行以下操作：
- en: Describe the typical score of a student in reading, science, and mathematics
    using a confidence interval.
  id: totrans-442
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用置信区间描述学生在阅读、科学和数学方面的典型得分。
- en: Using a hypothesis test, evaluate whether the prevalence of internet infrastructure
    can lead to higher test scores.
  id: totrans-443
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用假设检验，评估互联网基础设施的普及是否会导致更高的测试成绩。
- en: Construct a linear model that uses reading and writing scores to predict the
    mathematics score.
  id: totrans-444
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 构建一个线性模型，使用阅读和写作成绩来预测数学成绩。
- en: Note
  id: totrans-445
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: The solution to this activity can be found on page 688.
  id: totrans-446
  prefs: []
  type: TYPE_NORMAL
  zh: 此活动的解决方案可在第688页找到。
- en: Summary
  id: totrans-447
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we examined the law of large numbers and how the stability
    of the sample mean statistic is affected by sample size. Through the CLT, the
    theoretical underpinnings of confidence intervals and hypothesis testing were
    examined. Confidence intervals were used to describe sample statistics, such as
    sample mean, sample proportion, and margin of error. Hypothesis testing was conducted
    to evaluate two opposing hypotheses using the evidence of a collected sample.
  id: totrans-448
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们研究了大数定律，以及样本均值统计的稳定性如何受样本大小的影响。 通过中心极限定理，我们研究了置信区间和假设检验的理论基础。 置信区间用于描述样本统计数据，如样本均值、样本比例和误差限。
    假设检验是通过收集样本的证据来评估两个相反的假设。
- en: The next chapter begins your study of calculus, where you will examine such
    topics as the instantaneous rate of change and finding the slope of a curved line.
    After studying that, we will look at integration, which is finding the area underneath
    a curve. Finally, we will use derivatives to find optimal values of complicated
    equations and graphs.
  id: totrans-449
  prefs: []
  type: TYPE_NORMAL
  zh: 下一章将开始您的微积分学习，您将研究瞬时变化率和找到曲线斜率等主题。 在研究完这些内容后，我们将研究积分，即找到曲线下的面积。 最后，我们将使用导数来找到复杂方程和图形的最优值。
- en: NKJ24
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: NKJ24
- en: VBM37
  id: totrans-451
  prefs: []
  type: TYPE_NORMAL
  zh: VBM37
