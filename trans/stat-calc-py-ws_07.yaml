- en: 7\. Doing Basic Statistics with Python
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 7\. 使用Python进行基本统计
- en: Overview
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 概述
- en: In this chapter, we'll learn how to use the main descriptive statistics metrics
    and also produce and understand the main visualizations used in Exploratory Data
    Analysis.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将学习如何使用主要的描述性统计指标，并且产生和理解探索性数据分析中使用的主要可视化。
- en: By the end of this chapter, you will be able to load and prepare a dataset for
    basic statistical analysis, calculate and use the main descriptive statistics
    metrics, use descriptive statistics to understand numerical and categorical variables,
    and use visualizations to study relationships between variables.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章结束时，你将能够加载和准备一个数据集进行基本的统计分析，计算和使用主要的描述性统计指标，使用描述性统计来理解数值和分类变量，并使用可视化来研究变量之间的关系。
- en: Introduction
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: 'Python and its analytical libraries, such as pandas and Matplotlib, make it
    very easy to perform both simple and complex statistical calculations on many
    types of datasets. This chapter introduces the first steps for any statistical
    analysis: defining and understanding the problem, loading and preparing the dataset,
    and after that, understanding the variables individually and exploring some relationships
    between them.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: Python及其分析库，如pandas和Matplotlib，使得在许多类型的数据集上执行简单和复杂的统计计算变得非常容易。本章介绍了任何统计分析的第一步：定义和理解问题，加载和准备数据集，之后，逐个理解变量并探索它们之间的一些关系。
- en: 'This chapter consists of three sections: in the first section, we introduce
    the dataset we will be using in this chapter along with a hypothetical (yet very
    realistic) business problem. Then we load the dataset and perform many of the
    common tasks of data preparation, including changing variable types and filtering
    for useful observations. With the dataset ready, the second section presents a
    brief conceptual introduction to the main metrics of descriptive statistics, then
    this knowledge is immediately applied to the dataset we are working with. As part
    of this, we will produce an example of how to translate the information of descriptive
    statistics into knowledge. The third section introduces the learner to the practice
    of **Exploratory Data Analysis** (**EDA**). Beginning with some questions and
    basic calculations, we complement our understanding of basic statistics with some
    of the most useful statistical visualizations, such as histograms, boxplots, and
    scatterplots.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 本章包括三个部分：在第一部分中，我们介绍本章将使用的数据集以及一个假设的（但非常现实的）业务问题。然后我们加载数据集并执行许多常见的数据准备任务，包括更改变量类型和过滤有用的观察。有了准备好的数据集，第二部分介绍了描述性统计主要指标的简要概念介绍，然后这些知识立即应用到我们正在处理的数据集上。作为这一部分的一部分，我们将产生一个如何将描述性统计信息转化为知识的示例。第三部分介绍了学习者对**探索性数据分析**（**EDA**）的实践。从一些问题和基本计算开始，我们用一些最有用的统计可视化，如直方图、箱线图和散点图，来补充我们对基本统计的理解。
- en: This chapter will take a different approach from that traditionally taken in
    other treatments of the subject; rather than just presenting the statistical concepts,
    we will be more practical and use them as tools for doing data analysis, which
    means transforming data into information and information into knowledge.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将采用与其他对待这个主题的传统方法不同的方法；我们不仅仅是呈现统计概念，而是更加实际地将它们作为进行数据分析的工具，这意味着将数据转化为信息，将信息转化为知识。
- en: Data Preparation
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据准备
- en: All applied statistics starts with a dataset and a problem to solve. In the
    real world, we never do statistical analysis in a vacuum; there is always a business
    problem to solve, a topic that needs to be quantitatively understood, or a scientific
    question to ask. Understanding the problem is always the very first step of any
    statistical analysis. The second step is to collect and prepare the data. Data
    collection is not a topic of this book, so we will go directly into data preparation.
    Therefore, before diving into doing some statistical calculations, we need to
    make sure we understand our business problem and that we have prepared our dataset.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 所有应用统计都始于一个数据集和一个需要解决的问题。在现实世界中，我们从不孤立地进行统计分析；总是有一个需要解决的业务问题，一个需要定量理解的主题，或者一个需要提出科学问题。理解问题总是任何统计分析的第一步。第二步是收集和准备数据。数据收集不是本书的主题，所以我们将直接进行数据准备。因此，在进行一些统计计算之前，我们需要确保我们理解我们的业务问题，并且已经准备好我们的数据集。
- en: Introducing the Dataset
  id: totrans-10
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 介绍数据集
- en: In this subsection, we will introduce the dataset we will use in this chapter
    and perform some basic data preparation tasks. Knowing the dataset will give you
    a bit more context when we define the business problem.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个小节中，我们将介绍本章将使用的数据集，并进行一些基本的数据准备任务。了解数据集将在我们定义业务问题时给你更多的背景信息。
- en: 'We are going to use the **strategy games** dataset, which contains real-world
    information about strategy games from the Apple App Store (available at [https://www.kaggle.com/tristan581/17k-apple-app-store-strategy-games](https://www.kaggle.com/tristan581/17k-apple-app-store-strategy-games),
    under the following license: Attribution 4.0 International (CC BY 4.0)). It was
    collected in August 2019 and it contains 18 columns from about 17,000 strategy
    games. The description of the columns the file contains is as follows:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用**策略游戏**数据集，其中包含来自苹果应用商店的策略游戏的真实世界信息（可在[https://www.kaggle.com/tristan581/17k-apple-app-store-strategy-games](https://www.kaggle.com/tristan581/17k-apple-app-store-strategy-games)获取，遵循以下许可证：署名4.0国际（CC
    BY 4.0））。它是在2019年8月收集的，包含约17,000个策略游戏的18列。文件包含的列的描述如下：
- en: '**URL**: The URL of the game'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**网址**：游戏的网址'
- en: '**ID**: The assigned ID'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ID**：分配的ID'
- en: '**Name**: The name of the game'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**名称**：游戏的名称'
- en: '**Subtitle**: The secondary text under the name'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**副标题**：名称下的次要文本'
- en: '**Icon URL**: 512 px x 512 px JPG'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**图标网址**：512像素 x 512像素的JPG'
- en: '**Average User Rating**: Rounded to the nearest 0.5'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**平均用户评分**：四舍五入到最接近的0.5'
- en: '**User Rating Count**: Number of ratings internationally; null means it is
    below 5'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户评分计数**：国际评分数量；空值表示低于5'
- en: '**Price**: Price in USD'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**价格**：美元价格'
- en: '**In-app Purchases**: Prices of available in-app purchases'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**应用内购买**：可用应用内购买的价格'
- en: '**Description**: App description'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**描述**：应用描述'
- en: '**Developer**: App developer'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**开发者**：应用开发者'
- en: '**Age Rating**: Either 4+, 9+, 12+, or 17+'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**年龄评级**：4+、9+、12+或17+'
- en: '**Languages**: ISO2A language codes'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**语言**：ISO2A语言代码'
- en: '**Size**: Size of the app in bytes'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**大小**：应用的大小（以字节为单位）'
- en: '**Primary Genre**: The main genre'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主要类型**：主要类型'
- en: '**Genres**: Genres of the app'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**类型**：应用的类型'
- en: '**Original Release Date**: When it was released'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**原始发布日期**：发布日期'
- en: '**Current Version Release Date**: When it was last updated'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**当前版本发布日期**：最后更新日期'
- en: Note
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: You can also download the dataset from the GitHub repository at [https://packt.live/2O1hv2B](https://packt.live/2O1hv2B).
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以从GitHub仓库下载数据集[https://packt.live/2O1hv2B](https://packt.live/2O1hv2B)。
- en: Introducing the Business Problem
  id: totrans-33
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 介绍业务问题
- en: 'We will use this dataset along with a fictional business problem to learn how
    to turn data into information and information into useful recommendations. Imagine
    it is a glorious Monday morning and you are enjoying an excellent cup of a premium
    Guatemalan coffee. As part of a talented analytics team, you receive the following
    news:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用这个数据集以及一个虚构的业务问题来学习如何将数据转化为信息，将信息转化为有用的建议。想象一下，这是一个光荣的星期一早晨，你正在享受一杯优质的危地马拉咖啡。作为一个才华横溢的分析团队的一部分，你收到了以下消息：
- en: '*The CEO of the game development company you work for has come up with a plan
    to strengthen the position of the company in the gaming market. From his industry
    knowledge and other business reports, he knows that a very effective way to attract
    new customers is to develop a great reputation in the mobile game space. Given
    this fact, he has the following plan: develop a strategy game for the iOS platform
    that will get a lot of positive attention, which in turn will bring a large number
    of new customers to the company. He is sure his plan will work if and only if
    the game gets great ratings from users. Since he is new in the mobile game space,
    he asks you for your help to answer the following question: What types of strategy
    games have great user ratings?*'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 你所在的游戏开发公司的CEO提出了一项计划，以加强公司在游戏市场的地位。根据他的行业知识和其他商业报告，他知道吸引新客户的一个非常有效的方法是在移动游戏领域建立良好的声誉。鉴于这一事实，他有以下计划：为iOS平台开发一款策略游戏，这将吸引大量积极的关注，从而将大量新客户带到公司。他确信只有游戏得到用户的好评，他的计划才会奏效。由于他是移动游戏领域的新手，他请求你帮助回答以下问题：什么类型的策略游戏得到了用户的好评？
- en: Now, you are the owner of this business problem. Before you get dirty with your
    data, you must be sure you understand the problem, and that at least in principle
    the problem is solvable (partially or completely) with the dataset that you have.
    We will use the dataset we introduced earlier to perform some statistical analysis
    and draw some recommendations about what makes a strategy game receive good ratings
    in this sub-market of the gaming industry.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你是这个业务问题的所有者。在处理数据之前，你必须确保你理解了问题，并且至少在原则上，问题是可以通过你拥有的数据集来解决的（部分或完全）。我们将使用之前介绍的数据集来进行一些统计分析，并就在游戏行业的这个子市场中，什么因素使得策略游戏获得良好的评价提出一些建议。
- en: Preparing the Dataset
  id: totrans-37
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备数据集
- en: 'Let''s begin by loading the dataset and the libraries we will be using in this
    chapter. First, let''s load the libraries we''ll use for now, which are NumPy,
    Seaborn, pandas, and Matplotlib:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始加载数据集和本章将使用的库。首先，让我们加载我们现在将使用的库，它们是NumPy、Seaborn、pandas和Matplotlib：
- en: '[PRE0]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Now let''s read the dataset. This can be done by using a single line of code,
    thanks to the power of pandas. The dataset contains 18 columns of 17,007 strategy
    games. This line will read the CSV file and create a DataFrame ready to be used:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们读取数据集。由于pandas的强大功能，这可以通过一行代码完成。数据集包含17,007个策略游戏的18列。这行代码将读取CSV文件并创建一个准备好使用的DataFrame：
- en: '[PRE1]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'It is always a good idea to check if we''ve loaded the correct/expected number
    of rows and columns from the file:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 检查我们是否从文件中加载了正确/预期的行数和列数总是一个好主意：
- en: '[PRE2]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'This gives us the following output:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 这给我们以下输出：
- en: '[PRE3]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Good, now we know we have read all the rows and columns from the file.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 好的，现在我们知道我们已经从文件中读取了所有的行和列。
- en: 'Now let''s take a quick look at the first five rows of our newly created DataFrame
    to see what it looks like:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们快速查看我们新创建的DataFrame的前五行，看看它是什么样子的：
- en: '[PRE4]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'This gives the following output:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 这给出了以下输出：
- en: '![Figure 7.1: First five rows and nine columns of the DataFrame'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.1：DataFrame的前五行和九列'
- en: '](image/B15968_07_01.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_01.jpg)'
- en: 'Figure 7.1: First five rows and nine columns of the DataFrame'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.1：DataFrame的前五行和九列
- en: 'A couple of things to notice here:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有几件事情需要注意：
- en: Column names were read correctly (URL, Name, ID, and so on); however, the names
    from the file are not that friendly if we want easy typing, since they contain
    uppercase and lowercase letters, and some contain blank spaces between words.
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 列名已经被正确读取（URL、名称、ID等）；然而，文件中的名称并不那么友好，如果我们想要轻松输入，因为它们包含大写和小写字母，有些包含单词之间的空格。
- en: The DataFrame was loaded using the automatically produced integer index. We
    can see this by looking at the left-most column and looking at the integers printed
    there in bold (`0`, `1`, `2`, …).
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: DataFrame使用自动生成的整数索引加载。我们可以通过查看最左边的列和粗体打印的整数来看到这一点（`0`，`1`，`2`，…）。
- en: Let's address these two issues separately.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们分别解决这两个问题。
- en: 'First, it is useful to have a single standard format for the names of your
    DataFrame columns. This is of course a personal choice, and there are no strict
    guidelines regarding this. However, I recommend the following format:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，对于DataFrame列的名称，有一个统一的标准格式是很有用的。当然，这是个人选择，关于这个没有严格的指导方针。然而，我建议以下格式：
- en: Lowercase names
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 小写名称
- en: No blank spaces – instead of blank spaces, use underscores to separate words
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 没有空格-使用下划线代替空格
- en: 'Using this format will allow you to type faster by achieving the following:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这种格式将使您能够通过实现以下目标更快地输入：
- en: Avoiding confusion when typing ("Was this letter upper or lowercase?").
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在输入时避免混淆（“这个字母是大写还是小写？”）。
- en: Taking advantage of the autocomplete features in your favorite IDE and/or Jupyter
    Notebook (using the *Tab* key in Jupyter).
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用您喜欢的IDE和/或Jupyter Notebook中的自动补全功能（在Jupyter中使用*Tab*键）。
- en: 'To make the change, let''s create a dictionary (using the dictionary comprehension
    Python feature) that contains both the original column name and the transformed
    version:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 为了进行更改，让我们创建一个字典（使用Python的字典推导功能），其中包含原始列名和转换后的版本：
- en: '[PRE5]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The resulting dictionary is this one:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 得到的字典如下：
- en: '![Figure 7.2: Dictionary with original and transformed column names'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.2：原始和转换后的列名的字典'
- en: '](image/B15968_07_02.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_02.jpg)'
- en: 'Figure 7.2: Dictionary with original and transformed column names'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.2：原始和转换后的列名的字典
- en: 'Now we can use this dictionary to change the column names using the `rename`
    function:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们可以使用这个字典来使用`rename`函数更改列名：
- en: '[PRE6]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The second issue was related to the index of the DataFrame. It is always recommended
    to use a meaningful DataFrame index, as it will make our data processing easier,
    particularly the issue of merging with other tables. In this case, we have a column
    that includes a unique ID (`id`) for each row of our dataset, so let''s use this
    column as the index for our DataFrame:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个问题与DataFrame的索引有关。始终建议使用有意义的DataFrame索引，因为这将使我们的数据处理更容易，特别是与其他表合并的问题。在这种情况下，我们有一列包含我们数据集每一行的唯一ID（`id`），所以让我们使用这列作为DataFrame的索引：
- en: '[PRE7]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Now we can again use the following line of code to look at the first rows and
    columns of our modified DataFrame:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们可以再次使用以下代码行来查看修改后DataFrame的前几行和列：
- en: '[PRE8]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The result looks like this:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Figure 7.3: First rows and columns of the modified DataFrame'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.3：修改后DataFrame的前几行和列'
- en: '](image/B15968_07_03.jpg)'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_03.jpg)'
- en: 'Figure 7.3: First rows and columns of the modified DataFrame'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.3：修改后DataFrame的前几行和列
- en: Now it looks better; however, it still needs a bit more preparation.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 现在看起来更好了；然而，它仍然需要一些准备工作。
- en: 'We know there are 18 columns in this dataset; however, there are some columns
    that we can anticipate won''t provide useful information. How can we know whether
    a column will provide useful information? Everything depends on the context: remember
    that in this case, our goal is to understand what makes a strategy game receive
    great ratings. In this context, it can be safely assumed that the URL of the game
    and the URL of the game''s icon won''t provide any useful information about this
    problem. Therefore, there is no reason to keep these columns. To drop the columns,
    run the following code:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道这个数据集中有18列；然而，有一些列我们可以预料到不会提供有用的信息。我们如何知道一列是否会提供有用的信息？一切都取决于上下文：记住，在这种情况下，我们的目标是了解什么使一个策略游戏获得很高的评分。在这种情况下，可以安全地假设游戏的URL和游戏图标的URL不会提供有关这个问题的任何有用信息。因此，没有理由保留这些列。要删除这些列，运行以下代码：
- en: '[PRE9]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Another important processing step is to make sure that the columns in our DataFrame
    are correctly typed, which will make everything else easier: calculations, visualizations,
    and the creation of new features. We can use the `info()` method to check the
    type of our columns along with other useful information:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个重要的处理步骤是确保我们的DataFrame中的列被正确类型化，这将使其他所有操作更容易：计算、可视化和新特征的创建。我们可以使用`info()`方法来检查我们的列的类型以及其他有用的信息：
- en: '[PRE10]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'This gives the following output:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 这会产生以下输出：
- en: '![Figure 7.4: Output of the info method'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.4：info方法的输出'
- en: '](image/B15968_07_04.jpg)'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_04.jpg)'
- en: 'Figure 7.4: Output of the info method'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.4：info方法的输出
- en: 'As you can see, the columns that are conceptually numerical and categorical
    variables seem to have the correct types: `float64` and `object` respectively.
    However, we have two columns that refer to dates, and they have the `object` type.
    Let''s transform those two columns to a `datetime` type using the following code:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，在概念上是数值和分类变量的列似乎具有正确的类型：`float64`和`object`。然而，我们有两列是日期，并且它们的类型是`object`。让我们使用以下代码将这两列转换为`datetime`类型：
- en: '[PRE11]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'After running the previous lines of code, we can again check the column types
    by using the `info` method:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 运行前面的代码行后，我们可以再次使用`info`方法检查列类型：
- en: '[PRE12]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'This gives the following output:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 这会产生以下输出：
- en: '![Figure 7.5: Output of the info method after changing the two date column
    types'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.5：更改两个日期列类型后info方法的输出'
- en: '](image/B15968_07_05.jpg)'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_05.jpg)'
- en: 'Figure 7.5: Output of the info method after changing the two date column types'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.5：更改两个日期列类型后info方法的输出
- en: Notice that the two columns that contain dates (`original_release_date` and
    `current_version_release_date`) have the correct `datetime64` type.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，包含日期的两列（`original_release_date`和`current_version_release_date`）现在具有正确的`datetime64`类型。
- en: Our dataset now seems to be ready for us to start working on analyzing some
    data. The usage of the term *seems* is because as we analyze our dataset, we may
    find some additional preparation/cleaning is needed.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的数据集现在似乎已经准备好开始分析一些数据了。使用术语“似乎”是因为当我们分析数据集时，我们可能会发现需要进行一些额外的准备/清理工作。
- en: 'You can take a final look at the processed DataFrame using the `head()` method
    again:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以再次使用`head()`方法查看处理后的DataFrame：
- en: '[PRE13]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The output looks like this:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 7.6: First rows and columns of the processed DataFrame'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.6：处理后DataFrame的前几行和列'
- en: '](image/B15968_07_06.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_06.jpg)'
- en: 'Figure 7.6: First rows and columns of the processed DataFrame'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.6：处理后DataFrame的前几行和列
- en: 'When working with a real-world dataset, it is almost certain that you will
    find missing values in some of the columns, therefore it is a good idea to check
    for how many missing values you have in each column of the dataset. We can do
    this with the following line of code:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 在处理真实世界的数据集时，几乎可以肯定会在某些列中找到缺失值，因此检查数据集的每一列中有多少缺失值是一个好主意。我们可以使用以下代码行来做到这一点：
- en: '[PRE14]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'The preceding line of code shows us the following output:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的代码行显示了以下输出：
- en: '![Figure 7.7: Number of nulls by columns'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.7：按列计算的空值数量'
- en: '](image/B15968_07_07.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_07.jpg)'
- en: 'Figure 7.7: Number of nulls by columns'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.7：按列计算的空值数量
- en: 'We see that there are more than 11,000 missing values in the `subtitle` column,
    although for the analysis we will do in this chapter, perhaps that column is not
    that important (perhaps we should eliminate it? What do you think?). On the other
    hand, `average_user_rating` and `user_rating_count` have the same number of missing
    values: 9,446\. That suggests that those missing values might be related. Let''s
    verify this hunch using the `np.array_equal` NumPy function. This function evaluates
    whether two arrays are equal element-wise and returns `True` if that is the case.
    We will use this function to check whether these columns have missing values in
    the same corresponding places. By doing this, we will confirm that the missing
    values happen on the same rows. The following lines of code accomplish what we
    just explained:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 我们看到“subtitle”列中有超过11,000个缺失值，尽管对于我们将在本章进行的分析来说，也许该列并不那么重要（也许我们应该将其删除？你觉得呢？）。另一方面，“average_user_rating”和“user_rating_count”具有相同数量的缺失值：9,446。这表明这些缺失值可能是相关的。让我们使用`np.array_equal`
    NumPy函数来验证这一猜测。该函数评估两个数组是否在元素级别上相等，并在这种情况下返回`True`。我们将使用此函数来检查这些列在相应位置是否存在缺失值。通过这样做，我们将确认缺失值发生在相同的行上。以下代码行实现了我们刚刚解释的内容：
- en: '[PRE15]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: This gives the result `True`.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 这给出了结果`True`。
- en: 'From the result, we can conclude that whenever we have a missing value in one
    of the columns, the other column also shows a missing value. Therefore, our guess
    was correct: if we don''t have a `user_rating_count`, we don''t have an `average_user_rating`
    either (if it was the case, then we would have to deal with the missing values
    those two columns separately). Going back to the columns'' description (the *Introducing
    the Dataset* section) for user rating count, we find that "null means it is below
    5", therefore if we have fewer than 5 people rating a game, then we don''t have
    a rating at all.'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 从结果中，我们可以得出结论，每当我们在其中一列中有一个缺失值时，另一列也显示出缺失值。因此，我们的猜测是正确的：如果我们没有“user_rating_count”，那么我们也没有“average_user_rating”（如果是这种情况，那么我们将不得不分别处理这两列的缺失值）。回到列的描述（*介绍数据集*部分）中，对于用户评分计数，我们发现“null表示低于5”，因此如果少于5个人对游戏进行评分，那么我们根本没有评分。
- en: Continuing with our exploration of missing values, for the in-app purchases
    column, we have 9,324, a relatively high value. Finally, for price, languages,
    and size, we have 24, 60, and 1 missing values respectively, which is not a big
    deal for our purposes, given the dimensions of our data.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 继续探索缺失值，对于应用内购买列，我们有9,324个相对较高的值。最后，对于价格、语言和大小，我们分别有24、60和1个缺失值，鉴于我们数据的维度，这对我们的目的来说并不是什么大问题。
- en: Now we know that we have missing values in some of the columns of our dataset,
    there are many ways to deal with them. *Imputation* basically means replacing
    missing values with reasonable values. There are very complex methods for doing
    that, which are beyond the scope of this book. We will use very simple approaches
    to deal with some missing values; however, we will wait until we finish our preparation
    to decide what to do about these missing values. Imputation is usually the last
    step in the data preparation process.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们知道我们的数据集中的某些列中有缺失值，有许多方法可以处理它们。*插补*基本上意味着用合理的值替换缺失值。有非常复杂的方法可以做到这一点，这超出了本书的范围。我们将使用非常简单的方法来处理一些缺失值；但是，我们将等到完成准备工作后再决定如何处理这些缺失值。插补通常是数据准备过程中的最后一步。
- en: 'Now it is time for us to decide which observations (games) are relevant for
    our analysis; in other words, we have to answer the question: Should we keep all
    the games we have?'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是我们决定哪些观察结果（游戏）对我们的分析相关的时候了；换句话说，我们必须回答这个问题：我们应该保留所有我们拥有的游戏吗？
- en: 'From the context of our analysis, there is one thing that is clear: games that
    have no ratings are of no use for our goal, since we want to understand the ratings.
    Therefore, we should exclude them from our analysis. The following line of code
    will keep only the rows in which the `average_user_rating` is not null:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 从我们分析的背景来看，有一件事是清楚的：没有评分的游戏对我们的目标毫无用处，因为我们想要了解评分。因此，我们应该将它们排除在我们的分析之外。以下代码行将仅保留“average_user_rating”不为空的行：
- en: '[PRE16]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Remember that the number of nulls in `average_user_rating` was `9446`, so the
    last line of code will remove those rows.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，“average_user_rating”中的空值数量为`9446`，因此最后一行代码将删除这些行。
- en: 'There is another fact we should be aware of: the number of people rating the
    game. From the dataset description, we know that at least five users must rate
    the game for the game to have a rating. For reasons that we will explain in *Chapter
    9*, *Intermediate Stats with Python*, we will keep only those games that have
    at least 30 user ratings (basically, a size of `30`, for technical reasons, guarantees
    that the mean rating is usable for analysis). The following line of code will
    perform the operation we just described:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 我们应该意识到另一个事实：评分游戏的人数。从数据集描述中，我们知道至少有五个用户必须对游戏进行评分，游戏才能有评分。出于我们将在第9章《使用Python进行中级统计》中解释的原因，我们将只保留那些至少有30个用户评分的游戏（基本上，出于技术原因，大小为`30`可以保证平均评分可用于分析）。以下代码将执行我们刚刚描述的操作：
- en: '[PRE17]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Let''s see how many observations we have left by using the `shape` method:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们使用`shape`方法来查看我们还剩下多少观察结果：
- en: '[PRE18]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'The result is as follows:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE19]'
  id: totrans-125
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Now, it is a good idea to check again how many missing values we have in each
    of the columns. We will use the same code we used before for this task:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，再次检查每列中有多少缺失值是一个好主意。我们将使用与此任务之前使用的相同代码：
- en: '[PRE20]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'This shows us the following output:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 这向我们展示了以下输出：
- en: '![Figure 7.8: Number of nulls by column'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.8：按列计算空值的数量'
- en: '](image/B15968_07_08.jpg)'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_08.jpg)'
- en: 'Figure 7.8: Number of nulls by column'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.8：按列计算空值的数量
- en: 'Now we see that from the potentially relevant columns, there are only two with
    missing values: `in-app_purchases` (`1,313`) and `languages` (`14`).'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们看到，从可能相关的列中，只有两个存在缺失值：`in-app_purchases`（`1,313`）和`languages`（`14`）。
- en: Note
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: 'A quick note on all the exercises and related tests scripts: If you are using
    a **command-line interface** (**CLI**) (such as Windows'' Command Prompt or Mac''s
    Terminal) to run the tests scripts, it will throw an error as `Implement enable_gui
    in a subclass`, which is to do with some of the commands used in the notebooks
    (such as `%matplotlib inline`). So, if you want to run the test scripts, then
    please use the IPython shell. It is best to run the code of the exercises on Jupyter
    Notebooks.'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 关于所有练习和相关测试脚本的一个快速说明：如果您正在使用**命令行界面**（**CLI**）（如Windows的命令提示符或Mac的终端）运行测试脚本，它将抛出一个错误，即`Implement
    enable_gui in a subclass`，这与笔记本中使用的一些命令有关（如`%matplotlib inline`）。因此，如果您想运行测试脚本，请使用IPython
    shell。最好在Jupyter笔记本上运行练习的代码。
- en: 'Exercise 7.01: Using a String Column to Produce a Numerical Column'
  id: totrans-135
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习7.01：使用字符串列生成数值列
- en: In this exercise, we will create a new numerical variable in our DataFrame that
    will have information about the number of languages in which the game is available.
    This will be an example of how to transform text data into numerical information.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将在我们的DataFrame中创建一个新的数值变量，该变量将包含游戏可用语言的数量信息。这将是如何将文本数据转换为数值信息的一个示例。
- en: 'Create a copy of the DataFrame we have been using so far and name it `games2`,
    so we have another object to work with:'
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个我们迄今为止一直在使用的DataFrame的副本，并将其命名为`games2`，这样我们就有了另一个要处理的对象：
- en: '[PRE21]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Take a look at the first five values of the `languages` column using the `head`
    method:'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`head`方法查看`languages`列的前五个值：
- en: '[PRE22]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'The result looks like this:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Figure 7.9: First five values of the languages column'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.9：语言列的前五个值'
- en: '](image/B15968_07_09.jpg)'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_09.jpg)'
- en: 'Figure 7.9: First five values of the languages column'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.9：语言列的前五个值
- en: 'As you can see, it consists of a string of language abbreviations separated
    commas. Use the `fillna()` method to replace the missing values in that column
    with `EN`, which is the most common value:'
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如您所见，它由逗号分隔的语言缩写字符串组成。使用`fillna()`方法将该列中的缺失值替换为`EN`，这是最常见的值：
- en: '[PRE23]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Use the `split` (which works in the same way as the `split` method for strings)
    method from the `str` accessor method to get a list of the different languages,
    and save the resulting series in an object named `list_of_languages`:'
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`str`访问器方法中的`split`（其工作方式与字符串的`split`方法相同）方法获取不同语言的列表，并将结果系列保存在名为`list_of_languages`的对象中：
- en: '[PRE24]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Finally, let''s create a column in the DataFrame called `n_languages` that
    has the count of how many elements we have in each of the resulting lists. For
    this, use a `lambda` function with the `apply` method that returns the length
    of the list:'
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，让我们在DataFrame中创建一个名为`n_languages`的列，该列包含每个结果列表中的元素数量。为此，使用一个`lambda`函数和返回列表长度的`apply`方法：
- en: '[PRE25]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'The first 10 elements of the new column should look like this:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 新列的前10个元素应该是这样的：
- en: '[PRE26]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: In this exercise, we have used a text column and produced a numerical column
    from a text-based one, by using the `str.split` method of pandas and a lambda
    function.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们使用了一个文本列，并通过使用pandas的`str.split`方法和lambda函数，从基于文本的列生成了一个数值列。
- en: Note
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To access the source code for this specific section, please refer to [https://packt.live/31xEnyy](https://packt.live/31xEnyy).
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问此特定部分的源代码，请参阅[https://packt.live/31xEnyy](https://packt.live/31xEnyy)。
- en: You can also run this example online at [https://packt.live/38lpuk2](https://packt.live/38lpuk2).
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以在[https://packt.live/38lpuk2](https://packt.live/38lpuk2)上在线运行此示例。
- en: In this section, we talked about the importance of defining the business problem,
    and we also introduced the dataset we will use in the rest of the chapter. After
    all the work we have done, the dataset is at a point where we can start making
    sense of the values. For this, we will use descriptive statistics, which is the
    topic of the next section.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一部分，我们谈到了定义业务问题的重要性，并介绍了我们将在本章剩余部分使用的数据集。在我们所做的所有工作之后，数据集已经到了我们可以开始理解价值的地步。为此，我们将使用描述性统计，这是下一节的主题。
- en: Calculating and Using Descriptive Statistics
  id: totrans-158
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 计算和使用描述性统计
- en: Descriptive statistics is a set of methods that we use to summarize the information
    of a set of measurements (data), which helps us to make sense of it. In this section,
    we will first explain the need for descriptive statistics. After that, we will
    introduce the most common metrics of descriptive statistics, including mean, median,
    and standard deviation. First, we will understand them at a conceptual level using
    a simple set of measurements, and then we will apply what we have learned about
    them to the dataset we prepared in the previous section.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 描述性统计是一组我们用来总结一组测量（数据）信息的方法，这有助于我们理解它。在本节中，我们将首先解释描述性统计的必要性。之后，我们将介绍描述性统计中最常见的指标，包括均值、中位数和标准偏差。首先，我们将在概念层面上理解它们，使用一个简单的测量集，然后我们将应用我们在上一节中学到的关于它们的知识到我们准备好的数据集上。
- en: The Need for Descriptive Statistics
  id: totrans-160
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 描述性统计的必要性
- en: 'Why do we need descriptive statistics? Here is an example that will show you
    why we need these types of analytical tools: our brains are very good at a wide
    variety of tasks, such as recognizing the emotion expressed in a human face. Try
    to notice how much effort your brain puts into reading the emotion of the following
    face:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 我们为什么需要描述性统计？以下是一个示例，将向您展示为什么我们需要这些类型的分析工具：我们的大脑非常擅长各种任务，比如识别人脸表达的情感。试着注意一下，你的大脑在阅读以下面孔的情感时付出了多少努力：
- en: '![Figure 7.10: A facial expression'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.10：一种面部表情'
- en: '](image/B15968_07_10.jpg)'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_10.jpg)'
- en: 'Figure 7.10: A facial expression'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.10：一种面部表情
- en: 'Answer: practically nothing, and certainly you can say something meaningful
    about what is going on in the picture.'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 答案：几乎没有，当然你可以对图片中发生的事情说出有意义的话。
- en: 'Now, in contrast, let''s give our brain a different task: we will use the games
    dataset from the previous section, randomly choose 300 observations from the average
    user ratings column, and then print them. The following lines of code do just
    that:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，相比之下，让我们的大脑做一个不同的任务：我们将使用上一节的游戏数据集，随机选择300个观察结果从平均用户评分列中，然后打印它们。以下代码行就是这样做的：
- en: '[PRE27]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'The output is the following:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 7.11: Random sample of 300 average user ratings'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.11：300个平均用户评分的随机样本'
- en: '](image/B15968_07_11.jpg)'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_11.jpg)'
- en: 'Figure 7.11: Random sample of 300 average user ratings'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.11：300个平均用户评分的随机样本
- en: 'Look at the output, try to analyze it, and answer the following questions:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 看一下输出，试着分析它，并回答以下问题：
- en: How much mental effort does it take to say something meaningful?
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 需要付出多少心理努力才能说出有意义的话？
- en: What can you say about average ratings just by looking at the numbers?
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 仅凭数字，你能对平均评分说些什么呢？
- en: 'Your answers to these questions will most probably be something like:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 你对这些问题的答案很可能是：
- en: How much mental effort does it take to say something meaningful? *"I had to
    spend some time looking at the numbers."*
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 需要付出多少心理努力才能说出有意义的话？*"我花了一些时间看这些数字。"*
- en: What can you say about average ratings just by looking at the numbers? *"Not
    much, the numbers end in either .0 or .5."*
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 仅凭数字，你能对平均评分说些什么？*"不多，数字以.0或.5结尾。"*
- en: 'Just by looking at *Figure 7.10*, we can automatically *summarize* and understand
    the information contained in thousands of pixels by saying *woman laughing*. However,
    in the case of *Figure 7.11*, there is no way we can understand something about
    them in an automatically. This is why we need descriptive statistics: it allows
    us to summarize and understand numerical information by performing relatively
    simple calculations.'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 仅仅通过观察*图7.10*，我们就可以自动地通过说*女人笑*来总结和理解包含在成千上万像素中的信息。然而，在*图7.11*的情况下，我们无法自动地了解有关它们的信息。这就是为什么我们需要描述性统计：它允许我们通过执行相对简单的计算来总结和理解数值信息。
- en: A Brief Refresher of Statistical Concepts
  id: totrans-179
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 统计概念简要回顾
- en: If you are reading this book, it is very likely that you have already learned
    or used some of the most common descriptive statistics, and it is very hard for
    me to provide an original definition of the concepts that have been presented
    in literally hundreds of books on statistics. Therefore, you can view the following
    pages just as a refresher of the most important concepts regarding descriptive
    statistics measures.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你正在阅读这本书，很可能你已经学习或使用了一些最常见的描述性统计，对于我来说很难提供关于已经在成百上千本统计学书籍中介绍的概念的原始定义。因此，你可以将以下页面视为描述性统计测量中最重要概念的简要回顾。
- en: 'In this subsection, just to make the conceptual explanations a bit easier to
    understand, we will divert a bit from our strategy game dataset, and we will use
    a small set of 24 observations. Suppose we have the heights (in meters) of 24
    men. Here we have the original observations:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 在本小节中，为了使概念性解释更容易理解，我们将稍微偏离我们的策略游戏数据集，并使用一个包含24个观察结果的小数据集。假设我们有24个男性的身高（以米为单位）。这里是原始观察结果：
- en: '[PRE28]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'We will use this small set of observations for our conceptual introduction
    to the most important descriptive statistics. To make our calculations easy, let´s
    create a pandas series containing these values:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用这个小数据集来概念性地介绍最重要的描述性统计。为了使我们的计算更容易，让我们创建一个包含这些值的pandas系列：
- en: '[PRE29]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: Now we are ready for our review of the most commonly used descriptive statistics.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们准备好复习最常用的描述性统计了。
- en: '**Arithmetic mean**: Also known simply as **mean**, this is a measure of the
    *center of the distribution* or the center of the set of numbers. Given a set
    of observations, the mean is calculated by summing the observations and dividing
    that sum by the number of observations. The formula is as follows, where *x bar*
    (*x̄*) is the mean and *n* is the number of observations:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: '**算术平均值**：也简称为**平均值**，这是一种*分布中心*或一组数字的中心的度量。给定一组观察结果，平均值通过将观察结果相加并将该总和除以观察数量来计算。公式如下，其中*x
    bar* (*x̄*)是平均值，*n*是观察数量：'
- en: '![Figure 7.12: Formula for arithmetic mean'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.12：算术平均值公式'
- en: '](image/B15968_07_12.jpg)'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_12.jpg)'
- en: 'Figure 7.12: Formula for arithmetic mean'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.12：算术平均值公式
- en: The mean is especially useful and informative when most of the values are clustered
    around a single *center*, because in that case the mean will be close to that
    center, and thus will be close to many values, making it a *representative* number
    of the set of observations. Many (perhaps most) of the numerical variables you
    will encounter in real-world data will have values that will cluster around the
    mean, therefore the mean is usually a good indicator of the *typical* value of
    a set of measurements.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 当大多数值聚集在一个*中心*周围时，平均值尤其有用且信息丰富，因为在这种情况下，平均值将接近该中心，因此将接近许多值，使其成为一组观察结果的*代表*数字。你在真实世界数据中遇到的许多（也许大多数）数值变量将具有聚集在平均值周围的值，因此平均值通常是一组测量的*典型*值的良好指标。
- en: 'Let''s calculate the mean for the set of men''s heights by using the built-in
    pandas method:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们使用内置的pandas方法计算男性身高的平均值：
- en: '[PRE30]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'The result is the following:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE31]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: This number tells us that 1.78 meters is a value that is *representative* of
    the set of the heights of the 24 men. After performing this calculation, we know
    that a typical man (from the population from which we got that sample) will have
    a height of around `1.78` meters.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 这个数字告诉我们1.78米是24个男性身高集合的*代表*值。进行了这个计算后，我们知道一个典型男性（来自我们得到样本的总体）的身高大约为`1.78`米。
- en: Something to be aware of about the mean is that it gets affected by extreme
    values. This is especially troublesome when analyzing variables in which the extreme
    values could potentially be orders of magnitude greater than the most common values.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 关于平均值需要注意的一点是，它会受到极端值的影响。当分析极端值可能比最常见值大几个数量级的变量时，这一点尤为棘手。
- en: Finally, it is worth mentioning that the arithmetic mean is often what most
    people have in mind when they say the word *average*, although there are other
    averages, such as the median, which we will define later.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，值得一提的是，算术平均值通常是大多数人在说“平均值”时所指的，尽管还有其他平均值，比如中位数，我们稍后会定义。
- en: '**Standard deviation**: This is a measure of the spread of the data. It measures
    how different or *dispersed* the observations in a set of measurements are. The
    mathematical formula is based on the arithmetic mean, and for your reference,
    it is as follows:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: '**标准偏差**：这是数据的分散程度的一种度量。它衡量了一组测量结果中观察结果的不同或*分散*程度。数学公式基于算术平均值，供您参考，如下所示：'
- en: '![Figure 7.13: Formula for standard deviation'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.13：标准偏差公式'
- en: '](image/B15968_07_13.jpg)'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_13.jpg)'
- en: 'Figure 7.13: Formula for standard deviation'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.13：标准偏差公式
- en: 'In the preceding formula, *s* refers to the standard deviation, *x bar* (*x̄*)
    is the mean, and *N* is the number of observations. Because of a technical detail
    (beyond our scope) the formula has *N – 1* instead of just *N* as a denominator,
    but let''s pretend for a moment that we have an *N* in the denominator: if you
    look at the formula closely you will see that what we have inside the square root
    symbol is *the mean of the squared deviations with respect to the mean*. So, the
    standard deviation is a kind of arithmetic mean of how distant the observations
    are to its mean. The square root is in the formula, so the resulting number is
    in the same units as the original measurements.'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的公式中，*s*代表标准偏差，*x bar* (*x̄*)代表平均值，*N*代表观测次数。由于一个技术细节（超出我们的范围），公式的分母是*N –
    1*而不仅仅是*N*，但让我们假装一会儿分母是*N*：如果你仔细看公式，你会发现根号符号内的是*关于平均值的平方偏差的平均值*。因此，标准偏差是观测结果与其平均值的平均距离。公式中有平方根，所以得到的数字与原始测量结果具有相同的单位。
- en: 'Let''s calculate the standard deviation of our small set of measurements of
    men''s heights, again using pandas'' built-in methods:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们再次使用pandas内置方法计算男性身高的小样本的标准偏差：
- en: '[PRE32]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'This gives the following result:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 这给出了以下结果：
- en: '[PRE33]'
  id: totrans-206
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: Our answer is `0.094` meters, or 9.4 centimeters. The interpretation of this
    number is that, *on average*, a man's height differs by 9.4 centimeters from the
    mean (which was in this case 1.78 meters). Notice that we say *on average*, meaning
    that we can expect individual men's heights to be closer or farther apart than
    9.4 centimeters from the average, but 9.4 is an informative number of how far
    apart we expect a typical observation will be from the mean.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的答案是`0.094`米，或者9.4厘米。这个数字的解释是，*平均而言*，一个男人的身高与平均值（在这种情况下为1.78米）相差9.4厘米。请注意我们说的是*平均而言*，这意味着我们可以预期个别男性的身高与平均值相差的距离会比9.4厘米更近或更远，但9.4是一个能够告诉我们典型观测结果与平均值相差多远的信息性数字。
- en: 'To better understand the concept of standard deviation, it would be useful
    to contrast the former calculation with another hypothetical set of measurements.
    Let''s say we have the heights of another 24 men with a similar average:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更好地理解标准偏差的概念，将前面的计算与另一组假设的测量结果进行对比将会很有用。假设我们有另外24个男性的身高，平均值相似：
- en: '[PRE34]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'Let''s calculate the average, to see how these 24 men compare with the average
    of our first group:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们计算平均值，看看这24个男性与我们第一组的平均值相比如何：
- en: '[PRE35]'
  id: totrans-211
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'The result is the following:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE36]'
  id: totrans-213
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'This is around 3 centimeters below the average of the first group. Now let''s
    calculate the standard deviation of the second group:'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 这比第一组的平均值低3厘米。现在让我们计算第二组的标准偏差：
- en: '[PRE37]'
  id: totrans-215
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'The result is the following:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE38]'
  id: totrans-217
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'This is only 1 centimeter, which means that the heights of the second group
    are much more homogeneous. In other words, the heights of the second group are
    closer to each other (that is, they have less dispersion) than the heights in
    the first group. Since we have very few observations, we can tell this by looking
    closely at the measurements of the second group: notice that all the measurements
    are between 1.73 and 1.77, so the variability is less compared with the first
    group.'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 这只有1厘米，这意味着第二组的身高更加均匀。换句话说，第二组的身高彼此更接近（也就是说，它们的分散程度更小）比第一组的身高。由于我们的观测次数很少，我们可以通过仔细观察第二组的测量结果来得知：请注意所有的测量结果都在1.73和1.77之间，因此与第一组相比，变异性较小。
- en: On the extreme end, if all observations are exactly the same, that is, there
    is no variation among them, then the standard deviation will be zero. The more
    different the measurements, the larger the standard deviation will be.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 在极端情况下，如果所有观察结果完全相同，也就是说它们之间没有变化，那么标准偏差将为零。观测结果越不同，标准偏差就会越大。
- en: There are other measures of the spread of the data, but the standard deviation
    is maybe the most important. You should make sure you know how to interpret it.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 数据的分散程度还有其他度量方法，但标准偏差可能是最重要的。您应该确保知道如何解释它。
- en: '**Quartiles**: Quartiles are *measures of location*. They indicate that the
    value is in a certain relative position when the observations have been ordered
    from the smallest (minimum) to the largest (maximum) values. The first, second,
    and third quartiles are usually denoted as **Q1**, **Q2**, and **Q3**:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: '**四分位数**：四分位数是*位置测量*。它们表明当观察值从最小值（最小值）到最大值（最大值）排序时，该值处于某个相对位置。通常，第一、第二和第三个四分位数通常表示为**Q1**、**Q2**和**Q3**：'
- en: '**Q1**: Divides the data in such a way that 25% of the observations are below
    this value.'
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Q1**：将数据分成这样一种方式，以便25%的观察值低于这个值。'
- en: '**Q2**: Also called *the median*, this is the number that divides the set of
    numbers in two halves, meaning that 50% of the observations are below this value,
    and the other 50% are above this value. The median is another type of average.'
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Q2**：也称为*中位数*，这是将数字集合分成两半的数字，意味着50%的观察值低于这个值，另外50%的观察值高于这个值。中位数是另一种类型的平均值。'
- en: '**Q3**: Divides the data in such a way that 75% of the observations are below
    this value.'
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Q3**：将数据分成这样一种方式，以便75%的观察值低于这个值。'
- en: 'Again using our first 24 heights, we can order them and split this little dataset
    into four parts, each consisting of 6 observations. This is visually shown in
    the following figure:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 再次使用我们的前24个身高，我们可以对它们进行排序，并将这个小数据集分成四部分，每部分包括6个观察值。这在下图中有直观展示：
- en: '![Figure 7.14: Illustration of quartiles'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.14：四分位数示例'
- en: '](image/B15968_07_14.jpg)'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_14.jpg)'
- en: 'Figure 7.14: Illustration of quartiles'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.14：四分位数示例
- en: In this example, we can split the dataset into *exactly* four parts. The first
    one consists of the smallest six observations; the sixth observation is `1.68`,
    and the next one (which belongs to the second quartile) is `1.73`. Technically
    any number between `1.68` and `1.73` (`1.68` < `Q1` < `1.73`) could be called
    the *first quartile*, for instance, `1.70`, because the statement *25% of observations
    are below 1.70* would be true. We could also pick `1.71` because the statement
    *25% of observations are below 1.71* would also be true.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，我们可以将数据集*完全*分成四部分。第一部分包括最小的六个观察值；第六个观察值是`1.68`，下一个（属于第二个四分位数）是`1.73`。从技术上讲，`1.68`和`1.73`之间的任何数字（`1.68`
    < `Q1` < `1.73`）都可以称为*第一个四分位数*，例如`1.70`，因为陈述*25%的观察值低于1.70*是正确的。我们也可以选择`1.71`，因为陈述*25%的观察值低于1.71*也是正确的。
- en: The median (`Q2`) splits the observations into two halves. `1.80` is the 12th
    and 13th observation in this case, so the median is `1.80`. (If there was a number
    between the 12th and 13th observation, the median would be the number in between.)
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 中位数（`Q2`）将观察分成两半。在这种情况下，`1.80`是第12和第13个观察值，所以中位数是`1.80`。（如果有一个数字在第12和第13个观察值之间，中位数将是中间的数字。）
- en: Finally, for the third quartile (`Q3`), we see from the figure that any number
    between `1.84` and `1.85` (say 1.845) would be a value that splits the bottom
    75% observations from the top 25%.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，对于第三个四分位数（`Q3`），我们从图中看到，`1.84`和`1.85`之间的任何数字（比如1.845）都是一个值，将底部75%的观察值与顶部25%的观察值分开。
- en: 'Notice that I have not given any formula to calculate quartiles, so how exactly
    are the quartiles calculated? There are a few methods that we won''t be going
    into in this book. The exact method is not important – what is really important
    is that you understand the concept. Now let''s see how to calculate these values.
    In the following line of code, we will use the `quantile` method from pandas (quartiles
    are a special case of the more general concept of **quantile**, a concept close
    to that of **percentile**):'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，我没有给出任何计算四分位数的公式，那么四分位数是如何计算的呢？有一些方法我们在这本书中不会详细介绍。确切的方法并不重要，真正重要的是你理解这个概念。现在让我们看看如何计算这些值。在下面的代码行中，我们将使用pandas的`quantile`方法（四分位数是更一般的**分位数**概念的特例，这个概念与**百分位数**的概念接近）：
- en: '[PRE39]'
  id: totrans-233
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'The result is the following:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE40]'
  id: totrans-235
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: We had to pass a list to this method indicating the percentage (proportion)
    of observations where we wanted the splits—these are 25%, 50%, and 75%, that correspond
    to `Q1`, `Q2`, and `Q3` respectively. As you can see, the first quartile (`1.7175`)
    is a number between 1.68 and 1.73, the median is `1.80`, and the third quartile
    (`1.8425`) is a number between 1.84 and 1.85.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 我们必须向这个方法传递一个列表，指示我们想要进行分割的观察的百分比（比例）——这些分别是25%，50%和75%，分别对应`Q1`，`Q2`和`Q3`。正如你所看到的，第一个四分位数（`1.7175`）是1.68和1.73之间的一个数字，中位数是`1.80`，第三个四分位数（`1.8425`）是1.84和1.85之间的一个数字。
- en: 'To calculate quantiles, as opposed to quartiles, we use any proportion to split
    the observations into two parts: for example, let''s say that we what to divide
    the observations between the bottom 80% and the top 20%, the 80th percentile is
    equivalent to the 0.8 quantile, and would be the number below which there are
    80% of observations. Similarly, the 33rd percentile would be equivalent to the
    0.33 quantile and would be the number below which there are 33% of observations.
    This explains why we have to pass a list of quantiles to the quantile function
    in pandas; for instance, the following code calculates the 0.33 and 0.8 quantiles
    (which correspond to the 33rd and 80th percentiles):'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 要计算分位数，而不是四分位数，我们可以使用任何比例将观察分成两部分：例如，假设我们想要将观察分成底部80%和顶部20%，80th百分位数等同于0.8分位数，是一个数字，下面有80%的观察。类似地，33rd百分位数等同于0.33分位数，是一个数字，下面有33%的观察。这就解释了为什么我们必须向pandas的分位数函数传递一个分位数列表；例如，下面的代码计算了0.33和0.8分位数（分别对应33rd和80th百分位数）：
- en: '[PRE41]'
  id: totrans-238
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: 'The result is:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是：
- en: '[PRE42]'
  id: totrans-240
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: According to this result, 80% of our observations are below `1.858`. As a mini-exercise,
    check if the 33rd percentile is what you would expect by comparing its value to
    the range illustrated in *Figure 7.14*.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 根据这个结果，我们的80%观察值低于`1.858`。作为一个小练习，通过比较其值与*图7.14*中所示范围，检查33rd百分位数是否符合你的预期。
- en: 'Descriptive statistics is not only about the standard set of metrics such as
    mean, median, and so on. Any simple, *descriptive* calculation done on the data
    is also considered to be descriptive statistics, including sums, proportions,
    percentages, and so on. For instance, let''s calculate the proportion of men above
    1.80 meters. There are many ways to do it, but we will use a two-step approach.
    First, let''s run the following line of code, which gives the value `True` if
    the observation satisfies the condition and `False` otherwise:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 描述性统计不仅仅是关于标准的度量指标，比如平均值、中位数等。对数据进行的任何简单的*描述性*计算也被认为是描述性统计，包括求和、比例、百分比等。例如，让我们计算身高超过1.80米的男性比例。有很多方法可以做到这一点，但我们将使用两步方法。首先，让我们运行以下代码行，如果观察满足条件则给出值`True`，否则给出`False`：
- en: '[PRE43]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'The result looks like this:'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 结果看起来像这样：
- en: '![Figure 7.15: Boolean series'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.15：布尔系列'
- en: '](image/B15968_07_15.jpg)'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_15.jpg)'
- en: 'Figure 7.15: Boolean series'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.15：布尔系列
- en: 'The second step is to count how many `True` values we have. We can do this
    with the `sum` method, which will transform `True` to 1s and `False` to 0s. Then
    we could simply divide by the number of observations in our series by the `shape`
    method. The whole line of code will look like this:'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 第二步是计算我们有多少个`True`值。我们可以使用`sum`方法来做到这一点，它将`True`转换为1，`False`转换为0。然后我们可以简单地通过`shape`方法将观察值的数量除以。整行代码看起来像这样：
- en: '[PRE44]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'The result is the following:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE45]'
  id: totrans-251
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: Or 54% of our 24 heights are equal to or greater than 1.8 meters. This proportion
    is also considered descriptive statistics, since it is a number that is also describing
    what is going on with our data.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 或者我们24个身高中有54%等于或大于1.8米。这个比例也被认为是描述性统计，因为它也是在描述我们的数据发生了什么。
- en: 'The preceding calculation could have been done more succinctly like so:'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的计算可以更简洁地进行，如下所示：
- en: '[PRE46]'
  id: totrans-254
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: As a mini-exercise, you can use the mean formula given in *Figure 7.12* to deduce
    why the `mean` method will give you the proportion of true values in a Boolean
    series.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一个小练习，您可以使用*图7.12*中给出的平均值公式来推断为什么`mean`方法会给出布尔系列中`True`值的比例。
- en: Using Descriptive Statistics
  id: totrans-256
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用描述性统计
- en: Now that we have refreshed our understanding of the most important measures
    of descriptive statistics, it is time for us to go back to our original dataset
    and start using those concepts in the context of the business problem given to
    us.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经重新理解了描述性统计的最重要的度量标准，是时候回到我们的原始数据集，并开始在给定的业务问题背景下使用这些概念了。
- en: 'The descriptive statistics we reviewed in the preceding section are so important
    that the pandas `describe` method (which belongs to both series and DataFrames)
    calculates all of them. In addition, we will find the following:'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在前一节中审查的描述性统计数据是如此重要，以至于pandas的`describe`方法（属于series和DataFrames）会计算所有这些统计数据。此外，我们还会发现以下内容：
- en: '**Count**: Number of non-null values in the column'
  id: totrans-259
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**计数**：列中非空值的数量'
- en: '**Minimum**: Smallest value'
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**最小值**：最小值'
- en: '**Maximum**: Largest value'
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**最大值**：最大值'
- en: 'When the `describe` method is used on a DataFrame, it takes all the columns
    with numerical types and calculates their descriptive statistics:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 当在DataFrame上使用`describe`方法时，它会取所有数值类型的列并计算它们的描述性统计数据：
- en: '[PRE47]'
  id: totrans-263
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'This gives the following output:'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 这会得到以下输出：
- en: '![Figure 7.16: Descriptive statistics for numerical columns of the DataFrame'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.16：DataFrame的数值列的描述性统计'
- en: '](image/B15968_07_16.jpg)'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_16.jpg)'
- en: 'Figure 7.16: Descriptive statistics for numerical columns of the DataFrame'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.16：DataFrame的数值列的描述性统计
- en: 'Before interpreting the results, you need to be aware that by default, pandas
    shows the output in scientific notation: for example, `4.311000e+03` means 4.311
    x 103 = 4,311\. The notation `"e+k"` means (x 10k) and `"e-k"` means (x 10-k).'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 在解释结果之前，您需要知道，默认情况下，pandas以科学计数法显示输出：例如，`4.311000e+03`表示4.311 x 10^3 = 4,311。符号“e+k”表示（x
    10^k），而“e-k”表示（x 10^-k）。
- en: 'To put these concepts into practice, let''s read and interpret the statistics
    from the `user_rating_count` variable:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 为了将这些概念付诸实践，让我们读取并解释`user_rating_count`变量的统计数据：
- en: '`count`: The value in the output for count is 4,311\. This is the amount of
    not-null observations in our variable.'
  id: totrans-270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`count`：输出中的计数值为4,311。这是我们变量中非空观察值的数量。'
- en: '`mean`: The value in the output for mean is 5,789.75\. Now we know that on
    average we have about 5,800 users rating a game in our dataset. To extract more
    information about this number (and whether it is useful or not), let''s read the
    other statistics.'
  id: totrans-271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mean`：平均值的输出为5,789.75。现在我们知道，平均而言我们的数据集中大约有5,800个用户对游戏进行评分。为了提取关于这个数字更多的信息（以及它是否有用或不有用），让我们读取其他统计数据。'
- en: '`std`: The standard deviation value is 5,592.43\. On average, the number of
    users rating a game in our dataset varies from the mean by almost 5,600 users:
    think about it, the average number of ratings was roughly 5,800, and the *typical*
    deviation from that number is almost ~5,600\. This tells us that the variability
    is very large in this variable (dispersion is high), or in other words: we have
    some games with only a few user ratings, and we have some games with a very large
    number of user ratings.'
  id: totrans-272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`std`：标准偏差值为5,592.43。平均而言，我们数据集中评分游戏的用户数量与平均值相差近5,600个用户：想想看，平均评分数量大约为5,800，而与该数字的*典型*偏差几乎为5,600。这告诉我们这个变量的可变性非常大（离散度很高），换句话说：我们有一些游戏只有少数用户评分，而有一些游戏有非常多的用户评分。'
- en: '`min`, `25%`, `50%`, `75%`, `max`: These numbers tell us important information
    about how the observations in our variable are distributed. We see that the minimum
    is 30 (remember that we explicitly selected games with at least 30 ratings), and
    the maximum value is more than 3 million! The first quartile tells us that 25%
    of the games in our dataset have less than 70 user ratings; this is very few,
    considering that the mean was 5,789.75\. The median is 221 user ratings, so half
    of our games have less than 221 ratings! Finally, the third quartile indicates
    that 75% of the observations are below 1,192.'
  id: totrans-273
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`min`，`25%`，`50%`，`75%`，`max`：这些数字告诉我们关于变量观察值分布的重要信息。我们看到最小值是30（记住我们明确选择了至少30个评分的游戏），最大值超过了300万！第一四分位告诉我们数据集中25%的游戏拥有少于70个用户评分；考虑到均值为5,789.75，这是非常少的。中位数是221个用户评分，因此一半的游戏拥有少于221个评分！最后，第三四分位表明75%的观察值低于1,192。'
- en: So far, we have more or less only read the results, so now let's discuss a bit
    more to be able to transform this data into useful information.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们大致上只是读取了结果，现在让我们更多地讨论一下，以便将这些数据转化为有用的信息。
- en: 'Knowing the maximum (more than 3 million), we can be sure that the *mean* of
    this variable has been highly affected by the extreme values, namely hugely popular
    games. So perhaps the mean is not that informative for this variable. Maybe it
    is not meaningful to talk about *the typical number of user ratings for a game*,
    because the data suggests there is no *typical* number. In fact, we know that
    more than 75% of the observations have fewer than 1,200 user ratings. This would
    imply that we should observe a few popular games. Let''s test this hunch and dive
    a bit into the games with the most ratings, using the `sort_values` method from
    the series to see the first 10 values of `user_rating_count` in descending order:'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 知道最大值（超过300万），我们可以确定这个变量的*均值*受到极端值的极大影响，即极其受欢迎的游戏。也许均值对于这个变量来说并不那么有信息量。也许谈论*游戏的典型用户评分数量*并没有意义，因为数据表明没有*典型*的数量。事实上，我们知道超过75%的观察值拥有少于1,200个用户评分。这意味着我们应该观察一些受欢迎的游戏。让我们测试一下这个直觉，并深入研究一下评分最多的游戏，使用系列的`sort_values`方法，以降序查看`user_rating_count`的前10个值：
- en: '[PRE48]'
  id: totrans-276
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'The result is the following:'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Figure 7.17: First 10 values of user rating count'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.17：用户评分计数的前10个值'
- en: '](image/B15968_07_17.jpg)'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_17.jpg)'
- en: 'Figure 7.17: First 10 values of user rating count'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.17：用户评分计数的前10个值
- en: 'Notice that only two games have more than one million user ratings, which explains
    the high variability we observed from the standard deviation (5,592.43). Let''s
    check how many games have at least 100,000 user ratings. First, we will filter
    our column by the condition `>= 100000` and then we will use the `sum` method,
    which will count how many values satisfy that condition:'
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，只有两个游戏拥有超过一百万的用户评分，这解释了我们从标准差（5,592.43）观察到的高变异性。让我们检查有多少游戏至少拥有100,000个用户评分。首先，我们将按条件`>=
    100000`过滤我们的列，然后我们将使用`sum`方法，该方法将计算满足该条件的值的数量：
- en: '[PRE49]'
  id: totrans-282
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'The result is as follows:'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE50]'
  id: totrans-284
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: So only 40 games have more than 100,000 ratings, which is less than 1% of the
    current dataset (of 4,311 games) and 0.23% of the original dataset (of 17,007
    games).
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，只有40个游戏拥有超过100,000个评分，这不到当前数据集的1%（4,311个游戏）和原始数据集的0.23%（17,007个游戏）。
- en: In summary, the number of user ratings that a game has is highly variable. In
    addition, 25% of the games in our sample have less than 70 user ratings, and half
    of the games have less than 221\. Moreover, we have only `40` games with more
    than 100,000 user ratings, with the first and second most popular games having
    more than 3.0 million and more than 1.2 million respectively.
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 总之，游戏的用户评分数量变化很大。此外，我们样本中有25%的游戏拥有少于70个用户评分，一半的游戏拥有少于221个。此外，我们只有40个游戏拥有超过100,000个用户评分，其中排名第一和第二的最受欢迎的游戏分别拥有超过300万和超过120万个评分。
- en: 'Here is the way we might present the information to the CEO:'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我们向CEO呈现信息的方式：
- en: '*The data from the user rating count, which is a proxy for the popularity of
    the game, suggests that it is very hard for a strategy game to become hugely popular.
    The data tells us that less than 1% of the strategy games can be considered hugely
    popular (in terms of the number of user ratings), while more than 75% of the games
    have less than 1,200 user ratings, indicating a relatively low user base. Keep
    in mind that for this exercise we have excluded those games that have less than
    30 user ratings, therefore the odds for a strategy game to become hugely popular
    is way below 1%.*'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: '*用户评分数量的数据，这是游戏受欢迎程度的代理，表明策略游戏要成为极其受欢迎是非常困难的。数据告诉我们，不到1%的策略游戏可以被认为是极其受欢迎的（就用户评分数量而言），而超过75%的游戏拥有少于1,200个用户评分，表明用户基数相对较低。请记住，对于这个练习，我们已经排除了那些拥有少于30个用户评分的游戏，因此策略游戏成为极其受欢迎的几率远低于1%。*'
- en: The preceding paragraph is an example of how to extract valuable information
    from descriptive statistics. Notice that we had no need to mention any statistical
    terminology, such as mean, median, or standard deviation, nor the terms quantile,
    percentile, and so on. Notice also that the fact that the mean was 5,789.75 was
    not used, because that fact was not necessary for the message we were trying to
    convey. That is the kind of information that someone like a CEO would like to
    hear, since it is clear, informative, and actionable.
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 上述段落是如何从描述性统计中提取有价值信息的一个例子。请注意，我们无需提及任何统计术语，如均值、中位数或标准差，也无需提及分位数、百分位数等术语。还要注意，均值为5,789.75这个事实并没有被使用，因为对于我们试图传达的信息来说，这个事实并不是必要的。这是像CEO这样的人想要听到的信息，因为它清晰、有信息量且可操作。
- en: 'We finish this section with a very important piece of advice: don''t make the
    mistake of presenting a list of the descriptive statistics calculations as your
    *analysis*. Another common mistake is to include a paragraph containing analysis
    such as *the mean is x*, *the standard deviation is y*, *the maximum is 88*, basically
    just re-writing the information contained in the statistical table. Keep in mind
    that it is your job not only to perform the calculations, but also to explain
    what these numbers mean and their implications regarding the problem you are trying
    to solve.'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 我们用一个非常重要的建议来结束本节：不要犯一个错误，把描述性统计计算的列表作为你的*分析*。另一个常见的错误是包括一个包含分析的段落，比如*平均值是x*，*标准差是y*，*最大值是88*，基本上只是重复了统计表中包含的信息。请记住，你的工作不仅是进行计算，还要解释这些数字的含义以及它们对你试图解决的问题的影响。
- en: 'Exercise 7.02: Calculating Descriptive Statistics'
  id: totrans-291
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习7.02：计算描述性统计
- en: In this exercise, we will use descriptive statistics to calculate the value
    of the average user rating variable. For this, we will use the descriptive statistics
    metrics that we discussed in the previous section. In addition, we will also perform
    other descriptive calculations, including counts and proportions.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将使用描述性统计来计算平均用户评分变量的值。为此，我们将使用我们在上一节讨论的描述性统计指标。此外，我们还将进行其他描述性计算，包括计数和比例。
- en: 'Calculate the descriptive statistics of the `average_user_rating` column:'
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算`average_user_rating`列的描述性统计：
- en: '[PRE51]'
  id: totrans-294
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'The result is as follows:'
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE52]'
  id: totrans-296
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: As you can see, the median and the third quartile have the same value, `4.5`,
    which means that at least 25% of the games have an average rating of `4.5`.
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，中位数和第三四分位数的值相同，为`4.5`，这意味着至少有25%的游戏的平均评分为`4.5`。
- en: 'Calculate the number and the proportion of games with a rating of exactly `4.5`.
    The `mean` method can be used for this goal:'
  id: totrans-298
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算评分恰好为`4.5`的游戏的数量和比例。可以使用`mean`方法来实现这个目标：
- en: '[PRE53]'
  id: totrans-299
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'The output we get is the following:'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到的输出如下：
- en: '[PRE54]'
  id: totrans-301
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: Use the `unique` method to see the unique values for this variable. What do
    you notice?
  id: totrans-302
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`unique`方法查看该变量的唯一值。你注意到了什么？
- en: '[PRE55]'
  id: totrans-303
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: In this exercise, we have used descriptive statistics to understand another
    key variable of our business problem.
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们使用描述性统计来理解我们商业问题的另一个关键变量。
- en: Note
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To access the source code for this specific section, please refer to [https://packt.live/2VUWhI3](https://packt.live/2VUWhI3).
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问本节的源代码，请参阅[https://packt.live/2VUWhI3](https://packt.live/2VUWhI3)。
- en: You can also run this example online at [https://packt.live/2Zp0Z1u](https://packt.live/2Zp0Z1u).
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以在[https://packt.live/2Zp0Z1u](https://packt.live/2Zp0Z1u)上在线运行这个例子。
- en: 'Here are some questions that might come to mind:'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些可能会出现在脑海中的问题：
- en: Is the mean of this variable a statistic you would use to understand this variable?
    Would you choose it as a *typical* value of the variable, or would you choose
    another value?
  id: totrans-309
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个变量的平均值是你用来理解这个变量的统计量吗？你会选择它作为变量的*典型*值，还是会选择另一个值？
- en: Based on the standard deviation, would you consider that this variable has high
    or low variability?
  id: totrans-310
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据标准差，你认为这个变量的变异性高还是低？
- en: How could the information you obtained by using the descriptive statistics be
    summarized in a paragraph?
  id: totrans-311
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你如何用描述性统计获得的信息来总结成一段话？
- en: In this section, we learned why we need and use descriptive statistics. From
    the first example we introduced, we learned that our brains don't have the capacity
    to automatically make sense of numerical information. It is therefore necessary
    to have these types of analytical tools if we want to understand numerical data.
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们了解了为什么需要和使用描述性统计。从我们介绍的第一个例子中，我们了解到我们的大脑没有自动理解数值信息的能力。因此，如果我们想要理解数值数据，就有必要拥有这些类型的分析工具。
- en: Then we presented a brief refresher on (or introduction to) some of the most
    commonly used metrics of descriptive statistics, including mean, standard deviation,
    and quantiles. Then we immediately applied that knowledge using the strategy games
    dataset and calculated the descriptive statistics for the numerical variables.
    We analyzed the results for the user rating count variable and produced a summary
    that contained relevant information that a non-technical audience can understand.
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我们简要回顾了（或介绍了）一些最常用的描述性统计指标，包括平均值、标准差和分位数。然后我们立即应用了这些知识，使用策略游戏数据集计算了数值变量的描述性统计。我们分析了用户评分计数变量的结果，并生成了一个包含非技术人员可以理解的相关信息的摘要。
- en: Finally, we did all the calculations using pandas built-in methods such as `mean`,
    `std`, `describe`, and `quantile`, among others.
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们使用了pandas内置方法，如`mean`、`std`、`describe`和`quantile`等进行了所有计算。
- en: Now that we know the basics of descriptive statistics, we can expand our statistical
    toolkit and complement our analysis using visualizations, which we will cover
    in the following section.
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们知道了描述性统计的基础知识，我们可以扩展我们的统计工具包，并通过可视化来补充我们的分析，这将在下一节中介绍。
- en: Exploratory Data Analysis
  id: totrans-316
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 探索性数据分析
- en: 'In this section, we will be referring back to the business problem that we
    performed some initial analysis on in the first section of this chapter, which
    is as follows:'
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将回顾我们在本章第一节对一个商业问题进行了一些初步分析，该问题如下：
- en: '*The CEO of the game development company you work for has come up with a plan
    to strengthen the position of the company in the gaming market. From his industry
    knowledge and other business reports, he knows that a very effective way to attract
    new customers is to develop a great reputation in the mobile game space. Given
    this fact, he has the following plan: develop a strategy game for the iOS platform
    that will get a lot of positive attention, which in turn will bring a large number
    of new customers to the company. He is sure his plan will work if and only if
    the game gets great ratings from users. Since he is new in the mobile game space,
    he asks you for your help to answer the following question: What types of strategy
    games have great user ratings?*'
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: '*您所在的游戏开发公司的CEO提出了一项计划，以加强公司在游戏市场的地位。根据他的行业知识和其他商业报告，他知道吸引新客户的一种非常有效的方法是在移动游戏领域建立良好的声誉。鉴于这一事实，他制定了以下计划：为iOS平台开发一款策略游戏，这将吸引大量积极的关注，从而为公司带来大量新客户。他确信只有游戏得到用户的好评，他的计划才会奏效。由于他是移动游戏领域的新手，他请求您帮助回答以下问题：哪种类型的策略游戏得到了用户的好评？*'
- en: 'In this section, we will do some exploratory data analysis. You can think of
    this section as a continuation of the last section, as we will continue using
    descriptive statistics, and in addition to that, we will expand our analytical
    toolkit with one of the most powerful analytical devices: visualizations.'
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将进行一些探索性数据分析。您可以将本节视为上一节的延续，因为我们将继续使用描述性统计，并且除此之外，我们还将扩展我们的分析工具包，其中包括最强大的分析工具之一：可视化。
- en: The field of **Exploratory Data Analysis** (**EDA**) (like any other field related
    to data) has been growing rapidly, and the content of this section covers only
    some of the very basic concepts and visualizations. Despite that, it is very likely
    that you will use the visualizations presented in this section in every data analysis
    project you will encounter.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: '**探索性数据分析**（**EDA**）领域（就像与数据相关的任何其他领域一样）发展迅速，本节内容仅涵盖了一些非常基本的概念和可视化。尽管如此，很可能您会在遇到的每个数据分析项目中使用本节中呈现的可视化。'
- en: What Is EDA?
  id: totrans-321
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 什么是探索性数据分析？
- en: 'Now that we have refreshed our basic statistical definitions, we are ready
    to put them to use and complement the information we get from them with visualizations.
    In simple terms, EDA is the process of analyzing data by combining descriptive
    statistics with visualizations. The reasons and objectives of doing EDA include
    the following:'
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经复习了基本的统计定义，我们准备利用它们并用可视化来补充我们从中获得的信息。简而言之，探索性数据分析是通过将描述性统计与可视化相结合来分析数据的过程。进行探索性数据分析的原因和目标包括以下内容：
- en: Understanding the distributions of the variables
  id: totrans-323
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解变量的分布
- en: Understanding the relationships between two or more variables
  id: totrans-324
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解两个或多个变量之间的关系
- en: Detecting patterns that can't be found using numerical calculations
  id: totrans-325
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检测无法通过数值计算找到的模式
- en: Spotting anomalies or outliers in the data
  id: totrans-326
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发现数据中的异常或离群值
- en: Formulating a hypothesis about causal relationships
  id: totrans-327
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 制定关于因果关系的假设
- en: Informing us about how to engineer new variables (feature engineering)
  id: totrans-328
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 告诉我们如何构建新变量（特征工程）
- en: Informing us about possible formal inferential statistical tests
  id: totrans-329
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 告诉我们可能的正式推断统计检验
- en: By definition, while doing EDA we are exploring the data, so there are no recipes
    or sets of fixed steps to follow, and a lot of creativity is involved. However,
    it is also very important to provide some structure to the process, otherwise
    we could be producing plots and calculations with no clear end point. In data
    analytics (as in life), without a clear purpose, it is very easy to get lost,
    since there are countless ways to look at any regularly-sized dataset. Before
    starting to perform EDA, we need to define what is that we are trying to find,
    which is where the understanding of the business problem is key.
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 根据定义，在进行探索性数据分析时，我们正在探索数据，因此没有固定步骤或一套固定的步骤要遵循，需要涉及很多创造力。然而，为这个过程提供一些结构也非常重要，否则我们可能会产生没有明确结束点的图表和计算。在数据分析中（就像在生活中一样），如果没有明确的目的，很容易迷失方向，因为有无数种方法来查看任何规模适中的数据集。在开始进行探索性数据分析之前，我们需要定义我们试图找到的是什么，这就是业务问题理解的关键所在。
- en: 'I would recommend performing EDA in two steps:'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 我建议分两步进行探索性数据分析：
- en: '**Univariate step**: Understand each of the most important variables in the
    dataset: distributions, key characteristics, extreme values, and so on.'
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**单变量步骤**：了解数据集中最重要的每个变量：分布、关键特征、极端值等。'
- en: '**Look for relationships**: With the business/scientific problem in mind, *formulate
    a list of questions* whose answers will give you useful information about the
    problem you are trying to solve, and then let these questions guide the EDA process.'
  id: totrans-333
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**寻找关系**：在考虑业务/科学问题的情况下，*制定一系列问题*，这些问题的答案将为您提供有关您试图解决的问题的有用信息，然后让这些问题引导探索性数据分析过程。'
- en: The first step is what is usually called *univariate analysis*, and is relatively
    straightforward. For the second step, we use *bi-variate* or *multivariate* techniques
    since we need to look for relationships between variables. In the next section,
    we will do univariate EDA.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步通常被称为*单变量分析*，相对来说比较简单。对于第二步，我们使用*双变量*或*多变量*技术，因为我们需要寻找变量之间的关系。在下一节中，我们将进行单变量探索性数据分析。
- en: Univariate EDA
  id: totrans-335
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 单变量探索性数据分析
- en: As the name implies, univariate EDA is about analyzing a single variable at
    the time. In the previous section, we saw how easy it is to calculate the main
    descriptive statistics with pandas. Now we will complement the information we
    get from descriptive statistics using appropriate visualizations.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 正如其名称所示，单变量探索性数据分析是关于一次分析一个变量。在上一节中，我们看到使用pandas计算主要描述性统计有多么容易。现在我们将使用适当的可视化来补充我们从描述性统计中获得的信息。
- en: 'Before performing EDA, it is absolutely necessary to know which type of variables
    we are working with. As a refresher, here we have the main types of variables
    we can encounter:'
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行探索性数据分析之前，了解我们正在处理的变量类型是绝对必要的。作为复习，这里有我们可能遇到的主要变量类型：
- en: '**Numerical variables**: Those variables that can take numerical values:'
  id: totrans-338
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**数值变量**：那些可以取数值的变量：'
- en: 'a. **Continuous**: These are variables that can take a whole range of real
    values between a certain interval, such as height, weight, and mass.'
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: a. **连续**：这些是可以在某个区间内取一整个范围的实值的变量，例如身高、体重和质量。
- en: 'b. **Discrete**: These are variables that take only a specific, limited number
    of values, frequently integers. Examples include the number of children in a family
    or the number of employees.'
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: b. **离散**：这些是只取特定有限数值的变量，通常是整数。例如，家庭中的孩子数量或雇员数量。
- en: '**Categorical variables**: Those that can take only a specified number of categories
    as values:'
  id: totrans-341
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**分类变量**：只能取指定数量的类别作为值的变量：'
- en: 'a. **Ordinal**: Variables where the categories have some natural order. For
    instance, the variable `age group` could have the categories 20-29, 30-39, 40-49,
    and 50+. Notice that there is an order in those categories: 20-29 is lower than
    40-49.'
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: a. **有序**：变量的类别具有一定的自然顺序。例如，变量`年龄组`可以有类别20-29、30-39、40-49和50+。请注意，这些类别中有一定的顺序：20-29小于40-49。
- en: 'b. **Nominal**: These are categorical variables where there are no ordered
    relationships. For example, the colors blue, green, and red are categories without
    any sort of order.'
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: b. **名义**：这些是分类变量，其中没有排序关系。例如，蓝色、绿色和红色是没有任何排序的类别。
- en: '**Time-related variables**: Variables that relate to dates or datetimes.'
  id: totrans-344
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**与时间相关的变量**：与日期或日期时间相关的变量。'
- en: 'Let''s begin by identifying the numerical variables in our dataset. As we did
    previously while preparing the dataset, we realized that the variables that are
    *conceptually* numerical have an appropriate corresponding Python numerical data
    type. Let''s use the `info` method in our (modified) games DataFrame to check
    this again:'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们首先识别数据集中的数值变量。就像我们在准备数据集时做的那样，我们意识到*概念上*是数值的变量具有相应的Python数值数据类型。让我们再次使用修改后的游戏DataFrame中的`info`方法来检查这一点：
- en: '[PRE56]'
  id: totrans-346
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: 'The output is this:'
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 7.18: Numerical variables in the dataset'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.18：数据集中的数值变量'
- en: '](image/B15968_07_18.jpg)'
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_18.jpg)'
- en: 'Figure 7.18: Numerical variables in the dataset'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.18：数据集中的数值变量
- en: 'As we can see, the columns that are conceptually numerical: `average_user_rating`,
    `user_rating_count`, `price`, and `size` have datatypes of `float64`.'
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所看到的，概念上是数值的列：`average_user_rating`、`user_rating_count`、`price`和`size`的数据类型为`float64`。
- en: 'The most commonly used useful visualization for a single numerical variable
    is the histogram. Let''s see how it looks and then describe how it''s constructed.
    For this, we will use the `size` variable. Since this variable is in bytes, before
    visualizing it we will transform it to megabytes:'
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 单个数值变量最常用的有用可视化是直方图。让我们看看它的样子，然后描述它是如何构建的。为此，我们将使用`size`变量。由于这个变量是以字节为单位的，所以在可视化之前，我们将把它转换为兆字节：
- en: '[PRE57]'
  id: totrans-353
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: 'Now we can use pandas'' built-in `hist` method:'
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们可以使用pandas内置的`hist`方法：
- en: '[PRE58]'
  id: totrans-355
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: 'We have included two additional parameters: `bins`, which is (roughly) the
    number of bars we see, and `ec` (edge color), which is the color of the bar edges.
    The resulting figure is the following:'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还包括了两个额外的参数：`bins`，它是我们看到的柱子的数量，以及`ec`（边缘颜色），它是柱子边缘的颜色。得到的图如下：
- en: '![Figure 7.19: Histogram of size'
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.19：尺寸直方图'
- en: '](image/B15968_07_19.jpg)'
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_19.jpg)'
- en: 'Figure 7.19: Histogram of size'
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.19：尺寸直方图
- en: The histogram is built by dividing the *range* of the variable, which is defined
    as the maximum minus the minimum into equally sized intervals called bins. In
    this case, the maximum and the minimum are 4,005.6 and 0.2 respectively, so the
    range is about 4,005\. Since we indicated 30 as the number of bins, each bin will
    have a size of about 133 ~ 4,005 / 30\. So, the first bin goes from roughly the
    minimum (about 0) to 133, the second bin goes from 133 to 266 = 133 + 133, and
    so on. The height of the bar corresponds to the number of observations that fall
    in the interval of a particular bin. For instance, we see that the first bar goes
    a bit beyond 2,500 observations, which is the number of observations that fall
    in the first bin (which goes from 0 to ~133). As with quartiles, the exact algorithm
    to build the histogram varies with the software used. Pandas uses the Matplotlib
    implementation, so please check out Matplotlib's documentation if you want to
    know the details.
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: 直方图是通过将变量的*范围*分成等大小的间隔（称为区间）来构建的。在这种情况下，最大值和最小值分别为4,005.6和0.2，因此范围约为4,005。由于我们指定了30作为区间的数量，每个区间的大小约为133
    ~ 4,005 / 30。因此，第一个区间大约从最小值（约为0）到133，第二个区间从133到266 = 133 + 133，依此类推。柱子的高度对应于落入特定区间的观察数量。例如，我们看到第一个柱子略微超过2,500个观察，这是落入第一个区间的观察数量（从0到约133）。与四分位数一样，构建直方图的确切算法因使用的软件而异。Pandas使用Matplotlib实现，因此如果想了解详情，请查阅Matplotlib的文档。
- en: 'You should get used to seeing histograms and try reading them. For instance,
    the histogram of the *size* shows the following:'
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该习惯看直方图并尝试阅读它们。例如，*尺寸*的直方图显示如下：
- en: An important proportion of the games fall in the first bin (the tallest bar).
  id: totrans-362
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重要比例的游戏落在第一个区间（最高的柱子）中。
- en: Most of the values are below 500 MB.
  id: totrans-363
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大多数值都在500MB以下。
- en: 'The number (frequency) of observations goes down as the variable increases:
    we observe fewer and fewer games as the size grows.'
  id: totrans-364
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 观察数量（频率）随着变量增加而减少：随着尺寸的增加，我们观察到的游戏越来越少。
- en: The *x* axis of the plot goes until about 4,000 MB; however, we don't even see
    a bar there, the reason being that we have so few observations and that bar is
    so tiny that it's indistinguishable from zero. This means that we must have at
    least one extreme value (a game of a very large size).
  id: totrans-365
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 图表的*x*轴延伸到大约4000 MB；然而，我们甚至看不到一个柱形，原因是我们的观测值很少，那个柱形非常小，几乎可以忽略不计。这意味着我们至少有一个极端值（一个非常大尺寸的游戏）。
- en: The height of the bars above 1,000 MB is very low, so there are very few games
    above 1,000 MB.
  id: totrans-366
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在1000 MB以上的柱形的高度非常低，所以1000 MB以上的游戏非常少。
- en: 'The histogram is a perfect complement for the numerical information we get
    from the descriptive statistics:'
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 直方图是对我们从描述性统计中得到的数值信息的完美补充：
- en: '[PRE59]'
  id: totrans-368
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'The output is the following:'
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '[PRE60]'
  id: totrans-370
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'The median tells us that more than half of the games have a size of less than
    97.3 MB, and the game with the largest size is more than 40 times the median,
    which we could consider an *outlier* or an observation that is much more extreme
    than most of the values in our variable. As we did with user rating count, we
    could examine the largest games by sorting the series in descending order and
    then showing the first 12 values:'
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: 中位数告诉我们，超过一半的游戏大小小于97.3 MB，而最大大小的游戏比中位数大40倍以上，我们可以认为这是一个*异常值*或者是远远超过变量大部分值的观测值。与用户评分计数一样，我们可以通过按降序对系列进行排序然后显示前12个值来检查最大的游戏：
- en: '[PRE61]'
  id: totrans-372
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: 'The output is the following:'
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 7.20: Largest values of size'
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.20：尺寸最大的值'
- en: '](image/B15968_07_20.jpg)'
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_20.jpg)'
- en: 'Figure 7.20: Largest values of size'
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.20：尺寸最大的值
- en: We see that there are actually a few outliers, which are not just the maximum.
    There is actually no standard definition of *outlier*—it depends on the context.
    We are calling these observations outliers because they can be considered large
    sizes for a set of games in which 75% of them have sizes of less than 208 MB.
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 我们看到实际上有一些异常值，不仅仅是最大值。实际上，*异常值*没有标准定义——它取决于上下文。我们之所以称这些观测值为异常值，是因为它们可以被认为是一组游戏中的大尺寸，其中75%的游戏尺寸小于208
    MB。
- en: 'OK, back to histograms. One very cool feature of pandas is its ability to produce
    histograms for many numerical variables at the same time using the `hist` method
    of the `DataFrame` class. This feature will be useful when you have a lot of numerical
    variables in your dataset and you want to take a quick look at them:'
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 好的，回到直方图。pandas的一个非常酷的功能是它能够使用`DataFrame`类的`hist`方法同时为许多数值变量生成直方图。当数据集中有很多数值变量并且您想快速查看它们时，这个功能将非常有用：
- en: '[PRE62]'
  id: totrans-379
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: 'Pandas automatically takes all the numerical variables and produces a grid
    (which is adjustable) of rows and columns with the plots. In our case, we have
    four numerical variables, and the result is the following:'
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: pandas自动获取所有数值变量并生成一个网格（可调整大小）的图表。在我们的情况下，有四个数值变量，结果如下：
- en: '![Figure 7.21: Example of histograms of a DataFrame'
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.21：DataFrame直方图示例'
- en: '](image/B15968_07_21.jpg)'
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_21.jpg)'
- en: 'Figure 7.21: Example of histograms of a DataFrame'
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.21：DataFrame直方图示例
- en: The fact that we have a few extreme values (outliers) in `price`, `size`, and
    `user_rating_count` has the effect of not letting us see how the values of these
    variables are truly distributed.
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: '`price`、`size`和`user_rating_count`中有一些极端值（异常值），这导致我们无法真正看到这些变量的值是如何分布的。'
- en: 'With our knowledge of quantiles (and percentiles), let''s create a filter that
    will exclude the 1% of largest values in each of these three variables, which
    will hopefully allow us to understand the distributions better:'
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
  zh: 凭借我们对分位数（和百分位数）的了解，让我们创建一个过滤器，将在这三个变量中排除最大值的1%，这样就有望更好地理解分布：
- en: '[PRE63]'
  id: totrans-386
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: 'The result is the following:'
  id: totrans-387
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Figure 7.22: Example of histograms of a DataFrame'
  id: totrans-388
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.22：DataFrame直方图示例'
- en: '](image/B15968_07_22.jpg)'
  id: totrans-389
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_22.jpg)'
- en: 'Figure 7.22: Example of histograms of a DataFrame'
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.22：DataFrame直方图示例
- en: 'Now that the histograms have revealed more information, here are a few of the
    things we can read from the histograms:'
  id: totrans-391
  prefs: []
  type: TYPE_NORMAL
  zh: 现在直方图已经揭示了更多信息，我们可以从直方图中读取以下几点：
- en: Most games are free, and of the very few that are not free, the vast majority
    cost less than 10 dollars.
  id: totrans-392
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大多数游戏是免费的，而极少数不免费的游戏中，绝大多数价格低于10美元。
- en: 4.5 is the most common average user rating; in fact, we observe very few games
    with low average ratings (3 or below).
  id: totrans-393
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 4.5是最常见的平均用户评分；事实上，我们观察到很少有低于3的平均评分的游戏。
- en: Larger-sized games are rare.
  id: totrans-394
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大尺寸的游戏很少见。
- en: Most games have very few user ratings.
  id: totrans-395
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大多数游戏的用户评分很少。
- en: 'As an exercise, try to extract more information from these graphs and complement
    it with the descriptive statistics for these variables: for instance, comment
    on the decaying pattern of the size variable, or the highly concentrated pattern
    we see in the user rating count: what could explain those shapes?'
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: 作为练习，尝试从这些图表中提取更多信息，并结合这些变量的描述性统计进行补充：例如，评论大小变量的衰减模式，或者我们在用户评分计数中看到的高度集中模式：是什么导致了这些形状？
- en: 'Now let''s talk about another useful plot to see the distribution of a continuous
    variable: the boxplot. A boxplot is a graphical representation of the position
    statistics `Q1`, median, and `Q3`, and usually also shows the minimum and maximum.
    The boxplot for the sample dataset of 24 observations can be generated using the
    following line of code:'
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们谈谈另一个用于查看连续变量分布的有用图表：箱线图。箱线图是位置统计量`Q1`、中位数和`Q3`的图形表示，通常还显示最小值和最大值。可以使用以下代码生成包含24个观测值的样本数据集的箱线图：
- en: '[PRE64]'
  id: totrans-398
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: 'The result is as follows (annotations of the descriptive statistics have been
    added to the figure):'
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下（已在图中添加了描述性统计的注释）：
- en: '![Figure 7.23: Example of a boxplot'
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.23：箱线图示例'
- en: '](image/B15968_07_23.jpg)'
  id: totrans-401
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_23.jpg)'
- en: 'Figure 7.23: Example of a boxplot'
  id: totrans-402
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.23：箱线图示例
- en: 'The boxplot consists of two *whiskers* and a box. The first whisker (usually)
    starts at the minimum value, then it goes until **Q1**, which marks the beginning
    of the box, therefore the first whisker covers the bottom 25% of observations.
    The box goes from **Q1** to **Q3**, covering the *middle half* of the observations.
    The height of the box is called the **Inter Quartile Range** (**IQR**) and is
    a measure of dispersion, which tells us how *packed* the middle 50% of observations
    are: a larger IQR implies more dispersion. The line in the middle of the box corresponds
    to the median, and finally, the upper whisker (usually) finishes at the maximum
    value.'
  id: totrans-403
  prefs: []
  type: TYPE_NORMAL
  zh: 箱线图由两个*边缘线*和一个箱子组成。第一条边缘线（通常）从最小值开始，然后延伸到**Q1**，标志着箱子的开始，因此第一条边缘线覆盖了底部25%的观察结果。箱子从**Q1**到**Q3**，覆盖了观察结果的*中间一半*。箱子的高度称为**四分位距**（**IQR**），是离散度的度量，告诉我们观察结果的*中间50%*有多么*集中*：较大的IQR意味着更多的离散度。箱子中间的线对应于中位数，最后，上边缘线（通常）结束于最大值。
- en: 'Notice I have added a couple of *usually* in parenthesis for the maximum and
    minimum. When an observation is above *Q3 + 1.5 x IQR* (or below *Q1 - 1.5 x IQR*),
    it is often considered a candidate for an outlier and is plotted as a dot. If
    we have such observations, then the upper (lower) whisker ends at *Q3 + 1.5 x
    IQR* (or *Q1 - 1.5 x IQR*). Here is, for example, the boxplot for the `size` variable:'
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，我在括号中添加了一对“通常”来表示最大值和最小值。当一个观察值高于*Q3 + 1.5 x IQR*（或低于*Q1 - 1.5 x IQR*）时，通常被认为是异常值的候选，并被绘制为一个点。如果我们有这样的观察结果，那么上（下）边缘线将结束于*Q3
    + 1.5 x IQR*（或*Q1 - 1.5 x IQR*）。例如，这是`size`变量的箱线图：
- en: '[PRE65]'
  id: totrans-405
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: 'The result is the following:'
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Figure 7.24: Boxplot of size'
  id: totrans-407
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.24：尺寸的箱线图'
- en: '](image/B15968_07_24.jpg)'
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_24.jpg)'
- en: 'Figure 7.24: Boxplot of size'
  id: totrans-409
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.24：尺寸的箱线图
- en: In this case, the upper whisker does not finish on the maximum value, but it
    goes until *Q3 + 1.5 x IQR*. From this plot, we can say that the variable has
    many extreme values. Although the boxplots might sometimes be useful for univariate
    EDA, the histogram is preferable. The best use for boxplots is when analyzing
    the relation of a numerical variable versus a categorical one. We will return
    to the boxplots in the next subsection.
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，上边缘线并不是在最大值结束，而是延伸到*Q3 + 1.5 x IQR*。从这个图中，我们可以说这个变量有很多极端值。尽管箱线图有时对于单变量EDA可能有用，但直方图更可取。箱线图最好用于分析数值变量与分类变量的关系。我们将在下一小节中回到箱线图。
- en: 'To finish this subsection, let''s see how to produce a bar plot, which is used
    to show either counts, proportions, or percentages of a categorical variable.
    Let''s take a look at the `age_rating` column, which is a categorical variable.
    The following line will count the number of games for each of the values of the
    variable:'
  id: totrans-411
  prefs: []
  type: TYPE_NORMAL
  zh: 要完成本小节，让我们看看如何生成条形图，用于显示分类变量的计数、比例或百分比。让我们看看`age_rating`列，这是一个分类变量。以下代码将计算变量各个值的游戏数量：
- en: '[PRE66]'
  id: totrans-412
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: 'The result is the following:'
  id: totrans-413
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '[PRE67]'
  id: totrans-414
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'Since the result is also a pandas series, we can chain the methods and use
    the `plot` method with the argument `kind = ''bar''` to get our bar plot:'
  id: totrans-415
  prefs: []
  type: TYPE_NORMAL
  zh: 由于结果也是一个pandas系列，我们可以链接方法，并使用`plot`方法和参数`kind='bar'`来获得我们的条形图：
- en: '[PRE68]'
  id: totrans-416
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: 'The result looks like this:'
  id: totrans-417
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Figure 7.25: Bar plot for absolute counts of age_rating'
  id: totrans-418
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.25：年龄评级的绝对计数的条形图'
- en: '](image/B15968_07_25.jpg)'
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_25.jpg)'
- en: 'Figure 7.25: Bar plot for absolute counts of age_rating'
  id: totrans-420
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.25：年龄评级的绝对计数的条形图
- en: 'If we wanted to visualize the proportions, we could have modified the preceding
    line of code by adding the `normalize=True` argument to the `value_counts` method:'
  id: totrans-421
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们想要可视化比例，我们可以通过在`value_counts`方法中添加`normalize=True`参数来修改前面的代码行：
- en: '[PRE69]'
  id: totrans-422
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: 'The figure looks almost identical, the only change being in the *y* axis labels,
    which now show the proportions:'
  id: totrans-423
  prefs: []
  type: TYPE_NORMAL
  zh: 图表看起来几乎相同，唯一的变化在于*y*轴标签，现在显示比例：
- en: '![Figure 7.26: Bar plot for proportions of age ratings'
  id: totrans-424
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.26：年龄评级比例的条形图'
- en: '](image/B15968_07_26.jpg)'
  id: totrans-425
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_26.jpg)'
- en: 'Figure 7.26: Bar plot for proportions of age ratings'
  id: totrans-426
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.26：年龄评级比例的条形图
- en: 'Finally, another alternative to visualize proportions is using a pie chart.
    Pie charts are known to have some problems, among them the fact that they are
    not a good way to convey information, which is why I never use them. However,
    they are useful for presenting business information, so if your boss asks you
    for a pie chart, here is how to produce one:'
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，可视化比例的另一种选择是使用饼图。饼图已知存在一些问题，其中包括它们不是传达信息的好方法，这就是为什么我从不使用它们。然而，它们用于呈现业务信息，所以如果你的老板要求你做一个饼图，这里是如何生成一个：
- en: '[PRE70]'
  id: totrans-428
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: 'This is the result:'
  id: totrans-429
  prefs: []
  type: TYPE_NORMAL
  zh: 这是结果：
- en: '![Figure 7.27: Pie chart of age ratings'
  id: totrans-430
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.27：年龄评级的饼图'
- en: '](image/B15968_07_27.jpg)'
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_27.jpg)'
- en: 'Figure 7.27: Pie chart of age ratings'
  id: totrans-432
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.27：年龄评级的饼图
- en: 'The problem with pie charts is that they are just a way to beautify documents,
    not a good way to communicate quantitative information; visualizations are meant
    to be used when we want to complement and go beyond what numerical calculations
    can communicate. If we want to communicate proportions (or percentages), it is
    simply better to show the actual values, like so:'
  id: totrans-433
  prefs: []
  type: TYPE_NORMAL
  zh: 饼图的问题在于它们只是美化文件的一种方式，而不是传达定量信息的好方法；可视化是用于在我们想要补充和超越数值计算所能传达的内容时使用的。如果我们想要传达比例（或百分比），最好的方法就是显示实际值，如下所示：
- en: '[PRE71]'
  id: totrans-434
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: 'This gives the following output:'
  id: totrans-435
  prefs: []
  type: TYPE_NORMAL
  zh: 这将产生以下输出：
- en: '[PRE72]'
  id: totrans-436
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: 'Bi-variate EDA: Exploring Relationships Between Variables'
  id: totrans-437
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 双变量EDA：探索变量之间的关系
- en: 'Exploring relationships between variables is one of the most interesting aspects
    of statistical analysis. When exploring relations between pairs of variables,
    and considering only the broadest division of numerical and categorical variables,
    we have three cases:'
  id: totrans-438
  prefs: []
  type: TYPE_NORMAL
  zh: 探索变量之间的关系是统计分析中最有趣的方面之一。在探索变量对之间的关系时，考虑到只有数值和分类变量的最广泛的划分，我们有三种情况：
- en: Numerical versus numerical
  id: totrans-439
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数值与数值
- en: Numerical versus categorical
  id: totrans-440
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数值与分类
- en: Categorical versus categorical
  id: totrans-441
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分类与分类
- en: 'For the first case, the scatter plot is the visualization of choice. For the
    second case, depending on what we are trying to find, we have some choices, but
    often boxplots are most useful. Finally, for the third case, the most common choice
    is to present what is called a contingency table: although some visualizations
    options exist for comparing categorical data, they are not so common.'
  id: totrans-442
  prefs: []
  type: TYPE_NORMAL
  zh: 对于第一种情况，散点图是首选的可视化方式。对于第二种情况，根据我们想要找到的内容，我们有一些选择，但通常箱线图最有用。最后，对于第三种情况，最常见的选择是呈现所谓的列联表：尽管存在一些用于比较分类数据的可视化选项，但它们并不常见。
- en: 'As we said back in *Exploratory Data Analysis*, when doing this type of analysis,
    it is often a good idea to formulate a list of questions we want to answer before
    we start producing visualizations. Keeping in mind our business problem, we will
    try to shed some light on the following three questions:'
  id: totrans-443
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在*探索性数据分析*中所说的，当进行这种类型的分析时，通常在开始生成可视化之前制定要回答的问题列表是一个好主意。牢记我们的业务问题，我们将尝试回答以下三个问题：
- en: What is the relationship between the size and average user rating?
  id: totrans-444
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 尺寸和平均用户评分之间的关系是什么？
- en: What is the relationship between the age rating and average user rating?
  id: totrans-445
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 年龄评级和平均用户评分之间的关系是什么？
- en: What is the relationship between having in-app purchases and the game rating?
  id: totrans-446
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有无应用内购买和游戏评分之间的关系是什么？
- en: 'We will try answering the first question using a scatter plot. In its most
    simple version, the scatter plots show each point of a pair of variables using
    a Cartesian plane. Each pair of points is represented by a dot, and the pattern
    of the dots indicate if there is some kind of relationship between the two plotted
    variables. The following table shows illustrations of some of the patterns you
    can detect using a scatter plot:'
  id: totrans-447
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将尝试使用散点图来回答第一个问题。在其最简单的版本中，散点图使用笛卡尔平面显示一对变量的每个点。每对点由一个点表示，点的模式表明两个绘制变量之间是否存在某种关系。以下表格显示了使用散点图可以检测到的一些模式的示例：
- en: '![Figure 7.28: Examples of patterns in scatter plots'
  id: totrans-448
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.28：散点图中的模式示例'
- en: '](image/B15968_07_28.jpg)'
  id: totrans-449
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_28.jpg)'
- en: 'Figure 7.28: Examples of patterns in scatter plots'
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.28：散点图中的模式示例
- en: 'Keep in mind that the examples from the table are just for reference: usually,
    real-world datasets do not offer such easily identifiable patterns.'
  id: totrans-451
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，表中的示例仅供参考：通常，现实世界的数据集不会提供如此容易识别的模式。
- en: 'Although we can create plots using pandas, we will use Seaborn, a very popular
    statistical visualization that is capable of producing beautiful and complex plots
    with just a few lines of code. We will use the `scatterplot` function, which takes
    the names of the variables that will go on each axis and the name of the DataFrame:'
  id: totrans-452
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然我们可以使用pandas创建图表，但我们将使用Seaborn，这是一个非常流行的统计可视化工具，可以仅用几行代码生成美丽和复杂的图表。我们将使用`scatterplot`函数，该函数接受将放在每个轴上的变量的名称和DataFrame的名称：
- en: '[PRE73]'
  id: totrans-453
  prefs: []
  type: TYPE_PRE
  zh: '[PRE73]'
- en: 'Here we have the output:'
  id: totrans-454
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是输出：
- en: '![Figure 7.29: Scatter plot of size versus average user ratings'
  id: totrans-455
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.29：尺寸与平均用户评分的散点图'
- en: '](image/B15968_07_29.jpg)'
  id: totrans-456
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_29.jpg)'
- en: 'Figure 7.29: Scatter plot of size versus average user ratings'
  id: totrans-457
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.29：尺寸与平均用户评分的散点图
- en: If we take a look at the upper-right quarter of the plot, it looks like games
    of a certain size, say above 1,500 MB, tend to have ratings of 3.5 and above.
    Since size is a proxy for the quality of the graphics and the complexity of the
    game, this plot seems to suggest that a way to improve the chances of getting
    a decent average rating is by producing games of a certain complexity and visual
    quality. However, the plot also shows relatively small games getting average ratings
    of 5.
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们看一下图的右上角，似乎某种尺寸的游戏，比如超过1,500 MB的游戏，倾向于具有3.5及以上的评分。由于尺寸是图形质量和游戏复杂性的代理，这个图似乎表明提高获得体面平均评分的机会的一种方法是制作一定复杂性和视觉质量的游戏。然而，图表还显示相对较小的游戏获得了5的平均评分。
- en: 'Now let''s explore the relationship between a numerical and a categorical variable.
    Maybe we can get more insights into the ratings if we treat the average rating
    as a categorical variable; after all, due to some quirks of the dataset, this
    variable is discrete instead of continuous; it takes values only on whole and
    half points. The following code categorizes the variable using the mapping defined
    in a dictionary:'
  id: totrans-459
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们探索数值和分类变量之间的关系。也许如果我们将平均评分视为分类变量，我们可以更多地了解评分。毕竟，由于数据集的一些怪癖，这个变量是离散的而不是连续的；它只取整数和半数值。以下代码使用字典中定义的映射对变量进行分类：
- en: '[PRE74]'
  id: totrans-460
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: 'We have created a new average user rating scale that uses categorical variables.
    We can now use a boxplot to see if the distribution of size values changes for
    the different types of ratings:'
  id: totrans-461
  prefs: []
  type: TYPE_NORMAL
  zh: 我们创建了一个使用分类变量的新平均用户评分比例。现在我们可以使用箱线图来查看不同类型评分的尺寸值分布是否发生变化：
- en: '[PRE75]'
  id: totrans-462
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: 'The result is the following:'
  id: totrans-463
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Figure 7.30: Boxplot of size versus categorical user ratings'
  id: totrans-464
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.30：尺寸与分类用户评分的箱线图'
- en: '](image/B15968_07_30.jpg)'
  id: totrans-465
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_30.jpg)'
- en: 'Figure 7.30: Boxplot of size versus categorical user ratings'
  id: totrans-466
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.30：尺寸与分类用户评分的箱线图
- en: We have restricted the dataset to games below 600 MB to see if the relationship
    of size-rating holds for games that are not too large. We see that the distributions
    are in fact different, with poorly-rated games having smaller sizes in general
    than the other categories (the boxplot is lower than the rest). Notice that the
    distributions of good and excellently-rated games are almost identical, perhaps
    suggesting that, for games below 600 MB, complexity and quality graphics influence
    ratings up to a point.
  id: totrans-467
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将数据集限制在600 MB以下的游戏，以查看尺寸评分的关系是否适用于不太大的游戏。我们看到分布实际上是不同的，一般来说，评分较低的游戏的尺寸要小于其他类别（箱线图低于其他）。请注意，好评和优秀评分的游戏的分布几乎相同，也许表明对于600
    MB以下的游戏，复杂性和高质量图形在一定程度上影响评分。
- en: 'Finally, let''s review the third case: how to explore the relationship between
    two categorical variables. To do this, let''s explore age ratings versus the categorical
    rating that we just created. We can produce a table that counts how many observations
    we have in each combination of the values of our two variables. This is often
    called a contingency table. Pandas has the handy `crosstab` function for this
    purpose:'
  id: totrans-468
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，让我们回顾第三种情况：如何探索两个分类变量之间的关系。为此，让我们探索年龄评分与我们刚刚创建的分类评分之间的关系。我们可以生成一个表，计算我们两个变量的值组合中有多少观察结果。这通常被称为列联表。Pandas有一个方便的`crosstab`函数来实现这个目的：
- en: '[PRE76]'
  id: totrans-469
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: 'The result is this:'
  id: totrans-470
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: '![Figure 7.31: Contingency table of age ratings versus categorical user ratings'
  id: totrans-471
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.31：年龄评分与分类用户评分的列联表'
- en: '](image/B15968_07_31.jpg)'
  id: totrans-472
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_31.jpg)'
- en: 'Figure 7.31: Contingency table of age ratings versus categorical user ratings'
  id: totrans-473
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.31：年龄评分与分类用户评分的列联表
- en: 'It is good to have the counts; however, it is still a bit tricky to make sense
    of this data. What we need in order to find out if these two variables are related
    is to find out whether the proportion of age ratings changes according to how
    good or bad the game has been rated. For instance, if we find that 90% of 4+ games
    are poorly rated, and at the same time, only 15% of 17+ games are poorly rated,
    then it is reasonable to assume that these variables have some sort of relationship.
    To perform this calculation, we have to normalize the rows of the former table.
    We do this by adding the `normalize=''index''` parameter:'
  id: totrans-474
  prefs: []
  type: TYPE_NORMAL
  zh: 拥有计数是很好的，但是仍然有点难以理解这些数据。为了找出这两个变量是否相关，我们需要找出年龄评分的比例是否根据游戏的好坏而变化。例如，如果我们发现4+游戏中有90%的游戏评分较低，同时17+游戏中只有15%的游戏评分较低，那么可以合理地假设这些变量之间存在某种关系。为了进行这种计算，我们必须对前一个表格进行标准化。我们通过添加`normalize='index'`参数来实现这一点：
- en: '[PRE77]'
  id: totrans-475
  prefs: []
  type: TYPE_PRE
  zh: '[PRE77]'
- en: 'We have multiplied the whole table by 100, so it is easier to read as percentages:'
  id: totrans-476
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经将整个表乘以100，这样更容易阅读为百分比：
- en: '![Figure 7.32: Row-normalized contingency table of age ratings versus categorical
    user ratings'
  id: totrans-477
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.32：行标准化的年龄评分与分类用户评分的列联表'
- en: '](image/B15968_07_32.jpg)'
  id: totrans-478
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_32.jpg)'
- en: 'Figure 7.32: Row-normalized contingency table of age ratings versus categorical
    user ratings'
  id: totrans-479
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.32：行标准化的年龄评分与分类用户评分的列联表
- en: Since the rows have been normalized, every row should add up to 100\. Now we
    can easily compare the distribution of the different user ratings across the different
    age ratings. For instance, we observe that the proportion of excellently rated
    games is almost the same, regardless of the age rating, and that the same happens
    (more or less) for the other columns. This suggests that perhaps the age rating
    of the game is not a big factor for the ratings of the games.
  id: totrans-480
  prefs: []
  type: TYPE_NORMAL
  zh: 由于行已经被标准化，每行的总和应该为100。现在我们可以轻松比较不同用户评分在不同年龄评分中的分布。例如，我们观察到，无论年龄评分如何，优秀评分的游戏比例几乎相同，其他列也是如此（多多少少）。这表明也许游戏的年龄评分对游戏的评分并不是一个重要因素。
- en: Here is where statistical analysis becomes an art. The findings of the initial
    exploration produce new questions and hypotheses that we would further explore
    using more numerical and visual analysis, and hopefully, after a few iterations,
    we will produce useful information we can turn into knowledge about the problem
    at hand.
  id: totrans-481
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是统计分析成为一门艺术的地方。最初的探索结果产生了新的问题和假设，我们将进一步使用更多的数值和可视化分析来探索，希望经过几次迭代后，我们将产生有关手头问题的有用信息。
- en: I will close this section by stating that while the scope of this book focuses
    on visualizing the relationships between two variables, it is possible to visually
    explore relationships between three or more variables. However, keep in mind that
    having more than two variables in a visualization often exponentially increases
    the complexity of the analysis.
  id: totrans-482
  prefs: []
  type: TYPE_NORMAL
  zh: 我将通过说明，尽管本书的范围集中在可视化两个变量之间的关系上，但也可以通过可视化探索三个或更多变量之间的关系。但是，请记住，在可视化中使用两个以上的变量通常会大幅增加分析的复杂性。
- en: 'Exercise 7.03: Practicing EDA'
  id: totrans-483
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习7.03：练习EDA
- en: In this exercise, we will use a boxplot to visualize whether free games have
    different ratings than paid games.
  id: totrans-484
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将使用箱线图来可视化免费游戏和付费游戏的评分是否不同。
- en: 'First, let''s take a look at the different prices we have in our dataset. For
    this, take a look at the unique values of price:'
  id: totrans-485
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，让我们看看数据集中有哪些不同的价格。为此，查看价格的唯一值：
- en: '[PRE78]'
  id: totrans-486
  prefs: []
  type: TYPE_PRE
  zh: '[PRE78]'
- en: 'The output looks like this:'
  id: totrans-487
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '[PRE79]'
  id: totrans-488
  prefs: []
  type: TYPE_PRE
  zh: '[PRE79]'
- en: 'It looks like all the games are sold for some number of dollars plus `99` cents.
    We know that in practice `2.99` means `3` dollars. Transform this variable to
    integer values using the built-in `round` method, so the values are nice round
    numbers:'
  id: totrans-489
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 看起来所有的游戏都是以一定数量的美元加99美分出售的。我们知道在实际中2.99意味着3美元。使用内置的round方法将这个变量转换为整数值，这样值就是漂亮的整数：
- en: '[PRE80]'
  id: totrans-490
  prefs: []
  type: TYPE_PRE
  zh: '[PRE80]'
- en: 'Since this is a discrete numerical variable, use a bar plot to visualize the
    distribution of the games for each of the prices:'
  id: totrans-491
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于这是一个离散数值变量，请使用条形图来可视化每个价格的游戏分布：
- en: '[PRE81]'
  id: totrans-492
  prefs: []
  type: TYPE_PRE
  zh: '[PRE81]'
- en: 'The output is as follows:'
  id: totrans-493
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 7.33: Bar plot of the number of observations by price'
  id: totrans-494
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.33：按价格观察次数的条形图'
- en: '](image/B15968_07_33.jpg)'
  id: totrans-495
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_33.jpg)'
- en: 'Figure 7.33: Bar plot of the number of observations by price'
  id: totrans-496
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.33：按价格观察次数的条形图
- en: 'It looks like the majority of the games are free. To simplify the analysis,
    create a categorical variable named `cat_price` that indicates whether a games
    is free or paid:'
  id: totrans-497
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 看起来大多数游戏都是免费的。为了简化分析，创建一个名为`cat_price`的分类变量，指示游戏是免费还是付费：
- en: '[PRE82]'
  id: totrans-498
  prefs: []
  type: TYPE_PRE
  zh: '[PRE82]'
- en: 'Use a boxplot to visualize the relationship between the variable created in
    the previous point:'
  id: totrans-499
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用箱线图来可视化前一点中创建的变量之间的关系：
- en: '[PRE83]'
  id: totrans-500
  prefs: []
  type: TYPE_PRE
  zh: '[PRE83]'
- en: 'The output is as follows:'
  id: totrans-501
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '![Figure 7.34: Boxplot: cat_price versus average user ratings'
  id: totrans-502
  prefs: []
  type: TYPE_NORMAL
  zh: '![图7.34：箱线图：cat_price与平均用户评分'
- en: '](image/B15968_07_34.jpg)'
  id: totrans-503
  prefs: []
  type: TYPE_NORMAL
  zh: '](image/B15968_07_34.jpg)'
- en: 'Figure 7.34: Boxplot: cat_price versus average user ratings'
  id: totrans-504
  prefs: []
  type: TYPE_NORMAL
  zh: 图7.34：箱线图：cat_price与平均用户评分
- en: From the plot, we can see that the distributions of average user ratings look
    almost identical for free and paid games. This suggests that the status of free
    versus paid games does not affect the rating of the game.
  id: totrans-505
  prefs: []
  type: TYPE_NORMAL
  zh: 从图表中，我们可以看到免费和付费游戏的平均用户评分分布几乎相同。这表明免费与付费游戏的状态不会影响游戏的评分。
- en: In this exercise, we have used a boxplot to explore the distribution of the
    variable price and see if there is some relationship between this variable and
    the average user rating.
  id: totrans-506
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们使用箱线图来探索变量价格的分布，并查看这个变量与平均用户评分之间是否存在某种关系。
- en: Note
  id: totrans-507
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: To access the source code for this specific section, please refer to [https://packt.live/2VBV2gI](https://packt.live/2VBV2gI).
  id: totrans-508
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问此特定部分的源代码，请参阅[https://packt.live/2VBV2gI](https://packt.live/2VBV2gI)。
- en: You can also run this example online at [https://packt.live/2YUGv1I](https://packt.live/2YUGv1I).
  id: totrans-509
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以在[https://packt.live/2YUGv1I](https://packt.live/2YUGv1I)上线运行此示例。
- en: In this section, we have learned about EDA, which is the process of complementing
    descriptive statistics with visualizations. We learned about some of the most
    useful types of visualizations that are used in virtually every type of statistical
    analysis. You have become familiar with histograms, boxplots, bar plots, and scatter
    plots, which are all powerful tools to complement the numerical analysis and reveal
    useful information about a dataset.
  id: totrans-510
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们学习了EDA，这是将描述性统计与可视化相结合的过程。我们了解了几种在几乎每种统计分析中使用的最有用的可视化类型。您已经熟悉了直方图、箱线图、条形图和散点图，这些都是强大的工具，可以补充数值分析并揭示有关数据集的有用信息。
- en: EDA is an essential step in every statistical analysis since it allows us, among
    other things, to get to know the variables in a dataset, recognize potential relationships
    between them, and generate a hypothesis that can be formally tested using formal
    inferential methods. Now that we have learned the basics of descriptive statistics,
    we can move on to learn about inferential statistics, but first, we must learn
    about some fundamentals of probability theory, which is the topic of the next
    chapter.
  id: totrans-511
  prefs: []
  type: TYPE_NORMAL
  zh: 在每个统计分析中，EDA是一个必不可少的步骤，因为它允许我们了解数据集中的变量，识别它们之间的潜在关系，并生成可以使用形式推断方法进行正式测试的假设。现在我们已经学会了描述性统计的基础知识，我们可以继续学习推断统计学，但首先，我们必须学习一些概率论的基础知识，这是下一章的主题。
- en: 'Activity 7.01: Finding Out Highly Rated Strategy Games'
  id: totrans-512
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 活动7.01：查找评分高的策略游戏
- en: 'The game development company you work for has come up with a plan to strengthen
    its position in the gaming market. From industry knowledge and other business
    reports, it is evident that a very effective way to attract new customers is to
    develop a great reputation in the mobile game space. Given this fact, your company
    has the following plan: develop a strategy game for the iOS platform that will
    get a lot of positive attention, which in turn will bring a large number of new
    customers to the company. The company believes that this plan will work if and
    only if the game gets great ratings from users. Since you are an experienced individual
    in the mobile game space, you are asked to answer the following question: what
    types of strategy games have great user ratings?'
  id: totrans-513
  prefs: []
  type: TYPE_NORMAL
  zh: 您所在的游戏开发公司已经提出了一项计划，以加强其在游戏市场的地位。根据行业知识和其他商业报告，很明显吸引新客户的一个非常有效的方法是在移动游戏领域建立良好的声誉。鉴于这一事实，您的公司有以下计划：为iOS平台开发一款策略游戏，这款游戏将受到很多积极关注，从而将大量新客户带到公司。公司相信只有游戏得到用户的好评，这个计划才会奏效。由于您在移动游戏领域有丰富的经验，因此您被要求回答以下问题：哪种类型的策略游戏得到了很高的用户评分？
- en: 'The goal of this activity is two-fold: first is to create a new variable based
    on the combination of two categorical variables. Then, use the `groupby` method
    to calculate descriptive statistics on the user ratings to see whether there is
    a relationship between the average user ratings and the newly created variable.'
  id: totrans-514
  prefs: []
  type: TYPE_NORMAL
  zh: 这项活动的目标是双重的：首先是基于两个分类变量的组合创建一个新变量。然后，使用`groupby`方法对用户评分进行描述性统计，以查看平均用户评分与新创建变量之间是否存在关系。
- en: 'Steps for completion:'
  id: totrans-515
  prefs: []
  type: TYPE_NORMAL
  zh: 完成步骤：
- en: Load the `numpy` and `pandas` libraries.
  id: totrans-516
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载`numpy`和`pandas`库。
- en: Load the strategy games dataset (in the `data` folder of the chapter).
  id: totrans-517
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 加载策略游戏数据集（在本章的`data`文件夹中）。
- en: 'Perform all the transformations we did in the first section of the chapter:'
  id: totrans-518
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行本章第一部分中的所有转换：
- en: a. Change the names of the variables.
  id: totrans-519
  prefs: []
  type: TYPE_NORMAL
  zh: a. 更改变量的名称。
- en: b. Set the column `id` to `index`.
  id: totrans-520
  prefs: []
  type: TYPE_NORMAL
  zh: b. 将`id`列设置为`index`。
- en: c. Drop the `url` and `icon_url` columns.
  id: totrans-521
  prefs: []
  type: TYPE_NORMAL
  zh: c. 删除`url`和`icon_url`列。
- en: d. Change `original_release_date` and `current_version_release_date` to `datetime`.
  id: totrans-522
  prefs: []
  type: TYPE_NORMAL
  zh: d. 将`original_release_date`和`current_version_release_date`更改为`datetime`。
- en: e. Eliminate the rows where `average_user_rating` is null from the DataFrame.
  id: totrans-523
  prefs: []
  type: TYPE_NORMAL
  zh: e. 从DataFrame中删除`average_user_rating`为空的行。
- en: f. Keep in the DataFrame only the rows where `user_rating_count` is equal or
    greater than 30.
  id: totrans-524
  prefs: []
  type: TYPE_NORMAL
  zh: f. 仅保留DataFrame中`user_rating_count`等于或大于30的行。
- en: Print the dimensions of the dataset. You must have a DataFrame with 4,311 rows
    and 15 columns.
  id: totrans-525
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打印数据集的维度。您必须有一个包含4,311行和15列的DataFrame。
- en: Impute the missing values in the `languages` column with the string `EN` to
    indicate that those games are available only in English.
  id: totrans-526
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用字符串`EN`填充`languages`列中的缺失值，以表示这些游戏只能用英语进行游玩。
- en: Create a variable called `free_game` that has the value of `free` if the game
    has a price of zero and `paid` if the price is above zero.
  id: totrans-527
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`free_game`的变量，如果游戏价格为零，则其值为`free`，如果价格大于零，则其值为`paid`。
- en: Create a variable called `multilingual` that has the values of `monolingual`
    if the language column has only one language string, and `multilingual` if the
    language column has at least two language strings.
  id: totrans-528
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`multilingual`的变量，如果语言列只有一个语言字符串，则其值为`monolingual`，如果语言列至少有两个语言字符串，则其值为`multilingual`。
- en: Create one variable that contains the four combinations from the two variables
    created in the previous step (`free-monolingual`, `free-multilingual`, `paid-monolingual`,
    and `paid-multilingual`).
  id: totrans-529
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个变量，其中包含在上一步中创建的两个变量的四种组合（`free-monolingual`，`free-multilingual`，`paid-monolingual`和`paid-multilingual`）。
- en: Calculate how many observations we have of each type in the `price_language`
    variable.
  id: totrans-530
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算`price_language`变量中每种类型的观察数量。
- en: Use the `groupby` method on the games DataFrame, group by the newly created
    variable, then select the `average_user_rating` variables and calculate the descriptive
    statistics.
  id: totrans-531
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在games DataFrame上使用`groupby`方法，按照新创建的变量进行分组，然后选择`average_user_rating`变量并计算描述统计信息。
- en: Note
  id: totrans-532
  prefs: []
  type: TYPE_NORMAL
  zh: Note
- en: The solution for this activity can be found on page 681.
  id: totrans-533
  prefs: []
  type: TYPE_NORMAL
  zh: 此活动的解决方案可在第681页找到。
- en: In this activity, we have shown one approach to create a new categorical variable
    that results from the possible combinations of two other categorical variables.
    Then we have used the `groupby` method to calculate the descriptive statistics
    across the possible values of the newly created variable.
  id: totrans-534
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个活动中，我们展示了创建一个新的分类变量的一种方法，该变量是由两个其他分类变量的可能组合产生的。然后，我们使用`groupby`方法来计算新创建变量的可能值的描述统计信息。
- en: Summary
  id: totrans-535
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Summary
- en: 'In this chapter, we learned about the first steps toward performing any kind
    of statistical analysis: first, we defined our business problem and introduced
    the dataset. Based on the problem we wanted to solve, we prepared the dataset
    accordingly: we deleted some records, imputed missing values, transformed the
    types of some variables, and created new ones. Then we learned about the need
    for descriptive statistics; we learned how easy it is to calculate them using
    pandas and how to use and interpret those calculations. In the final section,
    we learned about how we can combine visualizations with descriptive statistics
    to get a deeper understanding of the relationships between variables in our datasets.
    What we learned in this chapter are concepts and techniques that you will be able
    to put in practice in any data analysis you perform. However, to get more sophisticated
    in your analysis, you need to have a good grasp of the basics of probability theory,
    which is the subject of our next chapter.'
  id: totrans-536
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了进行任何统计分析的第一步：首先，我们定义了我们的业务问题并介绍了数据集。根据我们想要解决的问题，我们相应地准备了数据集：删除了一些记录，填补了缺失值，转换了一些变量的类型，并创建了新变量。然后，我们了解了描述统计的必要性；我们学会了使用pandas轻松计算它们以及如何使用和解释这些计算。在最后一部分，我们学习了如何将可视化与描述统计相结合，以更深入地了解数据集中变量之间的关系。在本章中学到的概念和技术，您可以在进行任何数据分析时进行实践。然而，要在分析中变得更复杂，您需要对概率论的基础有很好的掌握，这是我们下一章的主题。
- en: QDN92
  id: totrans-537
  prefs: []
  type: TYPE_NORMAL
  zh: QDN92
- en: MWM57
  id: totrans-538
  prefs: []
  type: TYPE_NORMAL
  zh: MWM57
