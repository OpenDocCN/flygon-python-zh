- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: The book starts by covering the set up of a Python environment to perform automation
    tasks, as well as the modules, libraries, and tools you will be using.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本书首先介绍了建立Python环境以执行自动化任务的设置，以及您将使用的模块、库和工具。
- en: We'll explore examples of network automation tasks using simple Python programs
    and Ansible. Next, we will walk you through automating administration tasks with
    Python Fabric, where you will learn to perform server configuration and administration
    along with system administration tasks such as user management, database management,
    and process management. As you progress through this book, you'll automate several
    testing services with Python scripts and perform automation tasks on virtual machines
    and the cloud infrastructure with Python. In the concluding chapters, you will
    cover Python-based offensive security tools and learn to automate your security
    tasks.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用简单的Python程序和Ansible探索网络自动化任务的示例。接下来，我们将带您了解如何使用Python Fabric自动化管理任务，您将学习执行服务器配置和管理以及系统管理任务，如用户管理、数据库管理和进程管理。随着您在本书中的进展，您将使用Python脚本自动化多个测试服务，并使用Python在虚拟机和云基础架构上执行自动化任务。在最后几章中，您将涵盖基于Python的攻击性安全工具，并学习如何自动化您的安全任务。
- en: By the end of this book, you will have mastered the skills of automating several
    system administration tasks with Python.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 通过本书，您将掌握使用Python自动化多个系统管理任务的技能。
- en: You can visit the author's blog at the following link: [https://basimaly.wordpress.com/.](https://basimaly.wordpress.com/)
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以访问作者的博客，链接如下：[https://basimaly.wordpress.com/.](https://basimaly.wordpress.com/)
- en: Who this book is for
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 这本书是为谁准备的
- en: '*Hands-On Enterprise Automation* *with Python* is for system administrators
    and DevOps engineers who are looking for an alternative to major automation frameworks
    such as Puppet and Chef. Basic programming knowledge with Python and Linux shell
    scripting is necessary.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '*使用Python进行企业自动化*适用于寻找Puppet和Chef等主要自动化框架替代方案的系统管理员和DevOps工程师。需要具备Python和Linux
    shell脚本的基本编程知识。'
- en: What this book covers
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 这本书涵盖了什么
- en: '[Chapter 1](part0020.html#J2B80-9cfcdc5beecd470bbeda046372f0337f), *Setting
    Up Python Environment, *explores how to download and install the Python interpreter
    along with the Python Integrated Development Environment, called *JetBrains PyCharm.* The
    IDE provides you with smart autocompletion, intelligent code analysis, powerful
    refactoring and integrates with Git, virtualenv, Vagrant, and Docker. This will
    help you to write professional and robust Python code.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[第1章](part0020.html#J2B80-9cfcdc5beecd470bbeda046372f0337f)，*设置Python环境*，探讨了如何下载和安装Python解释器以及名为*JetBrains
    PyCharm*的Python集成开发环境。该IDE提供智能自动完成、智能代码分析、强大的重构，并与Git、virtualenv、Vagrant和Docker集成。这将帮助您编写专业和健壮的Python代码。'
- en: '[Chapter 2](part0034.html#10DJ40-9cfcdc5beecd470bbeda046372f0337f), *Common
    Libraries Used in Automation*, covers the Python libraries that are available
    today and that are used for automation. We will categorize them based on their
    usage (system, network, and cloud) and provide a simple introduction. As you progress
    through the book, you will find yourself deep diving into each of them and understanding
    their usage.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[第2章](part0034.html#10DJ40-9cfcdc5beecd470bbeda046372f0337f)，*自动化中使用的常见库*，介绍了今天可用的用于自动化的Python库，并根据它们的用途（系统、网络和云）进行分类，并提供简单的介绍。随着您在本书中的进展，您将发现自己深入研究每一个库，并了解它们的用途。'
- en: '[Chapter 3](part0020.html#J2B80-9cfcdc5beecd470bbeda046372f0337f), *Setting
    up Your Network Lab Environment*, discusses the merits of network automation and
    how network operators use it today to automate the current devices. We will explore
    popular libraries that are used today to automate network nodes from Cisco, Juniper,
    and Arista. This chapter covers how to build a networking lab to apply the Python
    script on. We will use an open source network emulation tool called EVE-NG.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[第3章](part0020.html#J2B80-9cfcdc5beecd470bbeda046372f0337f)，*设置您的网络实验室环境*，讨论了网络自动化的优点以及网络运营商如何使用它来自动化当前的设备。我们将探讨今天用于自动化来自思科、Juniper和Arista的网络节点的流行库。本章介绍了如何构建一个网络实验室来应用Python脚本。我们将使用一个名为EVE-NG的开源网络仿真工具。'
- en: '[Chapter 4](part0062.html#1R42S0-9cfcdc5beecd470bbeda046372f0337f), *Using
    Python to Manage Network Devices*, dives into managing networking devices through
    telnet and SSH connections using netmiko, paramiko, and telnetlib. We will learn
    how to write the Python code to access switches and routers and execute commands
    on the terminal and then return the output. We will also learn how to utilize
    different Python techniques to back up and push configuration. The chapter ends
    with some use cases used today in modern network environment.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[第4章](part0062.html#1R42S0-9cfcdc5beecd470bbeda046372f0337f)，*使用Python管理网络设备*，深入介绍了通过telnet和SSH连接使用netmiko、paramiko和telnetlib管理网络设备。我们将学习如何编写Python代码来访问交换机和路由器，并在终端上执行命令，然后返回输出。我们还将学习如何利用不同的Python技术来备份和推送配置。本章以当今现代网络环境中使用的一些用例结束。'
- en: '[Chapter 5](part0087.html#2IV0U0-9cfcdc5beecd470bbeda046372f0337f), *Extracting
    Useful Data from Network Devices*, explains how to use different tools and techniques
    inside Python to extract useful data from returned output and act upon it. Also,
    we will use a special library called *CiscoConfParse* to audit the configuration.
    Then we will learn how to visualize data to generate appealing graphs and reports
    with matplotlib.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[第5章](part0087.html#2IV0U0-9cfcdc5beecd470bbeda046372f0337f)，*从网络设备中提取有用数据*，解释了如何使用Python内部的不同工具和技术从返回的输出中提取有用数据并对其进行操作。此外，我们将使用一个名为*CiscoConfParse*的特殊库来审计配置。然后，我们将学习如何可视化数据，使用matplotlib生成吸引人的图表和报告。'
- en: '[Chapter 6](part0102.html#318PC0-9cfcdc5beecd470bbeda046372f0337f), *Configuration
    Generator with Python and Jinja2*, explains how to generate a common configuration
    for a site with hundreds of network nodes. We will learn how to write a template
    and use it to generate a golden configuration with a templating language called
    Jinja2.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 第6章《使用Python和Jinja2生成配置文件》解释了如何为拥有数百个网络节点的站点生成通用配置。我们将学习如何编写模板，并使用Jinja2模板语言生成黄金配置。
- en: '[Chapter 7](part0110.html#38STS0-9cfcdc5beecd470bbeda046372f0337f), *Parallel
    Execution of the Python Script*, covers how to instantiate and execute your Python
    code in parallel. This will allow us to finish the automation workflow faster
    as long as it is not interdependent.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 第7章《Python脚本的并行执行》涵盖了如何并行实例化和执行Python代码。只要不相互依赖，这将使我们能够更快地完成自动化工作流程。
- en: '[Chapter 8](part0116.html#3EK180-9cfcdc5beecd470bbeda046372f0337f), *Preparing
    a Lab Environment*, covers the installation process and preparation for our lab
    environment. We will install our automation server either in CentOS  or Ubuntu
    over different hypervisors. Then we will learn how to automate the operating system
    installation with *Cobbler*.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 第8章《准备实验室环境》涵盖了实验室环境的安装过程和准备工作。我们将在不同的虚拟化器上安装我们的自动化服务器，无论是在CentOS还是Ubuntu上。然后我们将学习如何使用Cobbler自动安装操作系统。
- en: '[Chapter 9](part0128.html#3Q2800-9cfcdc5beecd470bbeda046372f0337f), *Using
    the Subprocess Module*, explains how to send a command from a Python script directly
    to the operating system shell and investigate the returning output.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 第9章《使用Subprocess模块》解释了如何从Python脚本直接发送命令到操作系统shell并调查返回的输出。
- en: '[Chapter 10](part0133.html#3UQQQ0-9cfcdc5beecd470bbeda046372f0337f), *Running
    System Administration Tasks with Fabric*, introduces Fabric, which is a Python
    library for executing system administration tasks through SSH. Also, it''s used
    in large deployment of applications. We will learn how to utilize and leverage
    this library to execute tasks on remote servers.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 第10章《使用Fabric运行系统管理任务》介绍了Fabric，这是一个用于通过SSH执行系统管理任务的Python库。它也用于大规模应用部署。我们将学习如何利用和发挥这个库来在远程服务器上执行任务。
- en: '[Chapter 11](part0151.html#4G04U0-9cfcdc5beecd470bbeda046372f0337f), *Generating
    System Reports*, *Managing Users, and System Monitoring*, explains that collecting
    data and generating recurring reports from the system is an essential task for
    any system administrator, and automating this task will help you to discover issues
    early and provide a solutions for them. In this chapter, we will see some proven
    ways to automate data collection from servers and generate formal reports. We
    will learn how to manage new and existing users using Python and Ansible. Also,
    we will dive into monitoring the system KPI and logs analysis. You can also schedule
    the monitoring scripts to run on a regular basis and send the result to your mail
    inbox.'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 第11章《生成系统报告》、《管理用户和系统监控》解释了从系统收集数据并生成定期报告对于任何系统管理员来说都是一项重要任务，自动化这项任务将帮助您及早发现问题并为其提供解决方案。在本章中，我们将看到一些经过验证的自动化从服务器收集数据并生成正式报告的方法。我们将学习如何使用Python和Ansible管理新用户和现有用户。此外，我们还将深入研究系统KPI的监控和日志分析。您还可以安排监控脚本定期运行，并将结果发送到您的邮箱。
- en: '[Chapter 12](part0160.html#4OIQ00-9cfcdc5beecd470bbeda046372f0337f), *Interacting
    with the Database*, states that if you''re a database administrator or database
    developer, then Python provides a wide range of libraries and modules that cover
    managing and working on popular DBMSes such as MySQL, Postgress, and Oracle. In
    this chapter, we will learn how to interact with DBMSes using Python connectors.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 第12章《与数据库交互》指出，如果你是数据库管理员或数据库开发人员，那么Python提供了许多库和模块，涵盖了管理和操作流行的DBMS（如MySQL、Postgress和Oracle）。在本章中，我们将学习如何使用Python连接器与DBMS进行交互。
- en: '[Chapter 13](part0168.html#506UG0-9cfcdc5beecd470bbeda046372f0337f), *Ansible
    for System Administration*, explores one of the most powerful tools in configuration
    management software. Ansible is very powerful when it comes to system administration
    and can be used to make sure the configuration is replicated exactly across hundreds
    or even thousands of servers at the same time.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 第13章《系统管理的Ansible》探讨了配置管理软件中最强大的工具之一。当涉及系统管理时，Ansible非常强大，可以确保配置在数百甚至数千台服务器上同时精确复制。
- en: '[Chapter 14](part0183.html#5EGMU0-9cfcdc5beecd470bbeda046372f0337f), *Creating
    and Managing VMWare Virtual Machines*, explains how to automate VM creation on
    a VMWare hypervisor. We will discover different ways to create and manage virtual
    machines over ESXi using VMWare''s official binding library.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 第14章《创建和管理VMWare虚拟机》解释了如何在VMWare虚拟化器上自动创建VM。我们将探索使用VMWare官方绑定库在ESXi上创建和管理虚拟机的不同方法。
- en: '[Chapter 15](part0196.html#5QTE80-9cfcdc5beecd470bbeda046372f0337f), *Interacting
    with Openstack API*, explains that OpenStack was very popular in creating private
    IaaS when it came to private cloud. We will use Python modules such as requeststo
    create REST calls and interact with OpenStack services such as nova, cinder, and
    neutron, and create the required resources over OpenStack. Later in the chapter,
    wewill use Ansible playbooks for the same workflow.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 第15章《与Openstack API交互》解释了在创建私有云时，OpenStack在私有IaaS方面非常受欢迎。我们将使用Python模块，如requests，创建REST调用并与OpenStack服务（如nova、cinder和neutron）进行交互，并在OpenStack上创建所需的资源。在本章后期，我们将使用Ansible
    playbooks执行相同的工作流程。
- en: '[Chapter 16](part0217.html#6EUA20-9cfcdc5beecd470bbeda046372f0337f), *Automating
    AWS with Python and Boto3*, covers how to automate common AWS services such as
    EC2 and S3 using official Amazon binindgs (BOTO3), which provides an easy-to-use
    API for services access.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '[第16章](part0217.html#6EUA20-9cfcdc5beecd470bbeda046372f0337f)，*使用Python和Boto3自动化AWS*，介绍了如何使用官方的Amazon绑定（BOTO3）自动化常见的AWS服务，如EC2和S3，它提供了一个易于使用的API来访问服务。'
- en: '[Chapter 17](part0227.html#6OFFM0-9cfcdc5beecd470bbeda046372f0337f), *Using
    the SCAPY Framework*, introduces SCAPY, which is a powerful Python tool used to
    build and craft packets and then send them on the wire. You can build any type
    of network stream and send it on the wire. It can also help you to capture network
    packets and replay them to the wire.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '[第17章](part0227.html#6OFFM0-9cfcdc5beecd470bbeda046372f0337f)，*使用SCAPY框架*，介绍了SCAPY，这是一个强大的Python工具，用于构建和制作数据包，然后将其发送到网络上。您可以构建任何类型的网络流并将其发送到网络上。它还可以帮助您捕获网络数据包并将其重放到网络上。'
- en: '[Chapter 18](part0240.html#74S700-9cfcdc5beecd470bbeda046372f0337f), *Building
    Network Scanner Using Python*, provides a complete example of building a network
    scanner using Python. You can scan a complete subnet for different protocols and
    ports and generate a report for each scanned host. Then, we will learn how to
    share the code with the open source community (GitHub) by leveraging Git.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '[第18章](part0240.html#74S700-9cfcdc5beecd470bbeda046372f0337f)，*使用Python构建网络扫描器*，提供了使用Python构建网络扫描器的完整示例。您可以扫描完整的子网以查找不同的协议和端口，并为每个扫描的主机生成报告。然后，我们将学习如何通过Git与开源社区（GitHub）共享代码。'
- en: To get the most out of this book
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为了充分利用本书
- en: The reader should be acquainted with the basic programming paradigm of Python
    programming language and should have basic knowledge of Linux and Linux shell
    scripting.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 读者应该熟悉Python编程语言的基本编程范式，并且应该具有Linux和Linux shell脚本的基本知识。
- en: Download the example code files
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载示例代码文件
- en: You can download the example code files for this book from your account at [www.packtpub.com](http://www.packtpub.com).
    If you purchased this book elsewhere, you can visit [www.packtpub.com/support](http://www.packtpub.com/support)
    and register to have the files emailed directly to you.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从[www.packtpub.com](http://www.packtpub.com)的帐户中下载本书的示例代码文件。如果您在其他地方购买了本书，您可以访问[www.packtpub.com/support](http://www.packtpub.com/support)并注册，以便直接将文件发送到您的邮箱。
- en: 'You can download the code files by following these steps:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以按照以下步骤下载代码文件：
- en: Log in or register at [www.packtpub.com](http://www.packtpub.com/support).
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在[www.packtpub.com](http://www.packtpub.com/support)上登录或注册。
- en: Select the SUPPORT tab.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择“支持”选项卡。
- en: Click on Code Downloads & Errata.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击“代码下载和勘误”。
- en: Enter the name of the book in the Search box and follow the onscreen instructions.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在搜索框中输入书名，然后按照屏幕上的说明操作。
- en: 'Once the file is downloaded, please make sure that you unzip or extract the
    folder using the latest version of:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 下载文件后，请确保使用最新版本的解压缩软件解压缩文件夹：
- en: WinRAR/7-Zip for Windows
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: WinRAR/7-Zip for Windows
- en: Zipeg/iZip/UnRarX for Mac
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Zipeg/iZip/UnRarX for Mac
- en: 7-Zip/PeaZip for Linux
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 7-Zip/PeaZip for Linux
- en: The code bundle for the book is also hosted on GitHub at [https://github.com/PacktPublishing/Hands-On-Enterprise-Automation-with-Python](https://github.com/PacktPublishing/Hands-On-Enterprise-Automation-with-Python). In
    case there's an update to the code, it will be updated on the existing GitHub
    repository.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 该书的代码包也托管在GitHub上，网址为[https://github.com/PacktPublishing/Hands-On-Enterprise-Automation-with-Python](https://github.com/PacktPublishing/Hands-On-Enterprise-Automation-with-Python)。如果代码有更新，将在现有的GitHub存储库上进行更新。
- en: We also have other code bundles from our rich catalog of books and videos available
    at **[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)**.
    Check them out!
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还有来自我们丰富的图书和视频目录的其他代码包，可在**[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)**上找到。去看看吧！
- en: Download the color images
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载彩色图片
- en: 'We also provide a PDF file that has color images of the screenshots/diagrams
    used in this book. You can download it here: [http://www.packtpub.com/sites/default/files/downloads/HandsOnEnterpriseAutomationwithPython_ColorImages.pdf](http://www.packtpub.com/sites/default/files/downloads/HandsOnEnterpriseAutomationwithPython_ColorImages.pdf).'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还提供了一个PDF文件，其中包含本书中使用的屏幕截图/图表的彩色图片。您可以在这里下载：[http://www.packtpub.com/sites/default/files/downloads/HandsOnEnterpriseAutomationwithPython_ColorImages.pdf](http://www.packtpub.com/sites/default/files/downloads/HandsOnEnterpriseAutomationwithPython_ColorImages.pdf)。
- en: Conventions used
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用的约定
- en: There are a number of text conventions used throughout this book.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中使用了许多文本约定。
- en: '`CodeInText`: Indicates code words in text, database table names, folder names,
    filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles.
    Here is an example: "Some large packages such as `matplotlib` or `django` have
    hundreds of modules inside them, and developers usually categorize the related
    modules into a sub-directories."'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '`CodeInText`：表示文本中的代码字词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟URL、用户输入和Twitter句柄。这是一个例子："一些大型软件包，如`matplotlib`或`django`，其中包含数百个模块，开发人员通常将相关模块分类到子目录中。"'
- en: 'A block of code is set as follows:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块设置如下：
- en: '[PRE0]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们希望引起您对代码块的特定部分的注意时，相关的行或项目将以粗体显示：
- en: '[PRE1]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Any command-line input or output is written as follows:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 任何命令行输入或输出都将按照以下方式编写：
- en: '[PRE2]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '**Bold**: Indicates a new term, an important word, or words that you see onscreen.
    For example, words in menus or dialog boxes appear in the text like this. Here
    is an example:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词会以这种方式出现在文本中。这是一个例子：'
- en: '"Choose your platform from the Download page, and either the x86 or x64 version."'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '"从下载页面选择您的平台，然后选择x86或x64版本。"'
- en: Warnings or important notes appear like this.Tips and tricks appear like this.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 警告或重要说明会以这种方式出现。提示和技巧会以这种方式出现。
